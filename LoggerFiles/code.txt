/*@!Encoding:1252*/
includes
{
  
}

variables
{
  pdu ISOx_SACID_1_Req_FD_XIX_HCP5_CANFD01 Diag_Req;
  pdu NM_Gateway_XIX_HCP5_CANFD01 NM_Msg;
  pdu HVLM_GBT_01_XIX_HCP5_CANFD01 Chademo_CAN;
  //linFrame ETSAs_Slave_01 ETSA_1;
 // linframe ETSAs_Slave_02 ETSA_2;
  int r=0,rr=0,row=0,col=0,backup_status=0,backup1,backup2,backup3,length,len,dtc_flag=0;
  word rrg=0,mod=0,cont=0;
  byte dtc[16][3];
  byte dtc_status[20],R[4096];
  int FlagR=0,confirmed_DTC_Flag=1;
  byte a[1000],b[100],c[100],d[2],e[6],f[1],g[2],h[4],r1[1],r2[1],r3[1],temp1,temp2,dec,ab[100];
  byte h1[2],h2[2],h3[2],h4[2],h5[2],h6[2],h7[2],h8[2],h9[2],h10[2],DTC[3];
  byte h11[2],h12[2],h13[2],h14[2],h15[2],h16[2],h17[2],h18[2],h19[2],h20[2],h21[2],h22[2],h23[2],h24[2],h25[2],h26[2],h27[2],h28[2];
  byte s1[1],s2[1],s3[1],s4[1],t1[8],t2[8],t3[8],u1[1],u2[1],u3[1],u4[1],u5[1],u6[1],u7[1],u8[1];
  byte v1[1],v2[1],v3[1],v4[1],v5[1],v6[1],v7[1],v8[1],w1[1],w2[1],x[3],temp[8],z[50],chip[1],Add[1],mtr[1],qca[4];
  int y[23][8],mtr_reg[18][8],qca_reg[22][8],analog=0,analog1,analog2;
  byte DTC1[3],	DTC2[3],	DTC3[3],	DTC4[3],	DTC5[3],	DTC6[3],	DTC7[3],	DTC8[3],	DTC9[3],	DTC10[3],	DTC11[3],	DTC12[3],	DTC13[3],	DTC14[3],	DTC15[3],	DTC16[3],	DTC17[3],	DTC18[3],	DTC19[3],	DTC20[3],	DTC21[3],	DTC22[3],	DTC23[3],	DTC24[3],	DTC25[3],	DTC26[3],	DTC27[3],	DTC28[3],	DTC29[3],	DTC30[3],	DTC31[3],	DTC32[3],	DTC33[3],	DTC34[3],	DTC35[3],	DTC36[3],	DTC37[3],	DTC38[3],	DTC39[3],	DTC40[3];	
  byte C_DTC1[3],	C_DTC2[3],	C_DTC3[3],	C_DTC4[3],	C_DTC5[3],	C_DTC6[3], C_DTC7[3],	C_DTC8[3];
  byte DTC41[3],	DTC42[3],	DTC43[3],	DTC44[3],	DTC45[3],	DTC46[3],	DTC47[3],	DTC48[3],	DTC49[3],	DTC50[3],	DTC51[3],	DTC52[3],	DTC53[3],	DTC54[3],	DTC55[3],	DTC56[3],	DTC57[3],	DTC58[3],	DTC59[3],	DTC60[3],	DTC61[3],	DTC62[3],	DTC63[3],	DTC64[3],	DTC65[3],	DTC66[3],	DTC67[3],	DTC68[3],	DTC69[3],	DTC70[3],	DTC71[3],	DTC72[3],	DTC73[3],	DTC74[3],	DTC75[3],	DTC76[3],	DTC77[3],	DTC78[3],	DTC79[3],	DTC80[3];	
  byte DTC81[3],	DTC82[3],	DTC83[3],	DTC84[3],	DTC85[3],	DTC86[3],	DTC87[3],	DTC88[3],	DTC89[3],	DTC90[3],	DTC91[3],	DTC92[3],	DTC93[3],	DTC94[3],	DTC95[3],	DTC96[3],	DTC97[3],	DTC98[3],	DTC99[3],	DTC100[3],	DTC101[3],	DTC102[3],	DTC103[3],	DTC104[3],	DTC105[3],	DTC106[3],	DTC107[3],	DTC108[3],	DTC109[3],	DTC110[3],	DTC111[3],	DTC112[3],	DTC113[3],	DTC114[3],	DTC115[3],	DTC116[3],	DTC117[3],	DTC118[3],	DTC119[3],	DTC120[3];	
  byte DTC121[3],	DTC122[3],	DTC123[3],	DTC124[3],	DTC125[3],	DTC126[3],	DTC127[3],	DTC128[3],	DTC129[3],	DTC130[3],	DTC131[3],	DTC132[3],	DTC133[3],	DTC134[3],	DTC135[3],	DTC136[3],	DTC137[3],	DTC138[3],	DTC139[3],	DTC140[3],	DTC141[3],	DTC142[3],	DTC143[3],	DTC144[3],	DTC145[3],	DTC146[3],	DTC147[3],	DTC148[3],	DTC149[3],	DTC150[3],	DTC151[3],	DTC152[3],	DTC153[3],	DTC154[3],	DTC155[3],	DTC156[3],	DTC157[3],	DTC158[3],	DTC159[3],	DTC160[3];	
  byte DTC161[3],	DTC162[3],	DTC163[3],	DTC164[3],	DTC165[3],	DTC166[3],	DTC167[3],	DTC168[3],	DTC169[3],	DTC170[3],	DTC171[3],	DTC172[3],	DTC173[3],	DTC174[3],	DTC175[3],	DTC176[3],	DTC177[3],	DTC178[3],	DTC179[3],	DTC180[3],	DTC181[3],	DTC182[3],	DTC183[3],	DTC184[3],	DTC185[3],	DTC186[3],	DTC187[3],	DTC188[3],	DTC189[3],	DTC190[3],	DTC191[3],	DTC192[3],	DTC193[3],	DTC194[3],	DTC195[3],	DTC196[3],	DTC197[3],	DTC198[3],	DTC199[3],	DTC200[3];	
  byte DTC201[3],	DTC202[3],	DTC203[3],	DTC204[3],	DTC205[3],	DTC206[3],	DTC207[3],	DTC208[3],	DTC209[3],	DTC210[3],	DTC211[3],	DTC212[3],	DTC213[3],	DTC214[3],	DTC215[3],	DTC216[3],	DTC217[3],	DTC218[3],	DTC219[3],	DTC220[3],DTC_List[883][3];
  msTimer Tw,TesterPresent;
  msTimer NM_Timer,Chademo_Timer;
  msTimer Monitor;
  msTimer Clear_Display,LIN1_Timer;
  const int TxSize=4098;
  const int RxSize=4098;
  byte getBuffer[TxSize];
  byte RxBuffer[RxSize];
  char K[50],L[50],M[50],N[50],P[50],Q[50],S[500];
   int i=0,j=0,S1[1],temp3,temp4,tempr,tempr1;
  int k=0,sbc_temp=0,mtr_temp=0,qca_temp=0,mtr_value=0;
   int Chip_Status=0,Link=0,Fehler=0,Modem_Active=0;
  int flag=0,verify1,verify2,verify3,verify4;
  pdu  HVLM_PLC_01_XIX_HCP5_CANFD01 PLC_Msg; 
  pdu HVLM_13_XIX_HCP5_CANFD01 HVLM_13;
  pdu HVLS_Ladedose_SG1_XIX_HCP5_CANFD01 Ladedose;
}

on timer Tw
 {
  
  //No action 
}

on timer TesterPresent
{
     Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x02;
     Diag_Req.byte(1)=0x3E;
     Diag_Req.byte(2)=0x00;
     Diag_Req.byte(3)=0x00;
     Diag_Req.byte(4)=0x00;
     
    triggerPDU(Diag_Req);
}

on timer NM_Timer
{
   
  for(i=0;i<24;i++)
  {
    NM_Msg.byte(i)=0x00;
  }
   triggerPDU(NM_Msg);
}

on timer Chademo_Timer
{
 
     triggerPDU(Chademo_CAN);
}

on timer LIN1_Timer
{
//  ETSA_1.dlc=0x08;
//  ETSA_1.ETSA1_Entriegeln_Anf=0x01;
//  output(ETSA_1);
  
  
}
on timer Clear_Display
{
  FlagR=0;
   putValue(Routine_Status1_Env, "");
   putvalue(Routine_Result1_Env, "");
   putValue(Routine_Status2_Env, "");
   putvalue(Routine_Result2_Env, "");
      
}



//on signal HVLS_LdTaster_Anf_LK1_XIX_HVLS_Ladedose_SG1_XIX_HCP5_CANFD01
//{
// if(this==1)
// @LIN_LED_Env=1;
//}
//  @LIN_LED_Env=0;
// } 
//}


//on PDU ISOx_SACID_1_Resp_FD_XIX_HCP5_CANFD01
  on message 0x1c46001Bx
{
  
  //Session Control...........................................................................
  a[0]=this.byte(0);
  a[1]=this.byte(1);
  a[2]=this.byte(2);
  a[3]=this.byte(3);
  a[4]=this.byte(4);
  a[5]=this.byte(5);
  
  if(a[1]==0x50&&a[02]==0x01)
  {
 
    putValue(Session_Resp_Env,"Default Positive");
    flag=0;
    
  }
  else if(a[1]==0x50&&a[2]==0x03)
  {
    putValue(Session_Resp_Env,"Extended Positive");
    flag=0;
   
  }
   else if(a[1]==0x50&&a[2]==0x60)
  {
   
    putValue(Session_Resp_Env,"Aptiv Positive");
    flag=0;
   
  }
  
  //Security Access......................................................................
  else if(a[1]==0x67&&a[2]==0x61)
  {
        putValue(Security_Resp_Env,"Security Req Positive");
   
  }
  
  else if(a[1]==0x67&&a[2]==0x62)
  {
        putValue(Security_Resp_Env,"Security Key Positive");
    
  }
  
 //Diagnostics Read..........................................................................
  
   else if(a[1]==0x62&&a[2]==0xF1&&a[3]==0x89 ) //
  {
    a[4]=this.byte(4);
    a[5]=this.byte(5);
    a[6]=this.byte(6);
    a[7]=this.byte(7);
    
    for(i=4;i<=7;i++)
    { 
      N[i-4]=(char)a[i];
     
    }
      putValue(SW_Vn_Env,N);
  } 
  
    else if(a[2]==0x62&& a[3]==0xF1 && a[4]==0xF0)
  {
    
    for(i=5;i<=15;i++)
    { 
      a[i]=this.byte(i);
      K[i-5]=(char)a[i];
     
    }
      putValue(HW_Vn_Env,K);
  } 
  
  
      else if(a[1]==0x62&& a[2]==0xF1 && a[3]==0xF2)
  {
    
    for(i=4;i<=5;i++)
    { 
      a[i]=this.byte(i);
      d[i-4]=a[i];     
    }
      putvalue(Flap_Inlet1_Env,d);
  }
 
  
  
//////////////////////Analog Read Update/////////////////////////////////////////  
  else if(a[2]==0x62&& a[3]==0xFD && a[4]==0x00)
  {
    
    for(i=0;i<=60;i++)
    { 
      a[i]=this.byte(i);
         
    }
 h1[0]=a[5];
 h1[1]=a[6];
 h2[0]=a[7];
 h2[1]=a[8];
 h3[0]=a[9];
 h3[1]=a[10];
 h4[0]=a[11];   
 h4[1]=a[12];   
 h5[0]=a[13];   
 h5[1]=a[14];   
 h6[0]=a[15];   
 h6[1]=a[16];   
 h7[0]=a[17];   
 h7[1]=a[18];   
 h8[0]=a[19];   
 h8[1]=a[20];
 h9[0]=a[21];   
 h9[1]=a[22];   
 h10[0]=a[23];   
 h10[1]=a[24];  
 h11[0]=a[25];
 h11[1]=a[26];
 h12[0]=a[27];
 h12[1]=a[28];
 h13[0]=a[29];
 h13[1]=a[30];
 h14[0]=a[31];   
 h14[1]=a[32];   
 h15[0]=a[33];   
 h15[1]=a[34];   
 h16[0]=a[35];   
 h16[1]=a[36];   
 h17[0]=a[37];   
 h17[1]=a[38];   
 h18[0]=a[39];   
 h18[1]=a[40];
 h19[0]=a[41];   
 h19[1]=a[42];   
 h20[0]=a[43];   
 h20[1]=a[44];

 h21[0]=a[45];
 h21[1]=a[46];
 h22[0]=a[47];
 h22[1]=a[48];
 h23[0]=a[49];   
 h23[1]=a[50];   
 h24[0]=a[51];   
 h24[1]=a[52];   
 h25[0]=a[53];   
 h25[1]=a[54];   
 h26[0]=a[55];   
 h26[1]=a[56];   
 h27[0]=a[57];   
 h27[1]=a[58];
 h28[0]=a[59];   
 h28[1]=a[60];   

    
    putvalue(Motor_1_2_fb_Env,h1);
    putvalue(Motor_3_4_fb_Env,h2);
    putvalue(Flap_motor_1_Lswitch_Env,h3);
    putvalue(Flap_motor_2_Lswitch_Env,h4);
    putvalue(Flap_Lock_AC_Combo_Env,h5);
    putvalue(Flap_Lock_DC_Env,h6);
    putvalue(Battery_Measurement_Env,h7);
    putvalue(Lights_Driver_FB_Env,h8);
    putvalue(Temp_NTC_Plus_Ref_Env,h9);
    putvalue(Temp_NTC_Minus_Ref_Env,h10);
    putvalue(Temp_NTC_Ref_Env,h11);
    putvalue(Temp_NTC_Plus_Env,h12);
    putvalue(Temp_NTC_Minus_Env,h13);
    putvalue(Temp_PTC_Sensor_Env,h14);
    putvalue(PLC_Crystal_Temp_Env,h15);
    putvalue(Proximity_Sensor_Env,h16);
    putvalue(Prox_Sensor_Ref_Volt_Env,h17);
    putvalue(Control_Pilot_Env,h18);
   
    putvalue(Chademo_GBT_CC1_Env,h19);
    putvalue(Chademo_GBT_CC2_Env,h20);
    putvalue(MultiFunc_LED1_DCFBK_Env,h21);
    putvalue(MultiFunc_LED2_DCFBK_Env,h22);
   
    putvalue(Mot1_FBK_AI_Env,h23);
    putvalue(Mot2_FBK_AI_Env,h24);
    putvalue(Mot3_FBK_AI_Env,h25);
    putvalue(Mot4_FBK_AI_Env,h26);
    putvalue(Control_Pilot_AI_Env,h27);
    putvalue(GBT_CC2_Env,h28);
 

  }
//-------------------------------------------------------------------------------------------  
  
   else if(a[1]==0x62&& a[2]==0xFD && a[3]==0x02)
  {
    
    for(i=4;i<=4;i++)
    { 
      a[i]=this.byte(i);
      f[i-4]=a[i];
     
    } 
    
     putvalue(PWM_Duty_Cycle_Env,f);
        
   
   for(i=5;i<=6;i++)
    { 
      a[i]=this.byte(i);
      g[i-5]=a[i];
     
    }
      putvalue(PWM_Frequncy_Env,g);
    
  } 
  
    else if(a[2]==0x62&& a[3]==0xFD && a[4]==0x04)
  {
    
    for(i=5;i<=10;i++)
    { 
      a[i]=this.byte(i);
      e[i-5]=a[i];
     
    }
      putvalue(MAC_Address_PLC_Env,e);
    
 } 
  
      else if(a[1]==0x62&& a[2]==0xF1 && a[3]==0xF1)
  {
    
    for(i=4;i<=7;i++)
    { 
      a[i]=this.byte(i);
      h[i-4]=a[i];
     
    }
      putvalue(CPU_Load_Env,h);
    
 } 
  
        else if(a[1]==0x62&& a[2]==0xFD && a[3]==0x01)
  {
    
      a[4]=this.byte(4);
    r1[0]=a[4]>>5;
    r1[0]=r1[0]&1;
    r2[0]=a[4]>>6;
    r2[0]=r2[0]&1;
    r3[0]=a[4]>>7;
    r3[0]=r3[0]&1;
    putvalue(Chademo_h_Env,r1);
    putvalue(Chademo_g_Env,r2);
    putvalue(Chademo_f_Env,r3);
    
 } 
  

  
  
  
 //Negative Response...........................................................................

    else if(a[1]==0x7F && a[2]==0x10)
    {

      putValue(Session_Resp_Env,"Negative Response");
  }
    else if(a[1]==0x7F && a[2]==0x27)
    {

      putValue(Security_Resp_Env,"Negative Response");
  }
    
else if(a[1]==0x7F && a[2]==0x31 )
{
 if(FlagR==1)
{
  putvalue(Routine_Result1_Env,"Negative Response");
   putValue(Routine_Status1_Env,"Negative Response");
 }
else if(FlagR==2)
{
   putvalue(Routine_Result2_Env,"Negative Response");
   putValue(Routine_Status2_Env,"Negative Response");
  
}
  }
    
  else if(a[1]==0x71&& a[2]==0x03)
  {
     a[4]=this.byte(4);
     a[5]=this.byte(5);
    
    if(a[3]==0xF0 && a[4]==0x05 )
    {
      Routine_Result1();
    }
    
    else{
       Routine_Result2();
    }
    
  }   
    
    else if(a[0]==0x00&&a[2]==0x71&&a[3]==0x03)
    {
      a[6]=this.byte(6);
      a[7]=this.byte(7);
      a[8]=this.byte(8);
      a[9]=this.byte(9);
      a[10]=this.byte(10);
      
      if(a[4]==0xF0 && a[5]==0x00)
    {
      putValue(Chademo_Disp_Env,a);      
    }
    
    }  
    
 else if(a[1]==0x62 && a[2]==0xFD && a[3]==0x05) 
    {
      
      for(i=4;i<=7;i++)
    { 
      a[i]=this.byte(i);
         
    }
      
      s1[0]=a[4];
      s2[0]=a[5];
      s3[0]=a[6];
      s4[0]=a[7]; 
      
      putValue(Light_AC_Read_Env,s1);
      putValue(Light_DC_Read_Env,s2);
      putValue(MF_DC1_Read_Env,s3);
      putValue(MF_DC2_Read_Env,s4);
    }   
    
   else if(a[1]==0x62 && a[2]==0xFD && a[3]==0x03) 
    {
      a[4]=this.byte(4);
      a[5]=this.byte(5);
      a[6]=this.byte(6);
   
      
      u1[0]=a[4];
      u1[0]=u1[0]&1;
      u2[0]=a[4]>>1;
      u2[0]=u2[0]&1;
      u3[0]=a[4]>>2;
      u3[0]=u3[0]&1;
      u4[0]=a[4]>>3;
      u4[0]=u4[0]&1;
      u5[0]=a[4]>>4;
      u5[0]=u5[0]&1;
      u6[0]=a[4]>>5;
      u6[0]=u6[0]&1;
      u7[0]=a[4]>>6;
      u7[0]=u7[0]&1;
      u8[0]=a[4]>>7;
      u8[0]=u8[0]&1;
      
      v1[0]=a[5];
      v1[0]=v1[0]&1;
      v2[0]=a[5]>>1;
      v2[0]=v2[0]&1;
      v3[0]=a[5]>>2;
      v3[0]=v3[0]&1;
      v4[0]=a[5]>>3;
      v4[0]=v4[0]&1;
      v5[0]=a[5]>>4;
      v5[0]=v5[0]&1;
      v6[0]=a[5]>>5;
      v6[0]=v6[0]&1;
      v7[0]=a[5]>>6;
      v7[0]=v7[0]&1;
      v8[0]=a[5]>>7;
      v8[0]=v8[0]&1;
      
      
      w1[0]=a[6]>>6;
      w1[0]=w1[0]&1;
      w2[0]=a[6]>>7;
      w2[0]=w2[0]&1;
      
      putvalue(Light_Driver1_Selector0_Read_Env,u8);
      putvalue(Light_Driver1_Select1_Read_Env,u7);
      putvalue(Light_Driver1_Enabler_Read_Env,u6);
      putvalue(Chademo_pin_k_Read_Env,u5);
      putvalue(Motor_Mode_Read_Env,u4);
      putvalue(Motor1_Switch_Read_Env,u3);
      putvalue(Motor2_Switch_Read_Env,u2);
      putvalue(Motor1_2_Switch_Read_Env,u1);
      putvalue(Motor3_4_Switch_Read_Env,v8);
      putvalue(Motor3_Switch_Read_Env,v7);
      putvalue(Motor4_Switch_Read_Env,v6);
      putvalue(Pilot_Diag_Read_Env,v5);
      putvalue(Control_Pilot_Switch_Read_Env,v4);
      putvalue(Diag_Mode_Read_Env,v3);
      putvalue(Ref_5V_Voltage_Read_Env,v2);
      putvalue(Ref_12V_Voltage_Read_Env,v1);
      putvalue(Motor_Driver_Sleep_Read_Env,w2);
      putvalue(CAN_Transceiver_Standby_Read_Env,w1);
   
 
    }   
    
    else if(a[2]==0x62 && a[3]==0xFD && a[4]==0x06) 
    {

      for(i=5;i<=27;i++)
      {
         a[i]=this.byte(i);
        for(j=0;j<=7;j++)
      {
        temp[j]=a[i]>>j;
        temp[j]=temp[j]&1;
        y[i-5][j]=temp[j];
        
      }
      }
      
  
      
putvalue(SBC_Bit7_Read_Env,y[sbc_temp][7]);
putvalue(SBC_Bit6_Read_Env,y[sbc_temp][6]);
putvalue(SBC_Bit5_Read_Env,y[sbc_temp][5]);
putvalue(SBC_Bit4_Read_Env,y[sbc_temp][4]);
putvalue(SBC_Bit3_Read_Env,y[sbc_temp][3]);
putvalue(SBC_Bit2_Read_Env,y[sbc_temp][2]);
putvalue(SBC_Bit1_Read_Env,y[sbc_temp][1]);
putvalue(SBC_Bit0_Read_Env,y[sbc_temp][0]);
 
 
    }   
    
else if(a[2]==0x62 && a[3]==0xFD && a[4]==0x08) 
    {

      for(i=5;i<=22;i++)
      {
         a[i]=this.byte(i);
        for(j=0;j<=7;j++)
      {
        temp[j]=a[i]>>j;
        temp[j]=temp[j]&1;
        mtr_reg[i-5][j]=temp[j];
        
      }
      }
      
  
      
putvalue(MTR_Bit7_Read_Env,mtr_reg[(mtr_temp+mtr_value)][7]);
putvalue(MTR_Bit6_Read_Env,mtr_reg[(mtr_temp+mtr_value)][6]);
putvalue(MTR_Bit5_Read_Env,mtr_reg[(mtr_temp+mtr_value)][5]);
putvalue(MTR_Bit4_Read_Env,mtr_reg[(mtr_temp+mtr_value)][4]);
putvalue(MTR_Bit3_Read_Env,mtr_reg[(mtr_temp+mtr_value)][3]);
putvalue(MTR_Bit2_Read_Env,mtr_reg[(mtr_temp+mtr_value)][2]);
putvalue(MTR_Bit1_Read_Env,mtr_reg[(mtr_temp+mtr_value)][1]);
putvalue(MTR_Bit0_Read_Env,mtr_reg[(mtr_temp+mtr_value)][0]);
 
 
    }    
    
else if(a[2]==0x62 && a[3]==0xFD && a[4]==0x0A) 
    {

      for(i=5;i<=25;i++)
      {
         a[i]=this.byte(i);
        for(j=0;j<=7;j++)
      {
        temp[j]=a[i]>>j;
        temp[j]=temp[j]&1;
        qca_reg[i-5][j]=temp[j];
        
      }
      }
      
  
putvalue(QCA_Bit15_Read_Env,qca_reg[qca_temp][7]);
putvalue(QCA_Bit14_Read_Env,qca_reg[qca_temp][6]);
putvalue(QCA_Bit13_Read_Env,qca_reg[qca_temp][5]);
putvalue(QCA_Bit12_Read_Env,qca_reg[qca_temp][4]);
putvalue(QCA_Bit11_Read_Env,qca_reg[qca_temp][3]);
putvalue(QCA_Bit10_Read_Env,qca_reg[qca_temp][2]);
putvalue(QCA_Bit9_Read_Env,qca_reg[qca_temp][1]);
putvalue(QCA_Bit8_Read_Env,qca_reg[qca_temp][0]);      
putvalue(QCA_Bit7_Read_Env,qca_reg[qca_temp+1][7]);
putvalue(QCA_Bit6_Read_Env,qca_reg[qca_temp+1][6]);
putvalue(QCA_Bit5_Read_Env,qca_reg[qca_temp+1][5]);
putvalue(QCA_Bit4_Read_Env,qca_reg[qca_temp+1][4]);
putvalue(QCA_Bit3_Read_Env,qca_reg[qca_temp+1][3]);
putvalue(QCA_Bit2_Read_Env,qca_reg[qca_temp+1][2]);
putvalue(QCA_Bit1_Read_Env,qca_reg[qca_temp+1][1]);
putvalue(QCA_Bit0_Read_Env,qca_reg[qca_temp+1][0]);
 
 
    }      
    
//////////////////////////////////////////////////////DTC Read////////////////////////////////////////////////////////
    
 else if(a[2]==0x59 && a[3]==0x06) 
{
         
  a[7]=this.byte(7);
  
  if (a[7]==0x2F)
  {
 putvalue(DTC_Status_Env,"DTC Active");
     @DTC_LED_Env=1;
    
  }
  
  else if (a[7]==0x50)
  {
 putvalue(DTC_Status_Env,"Condition Not Met");
    @DTC_LED_Env=0;
    
  }
  
   else if (a[7]==0x2E)
  {
 putvalue(DTC_Status_Env,"Fault Removed");
    @DTC_LED_Env=0;
    
  }
  
 else if(a[7]==0x00)
  {
 putvalue(DTC_Status_Env,"DTC Not Set");
    @DTC_LED_Env=0;
    
 }
      
 
    }  

else if(a[1]==0x59 && a[2]==0x06) 
{
         
  a[6]=this.byte(6);
  
  if (a[6]==0x2F)
  {
 putvalue(DTC_Status_Env,"DTC Active");
     @DTC_LED_Env=1;
    
  }
  
  else if (a[6]==0x50)
  {
 putvalue(DTC_Status_Env,"Condition Not Met");
    @DTC_LED_Env=0;
    
  }
  
   else if (a[6]==0x2E)
  {
 putvalue(DTC_Status_Env,"Fault Removed");
    @DTC_LED_Env=0;
    
  }
  
 else if(a[6]==0x00)
  {
 putvalue(DTC_Status_Env,"DTC Not Set");
    @DTC_LED_Env=0;
    
 }
      
 
    }  

/////////////////////////////////////Clear DTC /////////////////////////////////////////////////////

    else if(a[1]==0x44 && a[2]==0x00)
  {
    
    @Clear_DTC_LED_Env=1;
  } 

/////////////////////////////////////Confirmed DTC Read//////////////////////////////////////////////////////////////////
  
  else if(a[2]==0x59 && a[3]==0x02 && a[4]==0xFF && confirmed_DTC_Flag==1)
  {
    
    
   for(i=5;i<=a[1];i++)
    { 
      ab[i]=this.byte(i);        
    }
    
C_DTC1[0]=(char)ab[5]; 
C_DTC1[1]=(char)ab[6];
C_DTC1[2]=(char)ab[7];
    
C_DTC2[0]=(char)ab[9]; 
C_DTC2[1]=(char)ab[10];
C_DTC2[2]=(char)ab[11];
    
C_DTC3[0]=(char)ab[13]; 
C_DTC3[1]=(char)ab[14];
C_DTC3[2]=(char)ab[15];
    
C_DTC4[0]=(char)ab[17]; 
C_DTC4[1]=(char)ab[18];
C_DTC4[2]=(char)ab[19];
    
C_DTC5[0]=(char)ab[21]; 
C_DTC5[1]=(char)ab[22];
C_DTC5[2]=(char)ab[23];
    
C_DTC6[0]=(char)ab[25]; 
C_DTC6[1]=(char)ab[26];
C_DTC6[2]=(char)ab[27];
    
C_DTC7[0]=(char)ab[29]; 
C_DTC7[1]=(char)ab[30];
C_DTC7[2]=(char)ab[31];
    
C_DTC8[0]=(char)ab[33]; 
C_DTC8[1]=(char)ab[34];
C_DTC8[2]=(char)ab[35];
    
       
    putvalue(Confirmed_DTC_Number_1_Env,C_DTC1);
    putvalue(Confirmed_DTC_Number_2_Env,C_DTC2);
    putvalue(Confirmed_DTC_Number_3_Env,C_DTC3);
    putvalue(Confirmed_DTC_Number_4_Env,C_DTC4);
    putvalue(Confirmed_DTC_Number_5_Env,C_DTC5);
    putvalue(Confirmed_DTC_Number_6_Env,C_DTC6);
    putvalue(Confirmed_DTC_Number_7_Env,C_DTC7);
    putvalue(Confirmed_DTC_Number_8_Env,C_DTC8);
    
    
    
  if (a[8]==0x2F)
  {
 putvalue(Confirmed_DTC_Status_1_Env,"DTC Active");
  }
  
   else if (ab[8]==0x2E)
  {
 putvalue(Confirmed_DTC_Status_1_Env,"Fault Removed");   
  }
  
  else 
  {
 putvalue(Confirmed_DTC_Status_1_Env,"DTC Not Set");   
  }
  
  if (ab[12]==0x2F)
  {
 putvalue(Confirmed_DTC_Status_2_Env,"DTC Active");
  }
  
   else if (ab[12]==0x2E)
  {
 putvalue(Confirmed_DTC_Status_2_Env,"Fault Removed");   
  }
  
   else 
  {
 putvalue(Confirmed_DTC_Status_2_Env,"DTC Not Set");   
  }
  
  if (ab[16]==0x2F)
  {
 putvalue(Confirmed_DTC_Status_3_Env,"DTC Active");
  }
  
   else if (ab[16]==0x2E)
  {
 putvalue(Confirmed_DTC_Status_3_Env,"Fault Removed");   
  } 
  
   else 
  {
 putvalue(Confirmed_DTC_Status_3_Env,"DTC Not Set");   
  }
  
 if (ab[20]==0x2F)
  {
 putvalue(Confirmed_DTC_Status_4_Env,"DTC Active");
  }
  
   else if (ab[20]==0x2E)
  {
 putvalue(Confirmed_DTC_Status_4_Env,"Fault Removed");   
  }  
  
   else 
  {
 putvalue(Confirmed_DTC_Status_4_Env,"DTC Not Set");   
  }

  if (ab[24]==0x2F)
  {
 putvalue(Confirmed_DTC_Status_5_Env,"DTC Active");
  }
  
   else if (ab[24]==0x2E)
  {
 putvalue(Confirmed_DTC_Status_5_Env,"Fault Removed");   
  } 
  
   else 
  {
 putvalue(Confirmed_DTC_Status_5_Env,"DTC Not Set");   
  }
 
  if (ab[28]==0x2F)
  {
 putvalue(Confirmed_DTC_Status_6_Env,"DTC Active");
  }
  
   else if (ab[28]==0x2E)
  {
 putvalue(Confirmed_DTC_Status_6_Env,"Fault Removed");   
  }
  
   else 
  {
 putvalue(Confirmed_DTC_Status_6_Env,"DTC Not Set");   
  }
  
  if (ab[32]==0x2F)
  {
 putvalue(Confirmed_DTC_Status_7_Env,"DTC Active");
  }
  
   else if (ab[32]==0x2E)
  {
 putvalue(Confirmed_DTC_Status_7_Env,"Fault Removed");   
  } 
  
   else 
  {
 putvalue(Confirmed_DTC_Status_7_Env,"DTC Not Set");   
  }
  
  if (ab[36]==0x2F)
  {
 putvalue(Confirmed_DTC_Status_8_Env,"DTC Active");
  }
  
   else if (ab[36]==0x2E)
  {
 putvalue(Confirmed_DTC_Status_8_Env,"Fault Removed");   
  }
  
   else 
  {
 putvalue(Confirmed_DTC_Status_8_Env,"DTC Not Set");   
  }
      
  }        
  
/////////////////////////////////////All DTC Read//////////////////////////////////////////////////////////////////
// else if(a[2]==0x59 && a[3]==0x02 && a[4]==0xFF&& confirmed_DTC_Flag==0)  
   else if(a[2]==0x59 && a[3]==0x02 && a[4]==0xFF)
{
 
 a[0]=this.byte(0);
 a[1]=this.byte(1);    
  tempr=a[0]&0xF0;
  tempr1=a[0]&0x0F;
  tempr1=tempr1*0x100;
  tempr=tempr*0x100;
  rrg=tempr1+tempr+a[1];

  
  mod=rrg%64;
  cont=rrg/64;

  if(cont==0)
    length=mod+2;
  else 
    length=63;
  
  for(i=5;i<=length;i++)
    { 
      a[i]=this.byte(i);
  
    }
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x30;
 Diag_Req.byte(1)=0x00;
 Diag_Req.byte(2)=0x00;
 Diag_Req.byte(3)=0x00;
 Diag_Req.byte(4)=0x00;
 Diag_Req.byte(5)=0x00;
 Diag_Req.byte(6)=0x00;
 Diag_Req.byte(7)=0x00;
 triggerPDU(Diag_Req);
 //for(i=0;i<(rrg-2);i++)
  //{
   // R[i]=this.byte(i+2);
 // }
    i=5;
    
      for(row=0;row<16;row++)
  { 
    if(i>length)
      break;

    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
    dtc_status[row]=a[i+3];
    i=i+4;
  }
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
  
    }

putvalue(DTC_Number_1_Env,dtc[0]);
putvalue(DTC_Number_2_Env,dtc[1]);
putvalue(DTC_Number_3_Env,dtc[2]);
putvalue(DTC_Number_4_Env,dtc[3]);
putvalue(DTC_Number_5_Env,dtc[4]);
putvalue(DTC_Number_6_Env,dtc[5]);
putvalue(DTC_Number_7_Env,dtc[6]);
putvalue(DTC_Number_8_Env,dtc[7]);
putvalue(DTC_Number_9_Env,dtc[8]);
putvalue(DTC_Number_10_Env,dtc[9]);
putvalue(DTC_Number_11_Env,dtc[10]);
putvalue(DTC_Number_12_Env,dtc[11]);
putvalue(DTC_Number_13_Env,dtc[12]);
putvalue(DTC_Number_14_Env,dtc[13]);
putvalue(DTC_Number_15_Env,dtc[14]);
  
  for(i=0;i<14;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_1_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_2_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_3_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_4_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_5_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_6_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_7_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_8_Env,"DTC Active");
    
    if(i==8)
 putvalue(DTC_Status_9_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_10_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_11_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_12_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_13_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_14_Env,"DTC Active");
    

     }

else if (dtc_status[i]==0x2E)
  {
    if(i==0)
 putvalue(DTC_Status_1_Env,"Fault Removed");
    if(i==1)
 putvalue(DTC_Status_2_Env,"Fault Removed");
    if(i==2)
 putvalue(DTC_Status_3_Env,"Fault Removed");
    if(i==3)
 putvalue(DTC_Status_4_Env,"Fault Removed");
    if(i==4)
 putvalue(DTC_Status_5_Env,"Fault Removed");
    if(i==5)
 putvalue(DTC_Status_6_Env,"Fault Removed");
    if(i==6)
 putvalue(DTC_Status_7_Env,"Fault Removed");
    if(i==7)
 putvalue(DTC_Status_8_Env,"Fault Removed");
    if(i==8)
 putvalue(DTC_Status_9_Env,"Fault Removed");
    if(i==9)
 putvalue(DTC_Status_10_Env,"Fault Removed");
    if(i==10)
 putvalue(DTC_Status_11_Env,"Fault Removed");
    if(i==11)
 putvalue(DTC_Status_12_Env,"Fault Removed");
    if(i==12)
 putvalue(DTC_Status_13_Env,"Fault Removed");
    if(i==13)
 putvalue(DTC_Status_14_Env,"Fault Removed");
//    if(i==14)
// putvalue(DTC_Status_15_Env,"Fault Removed");
  }
  
else if (dtc_status[i]==0x50)
  {
      if(i==0)
 putvalue(DTC_Status_1_Env,"DTC Not Set");
    if(i==1)
 putvalue(DTC_Status_2_Env,"DTC Not Set");
    if(i==2)
 putvalue(DTC_Status_3_Env,"DTC Not Set");
    if(i==3)
 putvalue(DTC_Status_4_Env,"DTC Not Set");
    if(i==4)
 putvalue(DTC_Status_5_Env,"DTC Not Set");
    if(i==5)
 putvalue(DTC_Status_6_Env,"DTC Not Set");
    if(i==6)
 putvalue(DTC_Status_7_Env,"DTC Not Set");
    if(i==7)
 putvalue(DTC_Status_8_Env,"DTC Not Set");
    if(i==8)
 putvalue(DTC_Status_9_Env,"DTC Not Set");
    if(i==9)
 putvalue(DTC_Status_10_Env,"DTC Not Set");
    if(i==10)
 putvalue(DTC_Status_11_Env,"DTC Not Set");
    if(i==11)
 putvalue(DTC_Status_12_Env,"DTC Not Set");
    if(i==12)
 putvalue(DTC_Status_13_Env,"DTC Not Set");
    if(i==13)
 putvalue(DTC_Status_14_Env,"DTC Not Set");
//    if(i==14)
// putvalue(DTC_Status_15_Env,"DTC Not Set");
 
  } 
  else if (dtc_status[i]==0x28)
  {
      if(i==0)
 putvalue(DTC_Status_1_Env,"Pending DTC still Set");
    if(i==1)
 putvalue(DTC_Status_2_Env,"Pending DTC still Set");
    if(i==2)
 putvalue(DTC_Status_3_Env,"Pending DTC still Set");
    if(i==3)
 putvalue(DTC_Status_4_Env,"Pending DTC still Set");
    if(i==4)
 putvalue(DTC_Status_5_Env,"Pending DTC still Set");
    if(i==5)
 putvalue(DTC_Status_6_Env,"Pending DTC still Set");
    if(i==6)
 putvalue(DTC_Status_7_Env,"Pending DTC still Set");
    if(i==7)
 putvalue(DTC_Status_8_Env,"Pending DTC still Set");
    if(i==8)
 putvalue(DTC_Status_9_Env,"Pending DTC still Set");
    if(i==9)
 putvalue(DTC_Status_10_Env,"Pending DTC still Set");
    if(i==10)
 putvalue(DTC_Status_11_Env,"Pending DTC still Set");
    if(i==11)
 putvalue(DTC_Status_12_Env,"Pending DTC still Set");
    if(i==12)
 putvalue(DTC_Status_13_Env,"Pending DTC still Set");
    if(i==13)
 putvalue(DTC_Status_14_Env,"Pending DTC still Set");
  }
  else
  {
 if(i==0)
 putvalue(DTC_Status_1_Env,"DTC Not Set");
    if(i==1)
 putvalue(DTC_Status_2_Env,"DTC Not Set");
    if(i==2)
 putvalue(DTC_Status_3_Env,"DTC Not Set");
    if(i==3)
 putvalue(DTC_Status_4_Env,"DTC Not Set");
    if(i==4)
 putvalue(DTC_Status_5_Env,"DTC Not Set");
    if(i==5)
 putvalue(DTC_Status_6_Env,"DTC Not Set");
    if(i==6)
 putvalue(DTC_Status_7_Env,"DTC Not Set");
    if(i==7)
 putvalue(DTC_Status_8_Env,"DTC Not Set");
    if(i==8)
 putvalue(DTC_Status_9_Env,"DTC Not Set");
    if(i==9)
 putvalue(DTC_Status_10_Env,"DTC Not Set");
    if(i==10)
 putvalue(DTC_Status_11_Env,"DTC Not Set");
    if(i==11)
 putvalue(DTC_Status_12_Env,"DTC Not Set");
    if(i==12)
 putvalue(DTC_Status_13_Env,"DTC Not Set");
    if(i==13)
 putvalue(DTC_Status_14_Env,"DTC Not Set");

  }
  }
  for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
    dtc_status[row]=0;
  }
  dtc_flag=1;
}
     
  else if((a[0]==0x21)&&(dtc_flag==1))
  { 
    if(cont==1)
    length=mod+3;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
  
    }

    backup_status=a[1];
      i=2;
    
       for(row=0;row<16;row++)
  { 
    if(i>=64)
      break;

    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row+1]=a[i+3];
    i=i+4;
  }
  backup1=dtc[15][0];
  backup2=dtc[15][1];
putvalue(DTC_Number_16_Env,dtc[0]);
putvalue(DTC_Number_17_Env,dtc[1]);
putvalue(DTC_Number_18_Env,dtc[2]);
putvalue(DTC_Number_19_Env,dtc[3]);
putvalue(DTC_Number_20_Env,dtc[4]);
putvalue(DTC_Number_21_Env,dtc[5]);
putvalue(DTC_Number_22_Env,dtc[6]);
putvalue(DTC_Number_23_Env,dtc[7]);
putvalue(DTC_Number_24_Env,dtc[8]);
putvalue(DTC_Number_25_Env,dtc[9]);
putvalue(DTC_Number_26_Env,dtc[10]);
putvalue(DTC_Number_27_Env,dtc[11]);
putvalue(DTC_Number_28_Env,dtc[12]);
putvalue(DTC_Number_29_Env,dtc[13]);
putvalue(DTC_Number_30_Env,dtc[14]);
 
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
  
    }
  dtc_status[0]=backup_status;
   
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_15_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_16_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_17_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_18_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_19_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_20_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_21_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_22_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_23_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_24_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_25_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_26_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_27_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_28_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_29_Env,"DTC Active");
    
    if(i==15)
 putvalue(DTC_Status_30_Env,"DTC Active");
    
         }

else if (dtc_status[i]==0x2E)
  {
    
       if(i==0)
 putvalue(DTC_Status_15_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_16_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_17_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_18_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_19_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_20_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_21_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_22_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_23_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_24_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_25_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_26_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_27_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_28_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_29_Env,"Fault Removed");
    
    if(i==15)
 putvalue(DTC_Status_30_Env,"Fault Removed");
  }
  else if (dtc_status[i]==0x28)
  {
    
        if(i==0)
 putvalue(DTC_Status_15_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_16_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_17_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_18_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_19_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_20_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_21_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_22_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_23_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_24_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_25_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_26_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_27_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_28_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_29_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_30_Env,"Pending DTC still Set");
    
  }
else if (dtc_status[i]==0x50)
  {
     if(i==0)
 putvalue(DTC_Status_15_Env,"DTC Not set");
    
    if(i==1)
 putvalue(DTC_Status_16_Env,"DTC Not set");
    
    if(i==2)
 putvalue(DTC_Status_17_Env,"DTC Not set");
    
    if(i==3)
 putvalue(DTC_Status_18_Env,"DTC Not set");
    
    if(i==4)
 putvalue(DTC_Status_19_Env,"DTC Not set");
        
    if(i==5)
 putvalue(DTC_Status_20_Env,"DTC Not set");
    
    if(i==6)
 putvalue(DTC_Status_21_Env,"DTC Not set");
    
    if(i==7)
 putvalue(DTC_Status_22_Env,"DTC Not set");
   
    if(i==8)
 putvalue(DTC_Status_23_Env,"DTC Not set");
    
    if(i==9)
 putvalue(DTC_Status_24_Env,"DTC Not set");
    
    if(i==10)
 putvalue(DTC_Status_25_Env,"DTC Not set");
    
    if(i==11)
 putvalue(DTC_Status_26_Env,"DTC Not set");
    
    if(i==12)
 putvalue(DTC_Status_27_Env,"DTC Not set");
    
    if(i==13)
 putvalue(DTC_Status_28_Env,"DTC Not set");
    
    if(i==14)
 putvalue(DTC_Status_29_Env,"DTC Not set");
    
    if(i==15)
 putvalue(DTC_Status_30_Env,"DTC Not set");
  } 
  else
  {
           if(i==0)
 putvalue(DTC_Status_15_Env,"DTC Not set");
    
    if(i==1)
 putvalue(DTC_Status_16_Env,"DTC Not set");
    
    if(i==2)
 putvalue(DTC_Status_17_Env,"DTC Not set");
    
    if(i==3)
 putvalue(DTC_Status_18_Env,"DTC Not set");
    
    if(i==4)
 putvalue(DTC_Status_19_Env,"DTC Not set");
        
    if(i==5)
 putvalue(DTC_Status_20_Env,"DTC Not set");
    
    if(i==6)
 putvalue(DTC_Status_21_Env,"DTC Not set");
    
    if(i==7)
 putvalue(DTC_Status_22_Env,"DTC Not set");
   
    if(i==8)
 putvalue(DTC_Status_23_Env,"DTC Not set");
    
    if(i==9)
 putvalue(DTC_Status_24_Env,"DTC Not set");
    
    if(i==10)
 putvalue(DTC_Status_25_Env,"DTC Not set");
    
    if(i==11)
 putvalue(DTC_Status_26_Env,"DTC Not set");
    
    if(i==12)
 putvalue(DTC_Status_27_Env,"DTC Not set");
    
    if(i==13)
 putvalue(DTC_Status_28_Env,"DTC Not set");
    
    if(i==14)
 putvalue(DTC_Status_29_Env,"DTC Not set");
    
    if(i==15)
 putvalue(DTC_Status_30_Env,"DTC Not set");
  } 
  }
for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
  
  }
  else if((a[0]==0x22)&&(dtc_flag==1))
  {
if(cont==2)
    length=mod+4;
  else 
    length=63;
      
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
  
    }
    backup3=a[1];
    backup_status=a[2];

    
      i=3;
    
       for(row=1;row<16;row++)
  { 
    if(i==64)
      break;

    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row]=a[i+3];
    i=i+4;
  }
  dtc[0][0]=backup1;
  dtc[0][1]=backup2;
  dtc[0][2]=backup3;
  backup1=a[63];
  
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
  
    }
putvalue(DTC_Number_31_Env,dtc[0]);
putvalue(DTC_Number_32_Env,dtc[1]);
putvalue(DTC_Number_33_Env,dtc[2]);
putvalue(DTC_Number_34_Env,dtc[3]);
putvalue(DTC_Number_35_Env,dtc[4]);
putvalue(DTC_Number_36_Env,dtc[5]);
putvalue(DTC_Number_37_Env,dtc[6]);
putvalue(DTC_Number_38_Env,dtc[7]);
putvalue(DTC_Number_39_Env,dtc[8]);
putvalue(DTC_Number_40_Env,dtc[9]);
putvalue(DTC_Number_41_Env,dtc[10]);
putvalue(DTC_Number_42_Env,dtc[11]);
putvalue(DTC_Number_43_Env,dtc[12]);
putvalue(DTC_Number_44_Env,dtc[13]);
putvalue(DTC_Number_45_Env,dtc[14]);
putvalue(DTC_Number_46_Env,dtc[15]);
  dtc_status[0]=backup_status;
    
    for(i=0;i<16;i++)
    //write("dtc_status 22[%d]=%x\n",i,dtc_status[i]);
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_31_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_32_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_33_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_34_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_35_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_36_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_37_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_38_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_39_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_40_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_41_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_42_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_43_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_44_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_45_Env,"DTC Active");
    
    if(i==15)
 putvalue(DTC_Status_46_Env,"DTC Active");
     }

else if (dtc_status[i]==0x2E)
  {
    if(i==0)
 putvalue(DTC_Status_31_Env,"Fault Removed");
    if(i==1)
 putvalue(DTC_Status_32_Env,"Fault Removed");
    if(i==2)
 putvalue(DTC_Status_33_Env,"Fault Removed");
    if(i==3)
 putvalue(DTC_Status_34_Env,"Fault Removed");
    if(i==4)
 putvalue(DTC_Status_35_Env,"Fault Removed");
    if(i==5)
 putvalue(DTC_Status_36_Env,"Fault Removed");
    if(i==6)
 putvalue(DTC_Status_37_Env,"Fault Removed");
    if(i==7)
 putvalue(DTC_Status_38_Env,"Fault Removed");
    if(i==8)
 putvalue(DTC_Status_39_Env,"Fault Removed");
    if(i==9)
 putvalue(DTC_Status_40_Env,"Fault Removed");
    if(i==10)
 putvalue(DTC_Status_41_Env,"Fault Removed");
    if(i==11)
 putvalue(DTC_Status_42_Env,"Fault Removed");
    if(i==12)
 putvalue(DTC_Status_43_Env,"Fault Removed");
    if(i==13)
 putvalue(DTC_Status_44_Env,"Fault Removed");
    if(i==14)
 putvalue(DTC_Status_45_Env,"Fault Removed");
    if(i==15)
 putvalue(DTC_Status_46_Env,"Fault Removed");
  }
  else if(dtc_status[i]==0x28)
  {
            if(i==0)
 putvalue(DTC_Status_31_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_32_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_33_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_34_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_35_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_36_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_37_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_38_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_39_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_40_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_41_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_42_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_43_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_44_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_45_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_46_Env,"Pending DTC still Set");
  }
else if (dtc_status[i]==0x50)
  {
      if(i==0)
 putvalue(DTC_Status_31_Env,"DTC Not Set");
    if(i==1)
 putvalue(DTC_Status_32_Env,"DTC Not Set");
    if(i==2)
 putvalue(DTC_Status_33_Env,"DTC Not Set");
    if(i==3)
 putvalue(DTC_Status_34_Env,"DTC Not Set");
    if(i==4)
 putvalue(DTC_Status_35_Env,"DTC Not Set");
    if(i==5)
 putvalue(DTC_Status_36_Env,"DTC Not Set");
    if(i==6)
 putvalue(DTC_Status_37_Env,"DTC Not Set");
    if(i==7)
 putvalue(DTC_Status_38_Env,"DTC Not Set");
    if(i==8)
 putvalue(DTC_Status_39_Env,"DTC Not Set");
    if(i==9)
 putvalue(DTC_Status_40_Env,"DTC Not Set");
    if(i==10)
 putvalue(DTC_Status_41_Env,"DTC Not Set");
    if(i==11)
 putvalue(DTC_Status_42_Env,"DTC Not Set");
    if(i==12)
 putvalue(DTC_Status_43_Env,"DTC Not Set");
    if(i==13)
 putvalue(DTC_Status_44_Env,"DTC Not Set");
    if(i==14)
 putvalue(DTC_Status_45_Env,"DTC Not Set");
 if(i==15)
 putvalue(DTC_Status_46_Env,"DTC Not set");
  } 
  else
  {
 if(i==0)
 putvalue(DTC_Status_31_Env,"DTC Not Set");
    if(i==1)
 putvalue(DTC_Status_32_Env,"DTC Not Set");
    if(i==2)
 putvalue(DTC_Status_33_Env,"DTC Not Set");
    if(i==3)
 putvalue(DTC_Status_34_Env,"DTC Not Set");
    if(i==4)
 putvalue(DTC_Status_35_Env,"DTC Not Set");
    if(i==5)
 putvalue(DTC_Status_36_Env,"DTC Not Set");
    if(i==6)
 putvalue(DTC_Status_37_Env,"DTC Not Set");
    if(i==7)
 putvalue(DTC_Status_38_Env,"DTC Not Set");
    if(i==8)
 putvalue(DTC_Status_39_Env,"DTC Not Set");
    if(i==9)
 putvalue(DTC_Status_40_Env,"DTC Not Set");
    if(i==10)
 putvalue(DTC_Status_41_Env,"DTC Not Set");
    if(i==11)
 putvalue(DTC_Status_42_Env,"DTC Not Set");
    if(i==12)
 putvalue(DTC_Status_43_Env,"DTC Not Set");
    if(i==13)
 putvalue(DTC_Status_44_Env,"DTC Not Set");
    if(i==14)
 putvalue(DTC_Status_45_Env,"DTC Not Set");
 if(i==15)
 putvalue(DTC_Status_46_Env,"DTC Not set");
  } 
  }
  for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
  
  }
  
  else if((a[0]==0x23)&&(dtc_flag==1))
  {
     if(cont==3)
    length=mod+5;
  else 
    length=63;
    
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
  
    }
    backup2=a[1];
    backup3=a[2];
    backup_status=a[3];

    
      i=4;
    
       for(row=1;row<16;row++)
  { 
    if(i==64)
      break;

    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row]=a[i+3];
    i=i+4;
    
  }
  dtc[0][0]=backup1;
  dtc[0][1]=backup2;
  dtc[0][2]=backup3;
 dtc_status[0]=backup_status;
  
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
  
    }
putvalue(DTC_Number_47_Env,dtc[0]);
putvalue(DTC_Number_48_Env,dtc[1]);
putvalue(DTC_Number_49_Env,dtc[2]);
putvalue(DTC_Number_50_Env,dtc[3]);
putvalue(DTC_Number_51_Env,dtc[4]);
putvalue(DTC_Number_52_Env,dtc[5]);
putvalue(DTC_Number_53_Env,dtc[6]);
putvalue(DTC_Number_54_Env,dtc[7]);
putvalue(DTC_Number_55_Env,dtc[8]);
putvalue(DTC_Number_56_Env,dtc[9]);
putvalue(DTC_Number_57_Env,dtc[10]);
putvalue(DTC_Number_58_Env,dtc[11]);
putvalue(DTC_Number_59_Env,dtc[12]);
putvalue(DTC_Number_60_Env,dtc[13]);
putvalue(DTC_Number_61_Env,dtc[14]);
putvalue(DTC_Number_62_Env,dtc[15]);
  dtc_status[0]=backup_status;
    for(i=0;i<16;i++)
    //write("dtc_status23[%d]=%x\n",i,dtc_status[i]);
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_47_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_48_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_49_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_50_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_51_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_52_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_53_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_54_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_55_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_56_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_57_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_58_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_59_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_60_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_61_Env,"DTC Active");
    if(i==15)
 putvalue(DTC_Status_62_Env,"DTC Active");
   
     }

else if (dtc_status[i]==0x2E)
  {
        if(i==0)
 putvalue(DTC_Status_47_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_48_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_49_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_50_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_51_Env,"Fault Removed");
        
    if(i==5)
 putvalue(DTC_Status_52_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_53_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_54_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_55_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_56_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_57_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_58_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_59_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_60_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_61_Env,"Fault Removed");
    
    if(i==15)
 putvalue(DTC_Status_62_Env,"Fault Removed");
  }
  else if (dtc_status[i]==0x28)
  {
     if(i==0)
 putvalue(DTC_Status_47_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_48_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_49_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_50_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_51_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_52_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_53_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_54_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_55_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_56_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_57_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_58_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_59_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_60_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_61_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_62_Env,"Pending DTC still Set");
  }
  
else if (dtc_status[i]==0x50)
  {
             if(i==0)
 putvalue(DTC_Status_47_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_48_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_49_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_50_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_51_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_52_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_53_Env,"DTC Not Set");
    
    if(i==7)
 putvalue(DTC_Status_54_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_55_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_56_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_57_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_58_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_59_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_60_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_61_Env,"DTC Not Set");
    
    if(i==15)
 putvalue(DTC_Status_62_Env,"DTC Not Set");
  } 
  else
  {
                  if(i==0)
 putvalue(DTC_Status_47_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_48_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_49_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_50_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_51_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_52_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_53_Env,"DTC Not Set");
    
    if(i==7)
 putvalue(DTC_Status_54_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_55_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_56_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_57_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_58_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_59_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_60_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_61_Env,"DTC Not Set");
    
    if(i==15)
 putvalue(DTC_Status_62_Env,"DTC Not Set");
  } 
  }
  for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }

  }
  
   else if((a[0]==0x24)&&(dtc_flag==1))
  {
     if(cont==4)
    length=mod+6;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
  
    }
       
      i=1;
    
       for(row=0;row<16;row++)
  { 
    if(i==64)
      break;

    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row]=a[i+3];
    i=i+4;
    
  }
 
  
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
  
    }
putvalue(DTC_Number_63_Env,dtc[0]);
putvalue(DTC_Number_64_Env,dtc[1]);
putvalue(DTC_Number_65_Env,dtc[2]);
putvalue(DTC_Number_66_Env,dtc[3]);
putvalue(DTC_Number_67_Env,dtc[4]);
putvalue(DTC_Number_68_Env,dtc[5]);
putvalue(DTC_Number_69_Env,dtc[6]);
putvalue(DTC_Number_70_Env,dtc[7]);
putvalue(DTC_Number_71_Env,dtc[8]);
putvalue(DTC_Number_72_Env,dtc[9]);
putvalue(DTC_Number_73_Env,dtc[10]);
putvalue(DTC_Number_74_Env,dtc[11]);
putvalue(DTC_Number_75_Env,dtc[12]);
putvalue(DTC_Number_76_Env,dtc[13]);
putvalue(DTC_Number_77_Env,dtc[14]);
putvalue(DTC_Number_78_Env,dtc[15]);
  
    for(i=0;i<15;i++)
    //write("dtc_status24[%d]=%x\n",i,dtc_status[i]);
  for(i=0;i<15;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_63_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_64_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_65_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_66_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_67_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_68_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_69_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_70_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_71_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_72_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_73_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_74_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_75_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_76_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_77_Env,"DTC Active");
    
   
     }

else if (dtc_status[i]==0x2E)
  {
        if(i==0)
 putvalue(DTC_Status_63_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_64_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_65_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_66_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_67_Env,"Fault Removed");
        
    if(i==5)
 putvalue(DTC_Status_68_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_69_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_70_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_71_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_72_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_73_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_74_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_75_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_76_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_77_Env,"Fault Removed");
    
    
  }
  else if (dtc_status[i]==0x28)
  {
     if(i==0)
 putvalue(DTC_Status_63_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_64_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_65_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_66_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_67_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_68_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_69_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_70_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_71_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_72_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_73_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_74_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_75_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_76_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_77_Env,"Pending DTC still Set");
    
      }
  
else if (dtc_status[i]==0x50)
  {
             if(i==0)
 putvalue(DTC_Status_63_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_64_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_65_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_66_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_67_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_68_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_69_Env,"DTC Not Set");
    
    if(i==7)
 putvalue(DTC_Status_70_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_71_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_72_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_73_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_74_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_75_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_76_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_77_Env,"DTC Not Set");
    
     } 
  else
  {
                           if(i==0)
 putvalue(DTC_Status_63_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_64_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_65_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_66_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_67_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_68_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_69_Env,"DTC Not Set");
    
    if(i==7)
 putvalue(DTC_Status_70_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_71_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_72_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_73_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_74_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_75_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_76_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_77_Env,"DTC Not Set");
  } 
  }
  for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
  
  }
 
  else if((a[0]==0x25)&&(dtc_flag==1))
  {
if(cont==5)
    length=mod+7;
  else 
    length=63;
      
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
  
    }

    backup_status=a[1];
      i=2;
    
       for(row=0;row<16;row++)
  { 
    if(i==64)
      break;

    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row+1]=a[i+3];
    i=i+4;
  }
  backup1=dtc[15][0];
  backup2=dtc[15][1];
putvalue(DTC_Number_79_Env,dtc[0]);
putvalue(DTC_Number_80_Env,dtc[1]);
putvalue(DTC_Number_81_Env,dtc[2]);
putvalue(DTC_Number_82_Env,dtc[3]);
putvalue(DTC_Number_83_Env,dtc[4]);
putvalue(DTC_Number_84_Env,dtc[5]);
putvalue(DTC_Number_85_Env,dtc[6]);
putvalue(DTC_Number_86_Env,dtc[7]);
putvalue(DTC_Number_87_Env,dtc[8]);
putvalue(DTC_Number_88_Env,dtc[9]);
putvalue(DTC_Number_89_Env,dtc[10]);
putvalue(DTC_Number_90_Env,dtc[11]);
putvalue(DTC_Number_91_Env,dtc[12]);
putvalue(DTC_Number_92_Env,dtc[13]);
putvalue(DTC_Number_93_Env,dtc[14]);
 
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
  
    }
  dtc_status[0]=backup_status;
    for(i=0;i<16;i++)
    //write("dtc_status 25[%d]=%x\n",i,dtc_status[i]);
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_78_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_79_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_80_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_81_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_82_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_83_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_84_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_85_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_86_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_87_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_88_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_89_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_90_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_91_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_92_Env,"DTC Active");
    
    if(i==15)
 putvalue(DTC_Status_93_Env,"DTC Active");
    
         }

else if (dtc_status[i]==0x2E)
  {
    
       if(i==0)
 putvalue(DTC_Status_78_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_79_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_80_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_81_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_82_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_83_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_84_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_85_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_86_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_87_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_88_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_89_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_90_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_91_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_92_Env,"Fault Removed");
    
    if(i==15)
 putvalue(DTC_Status_93_Env,"Fault Removed");
  }
  else if (dtc_status[i]==0x28)
  {
    
        if(i==0)
 putvalue(DTC_Status_78_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_79_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_80_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_81_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_82_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_83_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_84_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_85_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_86_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_87_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_88_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_89_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_90_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_91_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_92_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_93_Env,"Pending DTC still Set");
    
  }
else if (dtc_status[i]==0x50)
  {
     if(i==0)
 putvalue(DTC_Status_78_Env,"DTC Not set");
    
    if(i==1)
 putvalue(DTC_Status_79_Env,"DTC Not set");
    
    if(i==2)
 putvalue(DTC_Status_80_Env,"DTC Not set");
    
    if(i==3)
 putvalue(DTC_Status_81_Env,"DTC Not set");
    
    if(i==4)
 putvalue(DTC_Status_82_Env,"DTC Not set");
        
    if(i==5)
 putvalue(DTC_Status_83_Env,"DTC Not set");
    
    if(i==6)
 putvalue(DTC_Status_84_Env,"DTC Not set");
    
    if(i==7)
 putvalue(DTC_Status_85_Env,"DTC Not set");
   
    if(i==8)
 putvalue(DTC_Status_86_Env,"DTC Not set");
    
    if(i==9)
 putvalue(DTC_Status_87_Env,"DTC Not set");
    
    if(i==10)
 putvalue(DTC_Status_88_Env,"DTC Not set");
    
    if(i==11)
 putvalue(DTC_Status_89_Env,"DTC Not set");
    
    if(i==12)
 putvalue(DTC_Status_90_Env,"DTC Not set");
    
    if(i==13)
 putvalue(DTC_Status_91_Env,"DTC Not set");
    
    if(i==14)
 putvalue(DTC_Status_92_Env,"DTC Not set");
    
    if(i==15)
 putvalue(DTC_Status_93_Env,"DTC Not set");
  } 
  else
  {
            if(i==0)
 putvalue(DTC_Status_78_Env,"DTC Not set");
    
    if(i==1)
 putvalue(DTC_Status_79_Env,"DTC Not set");
    
    if(i==2)
 putvalue(DTC_Status_80_Env,"DTC Not set");
    
    if(i==3)
 putvalue(DTC_Status_81_Env,"DTC Not set");
    
    if(i==4)
 putvalue(DTC_Status_82_Env,"DTC Not set");
        
    if(i==5)
 putvalue(DTC_Status_83_Env,"DTC Not set");
    
    if(i==6)
 putvalue(DTC_Status_84_Env,"DTC Not set");
    
    if(i==7)
 putvalue(DTC_Status_85_Env,"DTC Not set");
   
    if(i==8)
 putvalue(DTC_Status_86_Env,"DTC Not set");
    
    if(i==9)
 putvalue(DTC_Status_87_Env,"DTC Not set");
    
    if(i==10)
 putvalue(DTC_Status_88_Env,"DTC Not set");
    
    if(i==11)
 putvalue(DTC_Status_89_Env,"DTC Not set");
    
    if(i==12)
 putvalue(DTC_Status_90_Env,"DTC Not set");
    
    if(i==13)
 putvalue(DTC_Status_91_Env,"DTC Not set");
    
    if(i==14)
 putvalue(DTC_Status_92_Env,"DTC Not set");
    
    if(i==15)
 putvalue(DTC_Status_93_Env,"DTC Not set");
  } 
  }
for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
    dtc_status[i]=0;
  }
  }
 
    else if((a[0]==0x26)&&(dtc_flag==1))
  {   
    if(cont==6)
    length=mod+8;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
    }
    backup3=a[1];
    backup_status=a[2];   
      i=3;  
       for(row=1;row<16;row++)
  { 
    if(i==64)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
  dtc_status[row]=a[i+3];
    i=i+4;
  }
  dtc[0][0]=backup1;
  dtc[0][1]=backup2;
  dtc[0][2]=backup3;
  backup1=a[63];
  
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
      }
putvalue(DTC_Number_94_Env,dtc[0]);
putvalue(DTC_Number_95_Env,dtc[1]);
putvalue(DTC_Number_96_Env,dtc[2]);
putvalue(DTC_Number_97_Env,dtc[3]);
putvalue(DTC_Number_98_Env,dtc[4]);
putvalue(DTC_Number_99_Env,dtc[5]);
putvalue(DTC_Number_100_Env,dtc[6]);
putvalue(DTC_Number_101_Env,dtc[7]);
putvalue(DTC_Number_102_Env,dtc[8]);
putvalue(DTC_Number_103_Env,dtc[9]);
putvalue(DTC_Number_104_Env,dtc[10]);
putvalue(DTC_Number_105_Env,dtc[11]);
putvalue(DTC_Number_106_Env,dtc[12]);
putvalue(DTC_Number_107_Env,dtc[13]);
putvalue(DTC_Number_108_Env,dtc[14]);
putvalue(DTC_Number_109_Env,dtc[15]);
  dtc_status[0]=backup_status;
    
    for(i=0;i<16;i++)
   // write("dtc_status 26[%d]=%x\n",i,dtc_status[i]);
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_94_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_95_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_96_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_97_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_98_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_99_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_100_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_101_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_102_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_103_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_104_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_105_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_106_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_107_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_108_Env,"DTC Active");
    
    if(i==15)
 putvalue(DTC_Status_109_Env,"DTC Active");
     }

else if (dtc_status[i]==0x2E)
  {
    if(i==0)
 putvalue(DTC_Status_94_Env,"Fault Removed");
    if(i==1)
 putvalue(DTC_Status_95_Env,"Fault Removed");
    if(i==2)
 putvalue(DTC_Status_96_Env,"Fault Removed");
    if(i==3)
 putvalue(DTC_Status_97_Env,"Fault Removed");
    if(i==4)
 putvalue(DTC_Status_98_Env,"Fault Removed");
    if(i==5)
 putvalue(DTC_Status_99_Env,"Fault Removed");
    if(i==6)
 putvalue(DTC_Status_100_Env,"Fault Removed");
    if(i==7)
 putvalue(DTC_Status_101_Env,"Fault Removed");
    if(i==8)
 putvalue(DTC_Status_102_Env,"Fault Removed");
    if(i==9)
 putvalue(DTC_Status_103_Env,"Fault Removed");
    if(i==10)
 putvalue(DTC_Status_104_Env,"Fault Removed");
    if(i==11)
 putvalue(DTC_Status_105_Env,"Fault Removed");
    if(i==12)
 putvalue(DTC_Status_106_Env,"Fault Removed");
    if(i==13)
 putvalue(DTC_Status_107_Env,"Fault Removed");
    if(i==14)
 putvalue(DTC_Status_108_Env,"Fault Removed");
    if(i==15)
 putvalue(DTC_Status_109_Env,"Fault Removed");
  }
  else if(dtc_status[i]==0x28)
  {
            if(i==0)
 putvalue(DTC_Status_94_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_95_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_96_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_97_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_98_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_99_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_100_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_101_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_102_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_103_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_104_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_105_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_106_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_107_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_108_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_109_Env,"Pending DTC still Set");
  }
else if (dtc_status[i]==0x50)
  {
      if(i==0)
 putvalue(DTC_Status_94_Env,"DTC Not Set");
    if(i==1)
 putvalue(DTC_Status_95_Env,"DTC Not Set");
    if(i==2)
 putvalue(DTC_Status_96_Env,"DTC Not Set");
    if(i==3)
 putvalue(DTC_Status_97_Env,"DTC Not Set");
    if(i==4)
 putvalue(DTC_Status_98_Env,"DTC Not Set");
    if(i==5)
 putvalue(DTC_Status_99_Env,"DTC Not Set");
    if(i==6)
 putvalue(DTC_Status_100_Env,"DTC Not Set");
    if(i==7)
 putvalue(DTC_Status_101_Env,"DTC Not Set");
    if(i==8)
 putvalue(DTC_Status_102_Env,"DTC Not Set");
    if(i==9)
 putvalue(DTC_Status_103_Env,"DTC Not Set");
    if(i==10)
 putvalue(DTC_Status_104_Env,"DTC Not Set");
    if(i==11)
 putvalue(DTC_Status_105_Env,"DTC Not Set");
    if(i==12)
 putvalue(DTC_Status_106_Env,"DTC Not Set");
    if(i==13)
 putvalue(DTC_Status_107_Env,"DTC Not Set");
    if(i==14)
 putvalue(DTC_Status_108_Env,"DTC Not Set");
 if(i==15)
 putvalue(DTC_Status_109_Env,"DTC Not set");
  } 
  else
  {
     if(i==0)
 putvalue(DTC_Status_94_Env,"DTC Not Set");
    if(i==1)
 putvalue(DTC_Status_95_Env,"DTC Not Set");
    if(i==2)
 putvalue(DTC_Status_96_Env,"DTC Not Set");
    if(i==3)
 putvalue(DTC_Status_97_Env,"DTC Not Set");
    if(i==4)
 putvalue(DTC_Status_98_Env,"DTC Not Set");
    if(i==5)
 putvalue(DTC_Status_99_Env,"DTC Not Set");
    if(i==6)
 putvalue(DTC_Status_100_Env,"DTC Not Set");
    if(i==7)
 putvalue(DTC_Status_101_Env,"DTC Not Set");
    if(i==8)
 putvalue(DTC_Status_102_Env,"DTC Not Set");
    if(i==9)
 putvalue(DTC_Status_103_Env,"DTC Not Set");
    if(i==10)
 putvalue(DTC_Status_104_Env,"DTC Not Set");
    if(i==11)
 putvalue(DTC_Status_105_Env,"DTC Not Set");
    if(i==12)
 putvalue(DTC_Status_106_Env,"DTC Not Set");
    if(i==13)
 putvalue(DTC_Status_107_Env,"DTC Not Set");
    if(i==14)
 putvalue(DTC_Status_108_Env,"DTC Not Set");
 if(i==15)
 putvalue(DTC_Status_109_Env,"DTC Not set");
  } 
  }
  for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
  
  }
 else if((a[0]==0x27)&&(dtc_flag==1))
  {
    if(cont==7)
    length=mod+9;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
      }
    backup2=a[1];
    backup3=a[2];
    backup_status=a[3];
      i=4;
for(row=1;row<16;row++)
  { 
    if(i==64)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row]=a[i+3];
    i=i+4;  
  }
  dtc[0][0]=backup1;
  dtc[0][1]=backup2;
  dtc[0][2]=backup3;
 dtc_status[0]=backup_status;
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
      }
putvalue(DTC_Number_110_Env,dtc[0]);
putvalue(DTC_Number_111_Env,dtc[1]);
putvalue(DTC_Number_112_Env,dtc[2]);
putvalue(DTC_Number_113_Env,dtc[3]);
putvalue(DTC_Number_114_Env,dtc[4]);
putvalue(DTC_Number_115_Env,dtc[5]);
putvalue(DTC_Number_116_Env,dtc[6]);
putvalue(DTC_Number_117_Env,dtc[7]);
putvalue(DTC_Number_118_Env,dtc[8]);
putvalue(DTC_Number_119_Env,dtc[9]);
putvalue(DTC_Number_120_Env,dtc[10]);
putvalue(DTC_Number_121_Env,dtc[11]);
putvalue(DTC_Number_122_Env,dtc[12]);
putvalue(DTC_Number_123_Env,dtc[13]);
putvalue(DTC_Number_124_Env,dtc[14]);
putvalue(DTC_Number_125_Env,dtc[15]);
  dtc_status[0]=backup_status;
    for(i=0;i<16;i++)
    //write("dtc_status27[%d]=%x\n",i,dtc_status[i]);
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_110_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_111_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_112_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_113_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_114_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_115_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_116_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_117_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_118_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_119_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_120_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_121_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_122_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_123_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_124_Env,"DTC Active");
    if(i==15)
 putvalue(DTC_Status_125_Env,"DTC Active");
   
     }

else if (dtc_status[i]==0x2E)
  {
        if(i==0)
 putvalue(DTC_Status_110_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_111_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_112_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_113_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_114_Env,"Fault Removed");
        
    if(i==5)
 putvalue(DTC_Status_115_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_116_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_117_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_118_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_119_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_120_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_121_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_122_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_123_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_124_Env,"Fault Removed");
    
    if(i==15)
 putvalue(DTC_Status_125_Env,"Fault Removed");
  }
  else if (dtc_status[i]==0x28)
  {
     if(i==0)
 putvalue(DTC_Status_110_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_111_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_112_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_113_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_114_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_115_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_116_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_117_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_118_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_119_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_120_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_121_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_122_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_123_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_124_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_125_Env,"Pending DTC still Set");
  }
  
else if (dtc_status[i]==0x50)
  {
             if(i==0)
 putvalue(DTC_Status_110_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_111_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_112_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_113_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_114_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_115_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_116_Env,"DTC Not Set");
    
    if(i==7)
 putvalue(DTC_Status_117_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_118_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_119_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_120_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_121_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_122_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_123_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_124_Env,"DTC Not Set");
    
    if(i==15)
 putvalue(DTC_Status_125_Env,"DTC Not Set");
  } 
  else
  {
          if(i==0)
 putvalue(DTC_Status_110_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_111_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_112_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_113_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_114_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_115_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_116_Env,"DTC Not Set");
    
    if(i==7)
 putvalue(DTC_Status_117_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_118_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_119_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_120_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_121_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_122_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_123_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_124_Env,"DTC Not Set");
    
    if(i==15)
 putvalue(DTC_Status_125_Env,"DTC Not Set");
  }
  for(row=0;row<16;row++)
  { 
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
  
  }
}

   else if((a[0]==0x28)&&(dtc_flag==1))
  { 
    if(cont==8)
    length=mod+10;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
      }    
      i=1;
       for(row=0;row<16;row++)
  { 
    if(i==64)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row]=a[i+3];
    i=i+4;
    }
 for(i=0;i<=63;i++)
    { 
      a[i]=0;
     }
putvalue(DTC_Number_126_Env,dtc[0]);
putvalue(DTC_Number_127_Env,dtc[1]);
putvalue(DTC_Number_128_Env,dtc[2]);
putvalue(DTC_Number_129_Env,dtc[3]);
putvalue(DTC_Number_130_Env,dtc[4]);
putvalue(DTC_Number_131_Env,dtc[5]);
putvalue(DTC_Number_132_Env,dtc[6]);
putvalue(DTC_Number_133_Env,dtc[7]);
putvalue(DTC_Number_134_Env,dtc[8]);
putvalue(DTC_Number_135_Env,dtc[9]);
putvalue(DTC_Number_136_Env,dtc[10]);
putvalue(DTC_Number_137_Env,dtc[11]);
putvalue(DTC_Number_138_Env,dtc[12]);
putvalue(DTC_Number_139_Env,dtc[13]);
putvalue(DTC_Number_140_Env,dtc[14]);
putvalue(DTC_Number_141_Env,dtc[15]);
  
    for(i=0;i<15;i++)
    //write("dtc_status28[%d]=%x\n",i,dtc_status[i]);
  for(i=0;i<15;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_126_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_127_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_128_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_129_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_130_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_131_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_132_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_133_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_134_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_135_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_136_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_137_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_138_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_139_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_140_Env,"DTC Active");
  }

else if (dtc_status[i]==0x2E)
  {
        if(i==0)
 putvalue(DTC_Status_126_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_127_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_128_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_129_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_130_Env,"Fault Removed");
        
    if(i==5)
 putvalue(DTC_Status_131_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_132_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_133_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_134_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_135_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_136_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_137_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_138_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_139_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_140_Env,"Fault Removed");
    
    
  }
  else if (dtc_status[i]==0x28)
  {
     if(i==0)
 putvalue(DTC_Status_126_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_127_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_128_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_129_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_130_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_131_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_132_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_133_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_134_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_135_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_136_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_137_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_138_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_139_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_140_Env,"Pending DTC still Set");
    
      }
  
else if (dtc_status[i]==0x50)
  {
             if(i==0)
 putvalue(DTC_Status_126_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_127_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_128_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_129_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_130_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_131_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_132_Env,"DTC Not Set");
    
    if(i==7)
 putvalue(DTC_Status_133_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_134_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_135_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_136_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_137_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_138_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_139_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_140_Env,"DTC Not Set");
    
     } 
  else
  {
             if(i==0)
 putvalue(DTC_Status_126_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_127_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_128_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_129_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_130_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_131_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_132_Env,"DTC Not Set");
    
    if(i==7)
 putvalue(DTC_Status_133_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_134_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_135_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_136_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_137_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_138_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_139_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_140_Env,"DTC Not Set");
  }
  for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
  
  }
}

  else if((a[0]==0x29)&&(dtc_flag==1))
  {    
    if(cont==9)
    length=mod+11;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
      }
    backup_status=a[1];
     i=2;
  for(row=0;row<16;row++)
  { 
    if(i==64)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row+1]=a[i+3];
    i=i+4;
  }
  backup1=dtc[15][0];
  backup2=dtc[15][1];
putvalue(DTC_Number_142_Env,dtc[0]);
putvalue(DTC_Number_143_Env,dtc[1]);
putvalue(DTC_Number_144_Env,dtc[2]);
putvalue(DTC_Number_145_Env,dtc[3]);
putvalue(DTC_Number_146_Env,dtc[4]);
putvalue(DTC_Number_147_Env,dtc[5]);
putvalue(DTC_Number_148_Env,dtc[6]);
putvalue(DTC_Number_149_Env,dtc[7]);
putvalue(DTC_Number_150_Env,dtc[8]);
putvalue(DTC_Number_151_Env,dtc[9]);
putvalue(DTC_Number_152_Env,dtc[10]);
putvalue(DTC_Number_153_Env,dtc[11]);
putvalue(DTC_Number_154_Env,dtc[12]);
putvalue(DTC_Number_155_Env,dtc[13]);
putvalue(DTC_Number_156_Env,dtc[14]);
 
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
      }
  dtc_status[0]=backup_status;
    for(i=0;i<16;i++)
    //write("dtc_status 29[%d]=%x\n",i,dtc_status[i]);
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_141_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_142_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_143_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_144_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_145_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_146_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_147_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_148_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_149_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_150_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_151_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_152_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_153_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_154_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_155_Env,"DTC Active");
    
    if(i==15)
 putvalue(DTC_Status_156_Env,"DTC Active");
    
         }

else if (dtc_status[i]==0x2E)
  {
      if(i==0)
 putvalue(DTC_Status_141_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_142_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_143_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_144_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_145_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_146_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_147_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_148_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_149_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_150_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_151_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_152_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_153_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_154_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_155_Env,"Fault Removed");
    
    if(i==15)
 putvalue(DTC_Status_156_Env,"Fault Removed");
  }
  else if (dtc_status[i]==0x28)
  {
    
        if(i==0)
 putvalue(DTC_Status_141_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_142_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_143_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_144_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_145_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_146_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_147_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_148_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_149_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_150_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_151_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_152_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_153_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_154_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_155_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_156_Env,"Pending DTC still Set");
    
  }
else if (dtc_status[i]==0x50)
  {
     if(i==0)
 putvalue(DTC_Status_141_Env,"DTC Not set");
    
    if(i==1)
 putvalue(DTC_Status_142_Env,"DTC Not set");
    
    if(i==2)
 putvalue(DTC_Status_143_Env,"DTC Not set");
    
    if(i==3)
 putvalue(DTC_Status_144_Env,"DTC Not set");
    
    if(i==4)
 putvalue(DTC_Status_145_Env,"DTC Not set");
        
    if(i==5)
 putvalue(DTC_Status_146_Env,"DTC Not set");
    
    if(i==6)
 putvalue(DTC_Status_147_Env,"DTC Not set");
    
    if(i==7)
 putvalue(DTC_Status_148_Env,"DTC Not set");
   
    if(i==8)
 putvalue(DTC_Status_149_Env,"DTC Not set");
    
    if(i==9)
 putvalue(DTC_Status_150_Env,"DTC Not set");
    
    if(i==10)
 putvalue(DTC_Status_151_Env,"DTC Not set");
    
    if(i==11)
 putvalue(DTC_Status_152_Env,"DTC Not set");
    
    if(i==12)
 putvalue(DTC_Status_153_Env,"DTC Not set");
    
    if(i==13)
 putvalue(DTC_Status_154_Env,"DTC Not set");
    
    if(i==14)
 putvalue(DTC_Status_155_Env,"DTC Not set");
    
    if(i==15)
 putvalue(DTC_Status_156_Env,"DTC Not set");
  } 
  else
  {
 if(i==0)
 putvalue(DTC_Status_141_Env,"DTC Not set");
    
    if(i==1)
 putvalue(DTC_Status_142_Env,"DTC Not set");
    
    if(i==2)
 putvalue(DTC_Status_143_Env,"DTC Not set");
    
    if(i==3)
 putvalue(DTC_Status_144_Env,"DTC Not set");
    
    if(i==4)
 putvalue(DTC_Status_145_Env,"DTC Not set");
        
    if(i==5)
 putvalue(DTC_Status_146_Env,"DTC Not set");
    
    if(i==6)
 putvalue(DTC_Status_147_Env,"DTC Not set");
    
    if(i==7)
 putvalue(DTC_Status_148_Env,"DTC Not set");
   
    if(i==8)
 putvalue(DTC_Status_149_Env,"DTC Not set");
    
    if(i==9)
 putvalue(DTC_Status_150_Env,"DTC Not set");
    
    if(i==10)
 putvalue(DTC_Status_151_Env,"DTC Not set");
    
    if(i==11)
 putvalue(DTC_Status_152_Env,"DTC Not set");
    
    if(i==12)
 putvalue(DTC_Status_153_Env,"DTC Not set");
    
    if(i==13)
 putvalue(DTC_Status_154_Env,"DTC Not set");
    
    if(i==14)
 putvalue(DTC_Status_155_Env,"DTC Not set");
    
    if(i==15)
 putvalue(DTC_Status_156_Env,"DTC Not set");
  } 
  }
for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
    dtc_status[i]=0;
  }
  }
      else if((a[0]==0x2A)&&(dtc_flag==1))
  {   
    if(cont==10)
    length=mod+12;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
    }
    backup3=a[1];
    backup_status=a[2];   
      i=3;  
       for(row=1;row<16;row++)
  { 
    if(i==64)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
  dtc_status[row]=a[i+3];
    i=i+4;
  }
  dtc[0][0]=backup1;
  dtc[0][1]=backup2;
  dtc[0][2]=backup3;
  backup1=a[63];
  
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
      }
putvalue(DTC_Number_157_Env,dtc[0]);
putvalue(DTC_Number_158_Env,dtc[1]);
putvalue(DTC_Number_159_Env,dtc[2]);
putvalue(DTC_Number_160_Env,dtc[3]);
putvalue(DTC_Number_161_Env,dtc[4]);
putvalue(DTC_Number_162_Env,dtc[5]);
putvalue(DTC_Number_163_Env,dtc[6]);
putvalue(DTC_Number_164_Env,dtc[7]);
putvalue(DTC_Number_165_Env,dtc[8]);
putvalue(DTC_Number_166_Env,dtc[9]);
putvalue(DTC_Number_167_Env,dtc[10]);
putvalue(DTC_Number_168_Env,dtc[11]);
putvalue(DTC_Number_169_Env,dtc[12]);
putvalue(DTC_Number_170_Env,dtc[13]);
putvalue(DTC_Number_171_Env,dtc[14]);
putvalue(DTC_Number_172_Env,dtc[15]);
  dtc_status[0]=backup_status;
    
    for(i=0;i<16;i++)
    //write("dtc_status 2A[%d]=%x\n",i,dtc_status[i]);
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_157_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_158_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_159_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_160_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_161_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_162_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_163_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_164_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_165_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_166_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_167_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_168_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_169_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_170_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_171_Env,"DTC Active");
    
    if(i==15)
 putvalue(DTC_Status_172_Env,"DTC Active");
     }

else if (dtc_status[i]==0x2E)
  {
    if(i==0)
 putvalue(DTC_Status_157_Env,"Fault Removed");
    if(i==1)
 putvalue(DTC_Status_158_Env,"Fault Removed");
    if(i==2)
 putvalue(DTC_Status_159_Env,"Fault Removed");
    if(i==3)
 putvalue(DTC_Status_160_Env,"Fault Removed");
    if(i==4)
 putvalue(DTC_Status_161_Env,"Fault Removed");
    if(i==5)
 putvalue(DTC_Status_162_Env,"Fault Removed");
    if(i==6)
 putvalue(DTC_Status_163_Env,"Fault Removed");
    if(i==7)
 putvalue(DTC_Status_164_Env,"Fault Removed");
    if(i==8)
 putvalue(DTC_Status_165_Env,"Fault Removed");
    if(i==9)
 putvalue(DTC_Status_166_Env,"Fault Removed");
    if(i==10)
 putvalue(DTC_Status_167_Env,"Fault Removed");
    if(i==11)
 putvalue(DTC_Status_168_Env,"Fault Removed");
    if(i==12)
 putvalue(DTC_Status_169_Env,"Fault Removed");
    if(i==13)
 putvalue(DTC_Status_170_Env,"Fault Removed");
    if(i==14)
 putvalue(DTC_Status_171_Env,"Fault Removed");
    if(i==15)
 putvalue(DTC_Status_172_Env,"Fault Removed");
  }
  else if(dtc_status[i]==0x28)
  {
            if(i==0)
 putvalue(DTC_Status_157_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_158_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_159_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_160_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_161_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_162_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_163_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_164_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_165_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_166_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_167_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_168_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_169_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_170_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_171_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_172_Env,"Pending DTC still Set");
  }
else if (dtc_status[i]==0x50)
  {
      if(i==0)
 putvalue(DTC_Status_157_Env,"DTC Not Set");
    if(i==1)
 putvalue(DTC_Status_158_Env,"DTC Not Set");
    if(i==2)
 putvalue(DTC_Status_159_Env,"DTC Not Set");
    if(i==3)
 putvalue(DTC_Status_160_Env,"DTC Not Set");
    if(i==4)
 putvalue(DTC_Status_161_Env,"DTC Not Set");
    if(i==5)
 putvalue(DTC_Status_162_Env,"DTC Not Set");
    if(i==6)
 putvalue(DTC_Status_163_Env,"DTC Not Set");
    if(i==7)
 putvalue(DTC_Status_164_Env,"DTC Not Set");
    if(i==8)
 putvalue(DTC_Status_165_Env,"DTC Not Set");
    if(i==9)
 putvalue(DTC_Status_166_Env,"DTC Not Set");
    if(i==10)
 putvalue(DTC_Status_167_Env,"DTC Not Set");
    if(i==11)
 putvalue(DTC_Status_168_Env,"DTC Not Set");
    if(i==12)
 putvalue(DTC_Status_169_Env,"DTC Not Set");
    if(i==13)
 putvalue(DTC_Status_170_Env,"DTC Not Set");
    if(i==14)
 putvalue(DTC_Status_171_Env,"DTC Not Set");
 if(i==15)
 putvalue(DTC_Status_172_Env,"DTC Not set");
  } 
  else
  {
          if(i==0)
 putvalue(DTC_Status_157_Env,"DTC Not Set");
    if(i==1)
 putvalue(DTC_Status_158_Env,"DTC Not Set");
    if(i==2)
 putvalue(DTC_Status_159_Env,"DTC Not Set");
    if(i==3)
 putvalue(DTC_Status_160_Env,"DTC Not Set");
    if(i==4)
 putvalue(DTC_Status_161_Env,"DTC Not Set");
    if(i==5)
 putvalue(DTC_Status_162_Env,"DTC Not Set");
    if(i==6)
 putvalue(DTC_Status_163_Env,"DTC Not Set");
    if(i==7)
 putvalue(DTC_Status_164_Env,"DTC Not Set");
    if(i==8)
 putvalue(DTC_Status_165_Env,"DTC Not Set");
    if(i==9)
 putvalue(DTC_Status_166_Env,"DTC Not Set");
    if(i==10)
 putvalue(DTC_Status_167_Env,"DTC Not Set");
    if(i==11)
 putvalue(DTC_Status_168_Env,"DTC Not Set");
    if(i==12)
 putvalue(DTC_Status_169_Env,"DTC Not Set");
    if(i==13)
 putvalue(DTC_Status_170_Env,"DTC Not Set");
    if(i==14)
 putvalue(DTC_Status_171_Env,"DTC Not Set");
 if(i==15)
 putvalue(DTC_Status_172_Env,"DTC Not set");
  } 
  }
  for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
  
  }
if((a[0]==0x2B))
  {
    if(cont==11)
    length=mod+13;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
      }
    backup2=a[1];
    backup3=a[2];
    backup_status=a[3];
      i=4;
for(row=1;row<16;row++)
  { 
    if(i==64)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row]=a[i+3];
    i=i+4;  
  }
  dtc[0][0]=backup1;
  dtc[0][1]=backup2;
  dtc[0][2]=backup3;
 dtc_status[0]=backup_status;
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
      }
putvalue(DTC_Number_173_Env,dtc[0]);
putvalue(DTC_Number_174_Env,dtc[1]);
putvalue(DTC_Number_175_Env,dtc[2]);
putvalue(DTC_Number_176_Env,dtc[3]);
putvalue(DTC_Number_177_Env,dtc[4]);
putvalue(DTC_Number_178_Env,dtc[5]);
putvalue(DTC_Number_179_Env,dtc[6]);
putvalue(DTC_Number_180_Env,dtc[7]);
putvalue(DTC_Number_181_Env,dtc[8]);
putvalue(DTC_Number_182_Env,dtc[9]);
putvalue(DTC_Number_183_Env,dtc[10]);
putvalue(DTC_Number_184_Env,dtc[11]);
putvalue(DTC_Number_185_Env,dtc[12]);
putvalue(DTC_Number_186_Env,dtc[13]);
putvalue(DTC_Number_187_Env,dtc[14]);
putvalue(DTC_Number_188_Env,dtc[15]);
  dtc_status[0]=backup_status;
    for(i=0;i<16;i++)
//    write("dtc_status2B[%d]=%x\n",i,dtc_status[i]);
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_173_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_174_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_175_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_176_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_177_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_178_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_179_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_180_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_181_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_182_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_183_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_184_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_185_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_186_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_187_Env,"DTC Active");
    if(i==15)
 putvalue(DTC_Status_188_Env,"DTC Active");
   
     }

else if (dtc_status[i]==0x2E)
  {
        if(i==0)
 putvalue(DTC_Status_173_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_174_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_175_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_176_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_177_Env,"Fault Removed");
        
    if(i==5)
 putvalue(DTC_Status_178_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_179_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_180_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_181_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_182_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_183_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_184_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_185_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_186_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_187_Env,"Fault Removed");
    
    if(i==15)
 putvalue(DTC_Status_188_Env,"Fault Removed");
  }
  else if (dtc_status[i]==0x28)
  {
     if(i==0)
 putvalue(DTC_Status_173_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_174_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_175_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_176_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_177_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_178_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_179_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_180_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_181_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_182_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_183_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_184_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_185_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_186_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_187_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_188_Env,"Pending DTC still Set");
  }
  
else if (dtc_status[i]==0x50)
  {
             if(i==0)
 putvalue(DTC_Status_173_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_174_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_175_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_176_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_177_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_178_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_179_Env,"DTC Not Set");
   
    if(i==7)
 putvalue(DTC_Status_180_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_181_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_182_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_183_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_184_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_185_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_186_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_187_Env,"DTC Not Set");
    
    if(i==15)
 putvalue(DTC_Status_188_Env,"DTC Not Set");
  } 
  else
  {
                    if(i==0)
 putvalue(DTC_Status_173_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_174_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_175_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_176_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_177_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_178_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_179_Env,"DTC Not Set");
   
    if(i==7)
 putvalue(DTC_Status_180_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_181_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_182_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_183_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_184_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_185_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_186_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_187_Env,"DTC Not Set");
    
    if(i==15)
 putvalue(DTC_Status_188_Env,"DTC Not Set");
  }
  for(row=0;row<16;row++)
  { 
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
  
  }
}
     else if((a[0]==0x2C)&&(dtc_flag==1))
  { 
    if(cont==12)
    length=mod+14;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
      }    
      i=1;
       for(row=0;row<16;row++)
  { 
    if(i==64)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row]=a[i+3];
    i=i+4;
    }
 for(i=0;i<=63;i++)
    { 
      a[i]=0;
     }
putvalue(DTC_Number_189_Env,dtc[0]);
putvalue(DTC_Number_190_Env,dtc[1]);
putvalue(DTC_Number_191_Env,dtc[2]);
putvalue(DTC_Number_192_Env,dtc[3]);
putvalue(DTC_Number_193_Env,dtc[4]);
putvalue(DTC_Number_194_Env,dtc[5]);
putvalue(DTC_Number_195_Env,dtc[6]);
putvalue(DTC_Number_196_Env,dtc[7]);
putvalue(DTC_Number_197_Env,dtc[8]);
putvalue(DTC_Number_198_Env,dtc[9]);
putvalue(DTC_Number_199_Env,dtc[10]);
putvalue(DTC_Number_200_Env,dtc[11]);
putvalue(DTC_Number_201_Env,dtc[12]);
putvalue(DTC_Number_202_Env,dtc[13]);
putvalue(DTC_Number_203_Env,dtc[14]);
putvalue(DTC_Number_204_Env,dtc[15]);
 
  for(i=0;i<15;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_189_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_190_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_191_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_192_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_193_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_194_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_195_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_196_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_197_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_198_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_199_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_200_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_201_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_202_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_203_Env,"DTC Active");
  }

else if (dtc_status[i]==0x2E)
  {
        if(i==0)
 putvalue(DTC_Status_189_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_190_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_191_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_192_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_193_Env,"Fault Removed");
        
    if(i==5)
 putvalue(DTC_Status_194_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_195_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_196_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_197_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_198_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_199_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_200_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_201_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_202_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_203_Env,"Fault Removed");
    
    
  }
  else if (dtc_status[i]==0x28)
  {
     if(i==0)
 putvalue(DTC_Status_189_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_190_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_191_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_192_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_193_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_194_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_195_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_196_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_197_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_198_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_199_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_200_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_201_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_202_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_203_Env,"Pending DTC still Set");
    
      }
  
else if (dtc_status[i]==0x50)
  {
             if(i==0)
 putvalue(DTC_Status_189_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_190_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_191_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_192_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_193_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_194_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_195_Env,"DTC Not Set");
    
    if(i==7)
 putvalue(DTC_Status_196_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_197_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_198_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_199_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_200_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_201_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_202_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_203_Env,"DTC Not Set");
    
     } 
  else
  {
                   if(i==0)
 putvalue(DTC_Status_189_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_190_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_191_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_192_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_193_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_194_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_195_Env,"DTC Not Set");
    
    if(i==7)
 putvalue(DTC_Status_196_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_197_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_198_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_199_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_200_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_201_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_202_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_203_Env,"DTC Not Set");
  }
  for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
  
  }
}
  else if((a[0]==0x2D)&&(dtc_flag==1))
  {    
    if(cont==13)
    length=mod+15;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
      }
    backup_status=a[1];
     i=2;
  for(row=0;row<16;row++)
  { 
    if(i==64)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row+1]=a[i+3];
    i=i+4;
  }
  backup1=dtc[15][0];
  backup2=dtc[15][1];
putvalue(DTC_Number_205_Env,dtc[0]);
putvalue(DTC_Number_206_Env,dtc[1]);
putvalue(DTC_Number_207_Env,dtc[2]);
putvalue(DTC_Number_208_Env,dtc[3]);
putvalue(DTC_Number_209_Env,dtc[4]);
putvalue(DTC_Number_210_Env,dtc[5]);
putvalue(DTC_Number_211_Env,dtc[6]);
putvalue(DTC_Number_212_Env,dtc[7]);
putvalue(DTC_Number_213_Env,dtc[8]);
putvalue(DTC_Number_214_Env,dtc[9]);
putvalue(DTC_Number_215_Env,dtc[10]);
putvalue(DTC_Number_216_Env,dtc[11]);
putvalue(DTC_Number_217_Env,dtc[12]);
putvalue(DTC_Number_218_Env,dtc[13]);
putvalue(DTC_Number_219_Env,dtc[14]);
 
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
      }
  dtc_status[0]=backup_status;
    
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_204_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_205_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_206_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_207_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_208_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_209_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_210_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_211_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_212_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_213_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_214_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_215_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_216_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_217_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_218_Env,"DTC Active");
    
    if(i==15)
 putvalue(DTC_Status_219_Env,"DTC Active");
    
         }

else if (dtc_status[i]==0x2E)
  {
      if(i==0)
 putvalue(DTC_Status_204_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_205_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_206_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_207_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_208_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_209_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_210_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_211_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_212_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_213_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_214_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_215_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_216_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_217_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_218_Env,"Fault Removed");
    
    if(i==15)
 putvalue(DTC_Status_219_Env,"Fault Removed");
  }
  else if (dtc_status[i]==0x28)
  {
    
        if(i==0)
 putvalue(DTC_Status_204_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_205_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_206_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_207_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_208_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_209_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_210_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_211_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_212_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_213_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_214_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_215_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_216_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_217_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_218_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_219_Env,"Pending DTC still Set");
    
  }
else if (dtc_status[i]==0x50)
  {
     if(i==0)
 putvalue(DTC_Status_204_Env,"DTC Not set");
    
    if(i==1)
 putvalue(DTC_Status_205_Env,"DTC Not set");
    
    if(i==2)
 putvalue(DTC_Status_206_Env,"DTC Not set");
    
    if(i==3)
 putvalue(DTC_Status_207_Env,"DTC Not set");
    
    if(i==4)
 putvalue(DTC_Status_208_Env,"DTC Not set");
        
    if(i==5)
 putvalue(DTC_Status_209_Env,"DTC Not set");
    
    if(i==6)
 putvalue(DTC_Status_210_Env,"DTC Not set");
    
    if(i==7)
 putvalue(DTC_Status_211_Env,"DTC Not set");
   
    if(i==8)
 putvalue(DTC_Status_212_Env,"DTC Not set");
    
    if(i==9)
 putvalue(DTC_Status_213_Env,"DTC Not set");
    
    if(i==10)
 putvalue(DTC_Status_214_Env,"DTC Not set");
    
    if(i==11)
 putvalue(DTC_Status_215_Env,"DTC Not set");
    
    if(i==12)
 putvalue(DTC_Status_216_Env,"DTC Not set");
    
    if(i==13)
 putvalue(DTC_Status_217_Env,"DTC Not set");
    
    if(i==14)
 putvalue(DTC_Status_218_Env,"DTC Not set");
    
    if(i==15)
 putvalue(DTC_Status_219_Env,"DTC Not set");
  } 
  else
  {
      if(i==0)
 putvalue(DTC_Status_204_Env,"DTC Not set");
    
    if(i==1)
 putvalue(DTC_Status_205_Env,"DTC Not set");
    
    if(i==2)
 putvalue(DTC_Status_206_Env,"DTC Not set");
    
    if(i==3)
 putvalue(DTC_Status_207_Env,"DTC Not set");
    
    if(i==4)
 putvalue(DTC_Status_208_Env,"DTC Not set");
        
    if(i==5)
 putvalue(DTC_Status_209_Env,"DTC Not set");
    
    if(i==6)
 putvalue(DTC_Status_210_Env,"DTC Not set");
    
    if(i==7)
 putvalue(DTC_Status_211_Env,"DTC Not set");
   
    if(i==8)
 putvalue(DTC_Status_212_Env,"DTC Not set");
    
    if(i==9)
 putvalue(DTC_Status_213_Env,"DTC Not set");
    
    if(i==10)
 putvalue(DTC_Status_214_Env,"DTC Not set");
    
    if(i==11)
 putvalue(DTC_Status_215_Env,"DTC Not set");
    
    if(i==12)
 putvalue(DTC_Status_216_Env,"DTC Not set");
    
    if(i==13)
 putvalue(DTC_Status_217_Env,"DTC Not set");
    
    if(i==14)
 putvalue(DTC_Status_218_Env,"DTC Not set");
    
    if(i==15)
 putvalue(DTC_Status_219_Env,"DTC Not set");
  } 
  }
for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
    dtc_status[i]=0;
  }
  }
        else if((a[0]==0x2E)&&(dtc_flag==1))
  {   
    if(cont==14)
    length=mod+16;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
    }
    backup3=a[1];
    backup_status=a[2];   
      i=3;  
       for(row=1;row<16;row++)
  { 
    if(i==64)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
  dtc_status[row]=a[i+3];
    i=i+4;
  }
  dtc[0][0]=backup1;
  dtc[0][1]=backup2;
  dtc[0][2]=backup3;
  backup1=a[63];
  
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
      }
putvalue(DTC_Number_220_Env,dtc[0]);
putvalue(DTC_Number_221_Env,dtc[1]);
putvalue(DTC_Number_222_Env,dtc[2]);
putvalue(DTC_Number_223_Env,dtc[3]);
putvalue(DTC_Number_224_Env,dtc[4]);
putvalue(DTC_Number_225_Env,dtc[5]);
putvalue(DTC_Number_226_Env,dtc[6]);
putvalue(DTC_Number_227_Env,dtc[7]);
putvalue(DTC_Number_228_Env,dtc[8]);
putvalue(DTC_Number_229_Env,dtc[9]);
putvalue(DTC_Number_230_Env,dtc[10]);
putvalue(DTC_Number_231_Env,dtc[11]);
putvalue(DTC_Number_232_Env,dtc[12]);
putvalue(DTC_Number_233_Env,dtc[13]);
putvalue(DTC_Number_234_Env,dtc[14]);
putvalue(DTC_Number_235_Env,dtc[15]);
dtc_status[0]=backup_status;
    
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
   if(i==0)
 putvalue(DTC_Status_220_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_221_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_222_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_223_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_224_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_225_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_226_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_227_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_228_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_229_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_230_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_231_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_232_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_233_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_234_Env,"DTC Active");
    
    if(i==15)
 putvalue(DTC_Status_235_Env,"DTC Active");
  }

else if (dtc_status[i]==0x2E)
  {
   if(i==0)
 putvalue(DTC_Status_220_Env,"Fault Removed");
    if(i==1)
 putvalue(DTC_Status_221_Env,"Fault Removed");
    if(i==2)
 putvalue(DTC_Status_222_Env,"Fault Removed");
    if(i==3)
 putvalue(DTC_Status_223_Env,"Fault Removed");
    if(i==4)
 putvalue(DTC_Status_224_Env,"Fault Removed");
    if(i==5)
 putvalue(DTC_Status_225_Env,"Fault Removed");
    if(i==6)
 putvalue(DTC_Status_226_Env,"Fault Removed");
    if(i==7)
 putvalue(DTC_Status_227_Env,"Fault Removed");
    if(i==8)
 putvalue(DTC_Status_228_Env,"Fault Removed");
    if(i==9)
 putvalue(DTC_Status_229_Env,"Fault Removed");
    if(i==10)
 putvalue(DTC_Status_230_Env,"Fault Removed");
    if(i==11)
 putvalue(DTC_Status_231_Env,"Fault Removed");
    if(i==12)
 putvalue(DTC_Status_232_Env,"Fault Removed");
    if(i==13)
 putvalue(DTC_Status_233_Env,"Fault Removed");
    if(i==14)
 putvalue(DTC_Status_234_Env,"Fault Removed");
    if(i==15)
 putvalue(DTC_Status_235_Env,"Fault Removed");
}
  else if(dtc_status[i]==0x28)
  {
           if(i==0)
 putvalue(DTC_Status_220_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_221_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_222_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_223_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_224_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_225_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_226_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_227_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_228_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_229_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_230_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_231_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_232_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_233_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_234_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_235_Env,"Pending DTC still Set");
}
else if (dtc_status[i]==0x50)
 {
      if(i==0)
 putvalue(DTC_Status_220_Env,"DTC Not Set");
    if(i==1)
 putvalue(DTC_Status_221_Env,"DTC Not Set");
    if(i==2)
 putvalue(DTC_Status_222_Env,"DTC Not Set");
    if(i==3)
 putvalue(DTC_Status_223_Env,"DTC Not Set");
    if(i==4)
 putvalue(DTC_Status_224_Env,"DTC Not Set");
    if(i==5)
 putvalue(DTC_Status_225_Env,"DTC Not Set");
    if(i==6)
 putvalue(DTC_Status_226_Env,"DTC Not Set");
    if(i==7)
 putvalue(DTC_Status_227_Env,"DTC Not Set");
    if(i==8)
 putvalue(DTC_Status_228_Env,"DTC Not Set");
    if(i==9)
 putvalue(DTC_Status_229_Env,"DTC Not Set");
    if(i==10)
 putvalue(DTC_Status_230_Env,"DTC Not Set");
    if(i==11)
 putvalue(DTC_Status_231_Env,"DTC Not Set");
    if(i==12)
 putvalue(DTC_Status_232_Env,"DTC Not Set");
    if(i==13)
 putvalue(DTC_Status_233_Env,"DTC Not Set");
    if(i==14)
 putvalue(DTC_Status_234_Env,"DTC Not Set");
 if(i==15)
 putvalue(DTC_Status_235_Env,"DTC Not set");
 } 
else
 {
          if(i==0)
 putvalue(DTC_Status_220_Env,"DTC Not Set");
    if(i==1)
 putvalue(DTC_Status_221_Env,"DTC Not Set");
    if(i==2)
 putvalue(DTC_Status_222_Env,"DTC Not Set");
    if(i==3)
 putvalue(DTC_Status_223_Env,"DTC Not Set");
    if(i==4)
 putvalue(DTC_Status_224_Env,"DTC Not Set");
    if(i==5)
 putvalue(DTC_Status_225_Env,"DTC Not Set");
    if(i==6)
 putvalue(DTC_Status_226_Env,"DTC Not Set");
    if(i==7)
 putvalue(DTC_Status_227_Env,"DTC Not Set");
    if(i==8)
 putvalue(DTC_Status_228_Env,"DTC Not Set");
    if(i==9)
 putvalue(DTC_Status_229_Env,"DTC Not Set");
    if(i==10)
 putvalue(DTC_Status_230_Env,"DTC Not Set");
    if(i==11)
 putvalue(DTC_Status_231_Env,"DTC Not Set");
    if(i==12)
 putvalue(DTC_Status_232_Env,"DTC Not Set");
    if(i==13)
 putvalue(DTC_Status_233_Env,"DTC Not Set");
    if(i==14)
 putvalue(DTC_Status_234_Env,"DTC Not Set");
 if(i==15)
 putvalue(DTC_Status_235_Env,"DTC Not set");
 } 
  }
  for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }

  }
 else if((a[0]==0x2F)&&(dtc_flag==1))
  {
    if(cont==15)
    length=mod+17;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
      }
    backup2=a[1];
    backup3=a[2];
    backup_status=a[3];
      i=4;
for(row=1;row<16;row++)
  { 
    if(i==64)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row]=a[i+3];
    i=i+4;  
  }
  dtc[0][0]=backup1;
  dtc[0][1]=backup2;
  dtc[0][2]=backup3;
 dtc_status[0]=backup_status;
  for(i=0;i<=63;i++)
    { 
      a[i]=0;
      }
putvalue(DTC_Number_236_Env,dtc[0]);
putvalue(DTC_Number_237_Env,dtc[1]);
putvalue(DTC_Number_238_Env,dtc[2]);
putvalue(DTC_Number_239_Env,dtc[3]);
putvalue(DTC_Number_240_Env,dtc[4]);
putvalue(DTC_Number_241_Env,dtc[5]);
putvalue(DTC_Number_242_Env,dtc[6]);
putvalue(DTC_Number_243_Env,dtc[7]);
putvalue(DTC_Number_244_Env,dtc[8]);
putvalue(DTC_Number_245_Env,dtc[9]);
putvalue(DTC_Number_246_Env,dtc[10]);
putvalue(DTC_Number_247_Env,dtc[11]);
putvalue(DTC_Number_248_Env,dtc[12]);
putvalue(DTC_Number_249_Env,dtc[13]);
putvalue(DTC_Number_250_Env,dtc[14]);
putvalue(DTC_Number_251_Env,dtc[15]);
  dtc_status[0]=backup_status;
   
    for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_236_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_237_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_238_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_239_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_240_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_241_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_242_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_243_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_244_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_245_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_246_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_247_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_248_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_249_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_250_Env,"DTC Active");
    if(i==15)
 putvalue(DTC_Status_251_Env,"DTC Active");
   
     }

else if (dtc_status[i]==0x2E)
  {
        if(i==0)
 putvalue(DTC_Status_236_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_237_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_238_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_239_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_240_Env,"Fault Removed");
        
    if(i==5)
 putvalue(DTC_Status_241_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_242_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_243_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_244_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_245_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_246_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_247_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_248_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_249_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_250_Env,"Fault Removed");
    
    if(i==15)
 putvalue(DTC_Status_251_Env,"Fault Removed");
  }
  else if (dtc_status[i]==0x28)
  {
     if(i==0)
 putvalue(DTC_Status_236_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_237_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_238_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_239_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_240_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_241_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_242_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_243_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_244_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_245_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_246_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_247_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_248_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_249_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_250_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_251_Env,"Pending DTC still Set");
  }
  
else if (dtc_status[i]==0x50)
  {
             if(i==0)
 putvalue(DTC_Status_236_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_237_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_238_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_239_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_240_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_241_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_242_Env,"DTC Not Set");
   
    if(i==7)
 putvalue(DTC_Status_243_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_244_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_245_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_246_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_247_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_248_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_249_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_250_Env,"DTC Not Set");
    
    if(i==15)
 putvalue(DTC_Status_251_Env,"DTC Not Set");
  } 
  else
  {
                    if(i==0)
 putvalue(DTC_Status_236_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_237_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_238_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_239_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_240_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_241_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_242_Env,"DTC Not Set");
   
    if(i==7)
 putvalue(DTC_Status_243_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_244_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_245_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_246_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_247_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_248_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_249_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_250_Env,"DTC Not Set");
    
    if(i==15)
 putvalue(DTC_Status_251_Env,"DTC Not Set");
  }
  for(row=0;row<16;row++)
  { 
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
    }
  dtc_flag=2;
}
     else if(a[0]==0x20)
  { 
    if(cont==12)
    length=mod+14;
  else 
    length=63;
    for(i=1;i<=length;i++)
    { 
      a[i]=this.byte(i);
      }    
      i=1;
       for(row=0;row<16;row++)
  { 
    if(i==64)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row]=a[i+3];
    i=i+4;
    }
 for(i=0;i<=63;i++)
    { 
      a[i]=0;
     }
putvalue(DTC_Number_252_Env,dtc[0]);
putvalue(DTC_Number_253_Env,dtc[1]);
putvalue(DTC_Number_254_Env,dtc[2]);
putvalue(DTC_Number_255_Env,dtc[3]);
putvalue(DTC_Number_256_Env,dtc[4]);
putvalue(DTC_Number_257_Env,dtc[5]);
putvalue(DTC_Number_258_Env,dtc[6]);
putvalue(DTC_Number_259_Env,dtc[7]);
putvalue(DTC_Number_260_Env,dtc[8]);
putvalue(DTC_Number_261_Env,dtc[9]);
putvalue(DTC_Number_262_Env,dtc[10]);
putvalue(DTC_Number_263_Env,dtc[11]);
putvalue(DTC_Number_264_Env,dtc[12]);
putvalue(DTC_Number_265_Env,dtc[13]);
putvalue(DTC_Number_266_Env,dtc[14]);
putvalue(DTC_Number_267_Env,dtc[15]);
  
  for(i=0;i<15;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_252_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_253_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_254_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_255_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_256_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_257_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_258_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_259_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_260_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_261_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_262_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_263_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_264_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_265_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_266_Env,"DTC Active");
  }

else if (dtc_status[i]==0x2E)
  {
        if(i==0)
 putvalue(DTC_Status_252_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_253_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_254_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_255_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_256_Env,"Fault Removed");
        
    if(i==5)
 putvalue(DTC_Status_257_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_258_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_259_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_260_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_261_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_262_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_263_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_264_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_265_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_266_Env,"Fault Removed");
    
    
  }
  else if (dtc_status[i]==0x28)
  {
     if(i==0)
 putvalue(DTC_Status_252_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_253_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_254_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_255_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_266_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_257_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_258_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_259_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_260_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_261_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_262_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_263_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_264_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_265_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_266_Env,"Pending DTC still Set");
    
      }
  
else if (dtc_status[i]==0x50)
  {
             if(i==0)
 putvalue(DTC_Status_252_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_253_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_254_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_255_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_256_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_257_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_258_Env,"DTC Not Set");
    
    if(i==7)
 putvalue(DTC_Status_259_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_260_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_261_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_262_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_263_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_264_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_265_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_266_Env,"DTC Not Set");
    
     } 
  else
  {
                   if(i==0)
 putvalue(DTC_Status_252_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_253_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_254_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_255_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_256_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_257_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_258_Env,"DTC Not Set");
    
    if(i==7)
 putvalue(DTC_Status_259_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_260_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_261_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_262_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_263_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_264_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_265_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_266_Env,"DTC Not Set");
  }
  for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
  
  }
}
 if((a[0]==0x21)&&(dtc_flag==2))
  { 
  
    rr=this.dlc;
     if(cont==1)
    length=mod+3;
    if(rr==8)
     length=8;
    if(rr==9)
     length=12;
    if(rr==10)
     length=16;
    if(rr==11)
     length=20;
    if(rr==12)
     length=24;
    if(rr==13)
     length=32;
    if(rr==14)
     length=48;
    if(rr==15)
     length=64;
    
for(i=1;i<length;i++)
 { 
  
a[i]=this.byte(i);
 
 }
      backup_status=this.byte(1);
      i=2;
    
       for(row=0;row<16;row++)
  { 
    if(i>=length)
      break;

    dtc[row][0]=this.byte(i);
    dtc[row][1]=this.byte(i+1);
    dtc[row][2]=this.byte(i+2);  
dtc_status[row+1]=this.byte(i+3);
    i=i+4;
  }
  backup1=dtc[15][0];
  backup2=dtc[15][1]; 
if((dtc[0][0]!=0)&&(dtc[0][1]!=0)&&(dtc[0][2]!=0))
  putvalue(DTC_Number_268_Env,dtc[0]);
if((dtc[1][0]!=0)&&(dtc[1][1]!=0)&&(dtc[1][2]!=0))
putvalue(DTC_Number_269_Env,dtc[1]);
if((dtc[2][0]!=0)&&(dtc[2][1]!=0)&&(dtc[2][2]!=0))
putvalue(DTC_Number_270_Env,dtc[2]);
if((dtc[3][0]!=0)&&(dtc[3][1]!=0)&&(dtc[3][2]!=0))
putvalue(DTC_Number_271_Env,dtc[3]);
if((dtc[4][0]!=0)&&(dtc[4][1]!=0)&&(dtc[4][2]!=0))
putvalue(DTC_Number_272_Env,dtc[4]);
if((dtc[5][0]!=0)&&(dtc[5][1]!=0)&&(dtc[5][2]!=0))
putvalue(DTC_Number_273_Env,dtc[5]);
if((dtc[6][0]!=0)&&(dtc[6][1]!=0)&&(dtc[6][2]!=0))
 putvalue(DTC_Number_274_Env,dtc[6]);
if((dtc[7][0]!=0)&&(dtc[7][1]!=0)&&(dtc[7][2]!=0))
putvalue(DTC_Number_275_Env,dtc[7]);
if((dtc[8][0]!=0)&&(dtc[8][1]!=0)&&(dtc[8][2]!=0))
putvalue(DTC_Number_276_Env,dtc[8]);
if((dtc[9][0]!=0)&&(dtc[9][1]!=0)&&(dtc[9][2]!=0))
putvalue(DTC_Number_277_Env,dtc[9]);
if((dtc[10][0]!=0)&&(dtc[10][1]!=0)&&(dtc[10][2]!=0))
putvalue(DTC_Number_278_Env,dtc[10]);
if((dtc[11][0]!=0)&&(dtc[11][1]!=0)&&(dtc[11][2]!=0))
putvalue(DTC_Number_279_Env,dtc[11]);
if((dtc[12][0]!=0)&&(dtc[12][1]!=0)&&(dtc[12][2]!=0))
putvalue(DTC_Number_280_Env,dtc[12]);
if((dtc[13][0]!=0)&&(dtc[13][1]!=0)&&(dtc[13][2]!=0))
putvalue(DTC_Number_281_Env,dtc[13]);
if((dtc[14][0]!=0)&&(dtc[14][1]!=0)&&(dtc[14][2]!=0))
putvalue(DTC_Number_282_Env,dtc[14]);
 
  for(i=0;i<length;i++)
    { 
      a[i]=0;
  
    }
  dtc_status[0]=backup_status;
   
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_267_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_268_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_269_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_270_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_271_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_272_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_273_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_274_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_275_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_276_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_277_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_278_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_279_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_280_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_281_Env,"DTC Active");
    
    if(i==15)
 putvalue(DTC_Status_282_Env,"DTC Active");
    
         }

else if (dtc_status[i]==0x2E)
  {
    
       if(i==0)
 putvalue(DTC_Status_267_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_268_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_269_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_270_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_271_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_272_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_273_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_274_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_275_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_276_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_277_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_278_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_279_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_280_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_281_Env,"Fault Removed");
    
    if(i==15)
 putvalue(DTC_Status_282_Env,"Fault Removed");
  }
  else if (dtc_status[i]==0x28)
  {
    
        if(i==0)
 putvalue(DTC_Status_267_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_268_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_269_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_270_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_271_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_272_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_273_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_274_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_275_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_276_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_277_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_278_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_279_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_280_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_281_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_282_Env,"Pending DTC still Set");
    
  }
else if (dtc_status[i]==0x50)
  {
     if(i==0)
 putvalue(DTC_Status_267_Env,"DTC Not set");
    
    if(i==1)
 putvalue(DTC_Status_268_Env,"DTC Not set");
    
    if(i==2)
 putvalue(DTC_Status_269_Env,"DTC Not set");
    
    if(i==3)
 putvalue(DTC_Status_270_Env,"DTC Not set");
    
    if(i==4)
 putvalue(DTC_Status_271_Env,"DTC Not set");
        
    if(i==5)
 putvalue(DTC_Status_272_Env,"DTC Not set");
    
    if(i==6)
 putvalue(DTC_Status_273_Env,"DTC Not set");
    
    if(i==7)
 putvalue(DTC_Status_274_Env,"DTC Not set");
   
    if(i==8)
 putvalue(DTC_Status_275_Env,"DTC Not set");
    
    if(i==9)
 putvalue(DTC_Status_276_Env,"DTC Not set");
    
    if(i==10)
 putvalue(DTC_Status_277_Env,"DTC Not set");
    
    if(i==11)
 putvalue(DTC_Status_278_Env,"DTC Not set");
    
    if(i==12)
 putvalue(DTC_Status_279_Env,"DTC Not set");
    
    if(i==13)
 putvalue(DTC_Status_280_Env,"DTC Not set");
    
    if(i==14)
 putvalue(DTC_Status_281_Env,"DTC Not set");
    
    if(i==15)
 putvalue(DTC_Status_282_Env,"DTC Not set");
  } 
  else
  {
    if(i==0)
 putvalue(DTC_Status_267_Env,"DTC Not set");
    
    if((i==1)&&((dtc[0][0]!=0)&&(dtc[0][1]!=0)&&(dtc[0][2]!=0)))
 putvalue(DTC_Status_268_Env,"DTC Not set");
    
    if((i==2)&&((dtc[1][0]!=0)&&(dtc[1][1]!=0)&&(dtc[1][2]!=0)))
 putvalue(DTC_Status_269_Env,"DTC Not set");
    
    if((i==3)&&((dtc[2][0]!=0)&&(dtc[2][1]!=0)&&(dtc[2][2]!=0)))
 putvalue(DTC_Status_270_Env,"DTC Not set");
    
    if((i==4)&&((dtc[3][0]!=0)&&(dtc[3][1]!=0)&&(dtc[3][2]!=0)))
 putvalue(DTC_Status_271_Env,"DTC Not set");
        
    if((i==5)&&((dtc[4][0]!=0)&&(dtc[4][1]!=0)&&(dtc[4][2]!=0)))
 putvalue(DTC_Status_272_Env,"DTC Not set");
    
    if((i==6)&&((dtc[5][0]!=0)&&(dtc[5][1]!=0)&&(dtc[5][2]!=0)))
 putvalue(DTC_Status_273_Env,"DTC Not set");
    
    if((i==7)&&((dtc[6][0]!=0)&&(dtc[6][1]!=0)&&(dtc[6][2]!=0)))
 putvalue(DTC_Status_274_Env,"DTC Not set");
   
    if((i==8)&&((dtc[7][0]!=0)&&(dtc[7][1]!=0)&&(dtc[7][2]!=0)))
 putvalue(DTC_Status_275_Env,"DTC Not set");
    
    if((i==9)&&((dtc[8][0]!=0)&&(dtc[8][1]!=0)&&(dtc[8][2]!=0)))
      putvalue(DTC_Status_276_Env,"DTC Not set");
    
    if((i==10)&&((dtc[9][0]!=0)&&(dtc[9][1]!=0)&&(dtc[9][2]!=0)))
 putvalue(DTC_Status_277_Env,"DTC Not set");
    
    if((i==11)&&((dtc[10][0]!=0)&&(dtc[10][1]!=0)&&(dtc[10][2]!=0)))
 putvalue(DTC_Status_278_Env,"DTC Not set");
    
    if((i==12)&&((dtc[11][0]!=0)&&(dtc[11][1]!=0)&&(dtc[11][2]!=0)))
 putvalue(DTC_Status_279_Env,"DTC Not set");
    
    if((i==13)&&((dtc[12][0]!=0)&&(dtc[12][1]!=0)&&(dtc[12][2]!=0)))
 putvalue(DTC_Status_280_Env,"DTC Not set");
    
    if((i==14)&&((dtc[13][0]!=0)&&(dtc[13][1]!=0)&&(dtc[13][2]!=0)))
 putvalue(DTC_Status_281_Env,"DTC Not set");
    
    if((i==15)&&((dtc[14][0]!=0)&&(dtc[14][1]!=0)&&(dtc[14][2]!=0)))
 putvalue(DTC_Status_282_Env,"DTC Not set");
  } 
  }
for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
  
  }
   else if((a[0]==0x22)&&(dtc_flag==2))
  {   
     rr=this.dlc;
     if(cont==2)
    length=mod+5;
    if(rr==8)
     length=8;
    if(rr==9)
     length=12;
    if(rr==10)
     length=16;
    if(rr==11)
     length=20;
    if(rr==12)
     length=24;
    if(rr==13)
     length=32;
    if(rr==14)
     length=48;
    if(rr==15)
     length=64;
    
for(i=1;i<length;i++)
 { 
  
a[i]=this.byte(i);
 
 }
    backup3=a[1];
    backup_status=a[2];   
      i=3;  
       for(row=1;row<16;row++)
  { 
    if(i==length)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
  dtc_status[row]=a[i+3];
    i=i+4;
  }
  dtc[0][0]=backup1;
  dtc[0][1]=backup2;
  dtc[0][2]=backup3;
  backup1=a[length-1];
  
  for(i=0;i<length;i++)
    { 
      a[i]=0;
      }
if((dtc[0][0]!=0)&&(dtc[0][1]!=0)&&(dtc[0][2]!=0))
  putvalue(DTC_Number_283_Env,dtc[0]);
if((dtc[1][0]!=0)&&(dtc[1][1]!=0)&&(dtc[1][2]!=0))
putvalue(DTC_Number_284_Env,dtc[1]);
if((dtc[2][0]!=0)&&(dtc[2][1]!=0)&&(dtc[2][2]!=0))
putvalue(DTC_Number_285_Env,dtc[2]);
if((dtc[3][0]!=0)&&(dtc[3][1]!=0)&&(dtc[3][2]!=0))
putvalue(DTC_Number_286_Env,dtc[3]);
if((dtc[4][0]!=0)&&(dtc[4][1]!=0)&&(dtc[4][2]!=0))
putvalue(DTC_Number_287_Env,dtc[4]);
if((dtc[5][0]!=0)&&(dtc[5][1]!=0)&&(dtc[5][2]!=0))
putvalue(DTC_Number_288_Env,dtc[5]);
if((dtc[6][0]!=0)&&(dtc[6][1]!=0)&&(dtc[6][2]!=0))
 putvalue(DTC_Number_289_Env,dtc[6]);
if((dtc[7][0]!=0)&&(dtc[7][1]!=0)&&(dtc[7][2]!=0))
putvalue(DTC_Number_290_Env,dtc[7]);
if((dtc[8][0]!=0)&&(dtc[8][1]!=0)&&(dtc[8][2]!=0))
putvalue(DTC_Number_291_Env,dtc[8]);
if((dtc[9][0]!=0)&&(dtc[9][1]!=0)&&(dtc[9][2]!=0))
putvalue(DTC_Number_292_Env,dtc[9]);
if((dtc[10][0]!=0)&&(dtc[10][1]!=0)&&(dtc[10][2]!=0))
putvalue(DTC_Number_293_Env,dtc[10]);
if((dtc[11][0]!=0)&&(dtc[11][1]!=0)&&(dtc[11][2]!=0))
putvalue(DTC_Number_294_Env,dtc[11]);
if((dtc[12][0]!=0)&&(dtc[12][1]!=0)&&(dtc[12][2]!=0))
putvalue(DTC_Number_295_Env,dtc[12]);
if((dtc[13][0]!=0)&&(dtc[13][1]!=0)&&(dtc[13][2]!=0))
putvalue(DTC_Number_296_Env,dtc[13]);
if((dtc[14][0]!=0)&&(dtc[14][1]!=0)&&(dtc[14][2]!=0))
putvalue(DTC_Number_297_Env,dtc[14]);
 if((dtc[15][0]!=0)&&(dtc[15][1]!=0)&&(dtc[15][2]!=0))
putvalue(DTC_Number_298_Env,dtc[15]);
dtc_status[0]=backup_status;
    
  for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
   if(i==0)
 putvalue(DTC_Status_283_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_284_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_285_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_286_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_287_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_288_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_289_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_290_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_291_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_292_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_293_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_294_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_295_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_296_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_297_Env,"DTC Active");
    
    if(i==15)
 putvalue(DTC_Status_298_Env,"DTC Active");
  }

else if (dtc_status[i]==0x2E)
  {
   if(i==0)
 putvalue(DTC_Status_283_Env,"Fault Removed");
    if(i==1)
 putvalue(DTC_Status_284_Env,"Fault Removed");
    if(i==2)
 putvalue(DTC_Status_285_Env,"Fault Removed");
    if(i==3)
 putvalue(DTC_Status_286_Env,"Fault Removed");
    if(i==4)
 putvalue(DTC_Status_287_Env,"Fault Removed");
    if(i==5)
 putvalue(DTC_Status_288_Env,"Fault Removed");
    if(i==6)
 putvalue(DTC_Status_289_Env,"Fault Removed");
    if(i==7)
 putvalue(DTC_Status_290_Env,"Fault Removed");
    if(i==8)
 putvalue(DTC_Status_291_Env,"Fault Removed");
    if(i==9)
 putvalue(DTC_Status_292_Env,"Fault Removed");
    if(i==10)
 putvalue(DTC_Status_293_Env,"Fault Removed");
    if(i==11)
 putvalue(DTC_Status_294_Env,"Fault Removed");
    if(i==12)
 putvalue(DTC_Status_295_Env,"Fault Removed");
    if(i==13)
 putvalue(DTC_Status_296_Env,"Fault Removed");
    if(i==14)
 putvalue(DTC_Status_297_Env,"Fault Removed");
    if(i==15)
 putvalue(DTC_Status_298_Env,"Fault Removed");
}
  else if(dtc_status[i]==0x28)
  {
           if(i==0)
 putvalue(DTC_Status_283_Env,"Pending DTC still Set");
      if(i==1)
 putvalue(DTC_Status_284_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_285_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_286_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_287_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_288_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_289_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_290_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_291_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_292_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_293_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_294_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_295_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_296_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_297_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_298_Env,"Pending DTC still Set");
}
else if (dtc_status[i]==0x50)
 {
      if(i==0)
 putvalue(DTC_Status_283_Env,"DTC Not Set");
    if(i==1)
 putvalue(DTC_Status_284_Env,"DTC Not Set");
    if(i==2)
 putvalue(DTC_Status_285_Env,"DTC Not Set");
    if(i==3)
 putvalue(DTC_Status_286_Env,"DTC Not Set");
    if(i==4)
 putvalue(DTC_Status_287_Env,"DTC Not Set");
    if(i==5)
 putvalue(DTC_Status_288_Env,"DTC Not Set");
    if(i==6)
 putvalue(DTC_Status_289_Env,"DTC Not Set");
    if(i==7)
 putvalue(DTC_Status_290_Env,"DTC Not Set");
    if(i==8)
 putvalue(DTC_Status_291_Env,"DTC Not Set");
    if(i==9)
 putvalue(DTC_Status_292_Env,"DTC Not Set");
    if(i==10)
 putvalue(DTC_Status_293_Env,"DTC Not Set");
    if(i==11)
 putvalue(DTC_Status_294_Env,"DTC Not Set");
    if(i==12)
 putvalue(DTC_Status_295_Env,"DTC Not Set");
    if(i==13)
 putvalue(DTC_Status_296_Env,"DTC Not Set");
    if(i==14)
 putvalue(DTC_Status_297_Env,"DTC Not Set");
 if(i==15)
 putvalue(DTC_Status_298_Env,"DTC Not set");
 } 
else
 {
           if(i==0)
 putvalue(DTC_Status_283_Env,"DTC Not set");
    
    if((i==1)&&((dtc[0][0]!=0)&&(dtc[0][1]!=0)&&(dtc[0][2]!=0)))
 putvalue(DTC_Status_284_Env,"DTC Not set");
    
    if((i==2)&&((dtc[1][0]!=0)&&(dtc[1][1]!=0)&&(dtc[1][2]!=0)))
 putvalue(DTC_Status_285_Env,"DTC Not set");
    
    if((i==3)&&((dtc[2][0]!=0)&&(dtc[2][1]!=0)&&(dtc[2][2]!=0)))
 putvalue(DTC_Status_286_Env,"DTC Not set");
    
    if((i==4)&&((dtc[3][0]!=0)&&(dtc[3][1]!=0)&&(dtc[3][2]!=0)))
 putvalue(DTC_Status_287_Env,"DTC Not set");
        
    if((i==5)&&((dtc[4][0]!=0)&&(dtc[4][1]!=0)&&(dtc[4][2]!=0)))
 putvalue(DTC_Status_288_Env,"DTC Not set");
    
    if((i==6)&&((dtc[5][0]!=0)&&(dtc[5][1]!=0)&&(dtc[5][2]!=0)))
 putvalue(DTC_Status_289_Env,"DTC Not set");
    
    if((i==7)&&((dtc[6][0]!=0)&&(dtc[6][1]!=0)&&(dtc[6][2]!=0)))
 putvalue(DTC_Status_290_Env,"DTC Not set");
   
    if((i==8)&&((dtc[7][0]!=0)&&(dtc[7][1]!=0)&&(dtc[7][2]!=0)))
 putvalue(DTC_Status_291_Env,"DTC Not set");
    
    if((i==9)&&((dtc[8][0]!=0)&&(dtc[8][1]!=0)&&(dtc[8][2]!=0)))
      putvalue(DTC_Status_292_Env,"DTC Not set");
    
    if((i==10)&&((dtc[9][0]!=0)&&(dtc[9][1]!=0)&&(dtc[9][2]!=0)))
 putvalue(DTC_Status_293_Env,"DTC Not set");
    
    if((i==11)&&((dtc[10][0]!=0)&&(dtc[10][1]!=0)&&(dtc[10][2]!=0)))
 putvalue(DTC_Status_294_Env,"DTC Not set");
    
    if((i==12)&&((dtc[11][0]!=0)&&(dtc[11][1]!=0)&&(dtc[11][2]!=0)))
 putvalue(DTC_Status_295_Env,"DTC Not set");
    
    if((i==13)&&((dtc[12][0]!=0)&&(dtc[12][1]!=0)&&(dtc[12][2]!=0)))
 putvalue(DTC_Status_296_Env,"DTC Not set");
    
    if((i==14)&&((dtc[13][0]!=0)&&(dtc[13][1]!=0)&&(dtc[13][2]!=0)))
 putvalue(DTC_Status_297_Env,"DTC Not set");
    
    if((i==15)&&((dtc[14][0]!=0)&&(dtc[14][1]!=0)&&(dtc[14][2]!=0)))
 putvalue(DTC_Status_298_Env,"DTC Not set");
 } 
  }
  for(row=0;row<16;row++)
  { 
    
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }

  }
 else if((a[0]==0x23)&&(dtc_flag==2))
  {
    rr=this.dlc;
     if(cont==3)
    length=mod+6;
    if(rr==8)
     length=8;
    if(rr==9)
     length=12;
    if(rr==10)
     length=16;
    if(rr==11)
     length=20;
    if(rr==12)
     length=24;
    if(rr==13)
     length=32;
    if(rr==14)
     length=48;
    if(rr==15)
     length=64;
    
    for(i=1;i<length;i++)
    { 
      a[i]=this.byte(i);
      }
    backup2=a[1];
    backup3=a[2];
    backup_status=a[3];
      i=4;
for(row=1;row<16;row++)
  { 
    if(i==length)
      break;
    dtc[row][0]=(char)a[i];
    dtc[row][1]=(char)a[i+1];
    dtc[row][2]=(char)a[i+2];  
dtc_status[row]=a[i+3];
    i=i+4;  
  }
  dtc[0][0]=backup1;
  dtc[0][1]=backup2;
  dtc[0][2]=backup3;
 dtc_status[0]=backup_status;
  for(i=0;i<length;i++)
    { 
      a[i]=0;
      }
if((dtc[0][0]!=0)&&(dtc[0][1]!=0)&&(dtc[0][2]!=0))
  putvalue(DTC_Number_299_Env,dtc[0]);
if((dtc[1][0]!=0)&&(dtc[1][1]!=0)&&(dtc[1][2]!=0))
putvalue(DTC_Number_300_Env,dtc[1]);
if((dtc[2][0]!=0)&&(dtc[2][1]!=0)&&(dtc[2][2]!=0))
putvalue(DTC_Number_301_Env,dtc[2]);
if((dtc[3][0]!=0)&&(dtc[3][1]!=0)&&(dtc[3][2]!=0))
putvalue(DTC_Number_302_Env,dtc[3]);
if((dtc[4][0]!=0)&&(dtc[4][1]!=0)&&(dtc[4][2]!=0))
putvalue(DTC_Number_303_Env,dtc[4]);
if((dtc[5][0]!=0)&&(dtc[5][1]!=0)&&(dtc[5][2]!=0))
putvalue(DTC_Number_304_Env,dtc[5]);
if((dtc[6][0]!=0)&&(dtc[6][1]!=0)&&(dtc[6][2]!=0))
 putvalue(DTC_Number_305_Env,dtc[6]);
if((dtc[7][0]!=0)&&(dtc[7][1]!=0)&&(dtc[7][2]!=0))
putvalue(DTC_Number_306_Env,dtc[7]);
if((dtc[8][0]!=0)&&(dtc[8][1]!=0)&&(dtc[8][2]!=0))
putvalue(DTC_Number_307_Env,dtc[8]);
if((dtc[9][0]!=0)&&(dtc[9][1]!=0)&&(dtc[9][2]!=0))
putvalue(DTC_Number_308_Env,dtc[9]);
if((dtc[10][0]!=0)&&(dtc[10][1]!=0)&&(dtc[10][2]!=0))
putvalue(DTC_Number_309_Env,dtc[10]);
if((dtc[11][0]!=0)&&(dtc[11][1]!=0)&&(dtc[11][2]!=0))
putvalue(DTC_Number_310_Env,dtc[11]);
if((dtc[12][0]!=0)&&(dtc[12][1]!=0)&&(dtc[12][2]!=0))
putvalue(DTC_Number_311_Env,dtc[12]);
if((dtc[13][0]!=0)&&(dtc[13][1]!=0)&&(dtc[13][2]!=0))
putvalue(DTC_Number_312_Env,dtc[13]);
if((dtc[14][0]!=0)&&(dtc[14][1]!=0)&&(dtc[14][2]!=0))
putvalue(DTC_Number_313_Env,dtc[14]);
 if((dtc[15][0]!=0)&&(dtc[15][1]!=0)&&(dtc[15][2]!=0))
putvalue(DTC_Number_314_Env,dtc[15]);
  dtc_status[0]=backup_status;
   
    for(i=0;i<16;i++)
  {
if (dtc_status[i]==0x2F)
  {
    if(i==0)
 putvalue(DTC_Status_299_Env,"DTC Active");
    
    if(i==1)
 putvalue(DTC_Status_300_Env,"DTC Active");
    
    if(i==2)
 putvalue(DTC_Status_301_Env,"DTC Active");
    
    if(i==3)
 putvalue(DTC_Status_302_Env,"DTC Active");
    
    if(i==4)
 putvalue(DTC_Status_303_Env,"DTC Active");
        
    if(i==5)
 putvalue(DTC_Status_304_Env,"DTC Active");
    
    if(i==6)
 putvalue(DTC_Status_305_Env,"DTC Active");
    
    if(i==7)
 putvalue(DTC_Status_306_Env,"DTC Active");
   
    if(i==8)
 putvalue(DTC_Status_307_Env,"DTC Active");
    
    if(i==9)
 putvalue(DTC_Status_308_Env,"DTC Active");
    
    if(i==10)
 putvalue(DTC_Status_309_Env,"DTC Active");
    
    if(i==11)
 putvalue(DTC_Status_310_Env,"DTC Active");
    
    if(i==12)
 putvalue(DTC_Status_311_Env,"DTC Active");
    
    if(i==13)
 putvalue(DTC_Status_312_Env,"DTC Active");
    
    if(i==14)
 putvalue(DTC_Status_313_Env,"DTC Active");
    if(i==15)
 putvalue(DTC_Status_314_Env,"DTC Active");
   
     }

else if (dtc_status[i]==0x2E)
  {
        if(i==0)
 putvalue(DTC_Status_299_Env,"Fault Removed");
    
    if(i==1)
 putvalue(DTC_Status_300_Env,"Fault Removed");
    
    if(i==2)
 putvalue(DTC_Status_301_Env,"Fault Removed");
    
    if(i==3)
 putvalue(DTC_Status_302_Env,"Fault Removed");
    
    if(i==4)
 putvalue(DTC_Status_303_Env,"Fault Removed");
        
    if(i==5)
 putvalue(DTC_Status_304_Env,"Fault Removed");
    
    if(i==6)
 putvalue(DTC_Status_305_Env,"Fault Removed");
    
    if(i==7)
 putvalue(DTC_Status_306_Env,"Fault Removed");
   
    if(i==8)
 putvalue(DTC_Status_307_Env,"Fault Removed");
    
    if(i==9)
 putvalue(DTC_Status_308_Env,"Fault Removed");
    
    if(i==10)
 putvalue(DTC_Status_309_Env,"Fault Removed");
    
    if(i==11)
 putvalue(DTC_Status_310_Env,"Fault Removed");
    
    if(i==12)
 putvalue(DTC_Status_311_Env,"Fault Removed");
    
    if(i==13)
 putvalue(DTC_Status_312_Env,"Fault Removed");
    
    if(i==14)
 putvalue(DTC_Status_313_Env,"Fault Removed");
    
    if(i==15)
 putvalue(DTC_Status_314_Env,"Fault Removed");
  }
  else if (dtc_status[i]==0x28)
  {
     if(i==0)
 putvalue(DTC_Status_299_Env,"Pending DTC still Set");
    
    if(i==1)
 putvalue(DTC_Status_300_Env,"Pending DTC still Set");
    
    if(i==2)
 putvalue(DTC_Status_301_Env,"Pending DTC still Set");
    
    if(i==3)
 putvalue(DTC_Status_302_Env,"Pending DTC still Set");
    
    if(i==4)
 putvalue(DTC_Status_303_Env,"Pending DTC still Set");
        
    if(i==5)
 putvalue(DTC_Status_304_Env,"Pending DTC still Set");
    
    if(i==6)
 putvalue(DTC_Status_305_Env,"Pending DTC still Set");
    
    if(i==7)
 putvalue(DTC_Status_306_Env,"Pending DTC still Set");
   
    if(i==8)
 putvalue(DTC_Status_307_Env,"Pending DTC still Set");
    
    if(i==9)
 putvalue(DTC_Status_308_Env,"Pending DTC still Set");
    
    if(i==10)
 putvalue(DTC_Status_309_Env,"Pending DTC still Set");
    
    if(i==11)
 putvalue(DTC_Status_310_Env,"Pending DTC still Set");
    
    if(i==12)
 putvalue(DTC_Status_311_Env,"Pending DTC still Set");
    
    if(i==13)
 putvalue(DTC_Status_312_Env,"Pending DTC still Set");
    
    if(i==14)
 putvalue(DTC_Status_313_Env,"Pending DTC still Set");
    
    if(i==15)
 putvalue(DTC_Status_314_Env,"Pending DTC still Set");
  }
  
else if (dtc_status[i]==0x50)
  {
             if(i==0)
 putvalue(DTC_Status_299_Env,"DTC Not Set");
    
    if(i==1)
 putvalue(DTC_Status_300_Env,"DTC Not Set");
    
    if(i==2)
 putvalue(DTC_Status_301_Env,"DTC Not Set");
    
    if(i==3)
 putvalue(DTC_Status_302_Env,"DTC Not Set");
    
    if(i==4)
 putvalue(DTC_Status_303_Env,"DTC Not Set");
        
    if(i==5)
 putvalue(DTC_Status_304_Env,"DTC Not Set");
    
    if(i==6)
 putvalue(DTC_Status_305_Env,"DTC Not Set");
   
    if(i==7)
 putvalue(DTC_Status_306_Env,"DTC Not Set");
   
    if(i==8)
 putvalue(DTC_Status_307_Env,"DTC Not Set");
    
    if(i==9)
 putvalue(DTC_Status_308_Env,"DTC Not Set");
    
    if(i==10)
 putvalue(DTC_Status_309_Env,"DTC Not Set");
    
    if(i==11)
 putvalue(DTC_Status_310_Env,"DTC Not Set");
    
    if(i==12)
 putvalue(DTC_Status_311_Env,"DTC Not Set");
    
    if(i==13)
 putvalue(DTC_Status_312_Env,"DTC Not Set");
    
    if(i==14)
 putvalue(DTC_Status_313_Env,"DTC Not Set");
    
    if(i==15)
 putvalue(DTC_Status_314_Env,"DTC Not Set");
  } 
  else
  {
   
           if(i==0)
 putvalue(DTC_Status_299_Env,"DTC Not set");
    
    if((i==1)&&((dtc[0][0]!=0)&&(dtc[0][1]!=0)&&(dtc[0][2]!=0)))
 putvalue(DTC_Status_300_Env,"DTC Not set");
    
    if((i==2)&&((dtc[1][0]!=0)&&(dtc[1][1]!=0)&&(dtc[1][2]!=0)))
 putvalue(DTC_Status_301_Env,"DTC Not set");
    
    if((i==3)&&((dtc[2][0]!=0)&&(dtc[2][1]!=0)&&(dtc[2][2]!=0)))
 putvalue(DTC_Status_302_Env,"DTC Not set");
    
    if((i==4)&&((dtc[3][0]!=0)&&(dtc[3][1]!=0)&&(dtc[3][2]!=0)))
 putvalue(DTC_Status_303_Env,"DTC Not set");
        
    if((i==5)&&((dtc[4][0]!=0)&&(dtc[4][1]!=0)&&(dtc[4][2]!=0)))
 putvalue(DTC_Status_304_Env,"DTC Not set");
    
    if((i==6)&&((dtc[5][0]!=0)&&(dtc[5][1]!=0)&&(dtc[5][2]!=0)))
 putvalue(DTC_Status_305_Env,"DTC Not set");
    
    if((i==7)&&((dtc[6][0]!=0)&&(dtc[6][1]!=0)&&(dtc[6][2]!=0)))
 putvalue(DTC_Status_306_Env,"DTC Not set");
   
    if((i==8)&&((dtc[7][0]!=0)&&(dtc[7][1]!=0)&&(dtc[7][2]!=0)))
 putvalue(DTC_Status_307_Env,"DTC Not set");
    
    if((i==9)&&((dtc[8][0]!=0)&&(dtc[8][1]!=0)&&(dtc[8][2]!=0)))
      putvalue(DTC_Status_308_Env,"DTC Not set");
    
    if((i==10)&&((dtc[9][0]!=0)&&(dtc[9][1]!=0)&&(dtc[9][2]!=0)))
 putvalue(DTC_Status_309_Env,"DTC Not set");
    
    if((i==11)&&((dtc[10][0]!=0)&&(dtc[10][1]!=0)&&(dtc[10][2]!=0)))
 putvalue(DTC_Status_310_Env,"DTC Not set");
    
    if((i==12)&&((dtc[11][0]!=0)&&(dtc[11][1]!=0)&&(dtc[11][2]!=0)))
 putvalue(DTC_Status_311_Env,"DTC Not set");
    
    if((i==13)&&((dtc[12][0]!=0)&&(dtc[12][1]!=0)&&(dtc[12][2]!=0)))
 putvalue(DTC_Status_312_Env,"DTC Not set");
    
    if((i==14)&&((dtc[13][0]!=0)&&(dtc[13][1]!=0)&&(dtc[13][2]!=0)))
 putvalue(DTC_Status_313_Env,"DTC Not set");
    
    if((i==15)&&((dtc[14][0]!=0)&&(dtc[14][1]!=0)&&(dtc[14][2]!=0)))
 putvalue(DTC_Status_314_Env,"DTC Not set");
  }
  for(row=0;row<16;row++)
  { 
    dtc[row][0]=0;
    dtc[row][1]=0;
    dtc[row][2]=0;  
     dtc_status[i]=0;
  }
    }
  dtc_flag=3;
}
}

///////////////////////////////////////////Routine///////////////////////////////////////////////////////////


void Routine_Result1()
{
  switch(a[5])
  {
    case 0x00:  putValue(Routine_Status1_Env,"Routine Inactive");
                 putValue(Routine_Result1_Env,"No Result");
                setTimer(Clear_Display, 2500);
                 break;
    case 0x01:  putValue(Routine_Status1_Env,"Routine Inactive");
                 putValue(Routine_Result1_Env,"Incorrect Result");
                setTimer(Clear_Display, 2500);
                 break;
      case 0x02:  putValue(Routine_Status1_Env,"Routine Inactive");
                 putValue(Routine_Result1_Env,"Correct Result");
                setTimer(Clear_Display, 2500);
                 break;
      
     case 0x10: putValue(Routine_Status1_Env,"Routine Active");
                 putValue(Routine_Result1_Env,"No Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x11: putValue(Routine_Status1_Env,"Routine Active");
                 putValue(Routine_Result1_Env,"Incorrect Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    
    case 0x12: putValue(Routine_Status1_Env,"Routine Active");
                 putValue(Routine_Result1_Env,"Correct Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    
    case 0x20: putValue(Routine_Status1_Env,"Routine Aborted");
                 putValue(Routine_Result1_Env,"No Result");
                setTimer(Clear_Display, 2500);
                 break;
    case 0x21: putValue(Routine_Status1_Env,"Routine Aborted");
                 putValue(Routine_Result1_Env,"Incorrect Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x22: putValue(Routine_Status1_Env,"Routine Aborted");
                 putValue(Routine_Result1_Env,"Correct Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x30: putValue(Routine_Status1_Env,"Routine Execution Stuck");
                 putValue(Routine_Result1_Env,"No Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x31: putValue(Routine_Status1_Env,"Routine Execution Stuck");
                 putValue(Routine_Result1_Env,"Incorrect Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x32: putValue(Routine_Status1_Env,"Routine Execution Stuck");
                 putValue(Routine_Result1_Env,"Correct Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    
    case 0x40: putValue(Routine_Status1_Env,"Routine Finished Correctly");
                 putValue(Routine_Result1_Env,"No Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x41: putValue(Routine_Status1_Env,"Routine Finished Correctly");
                 putValue(Routine_Result1_Env,"Incorrect Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x42: putValue(Routine_Status1_Env,"Routine Finished Correctly");
                 putValue(Routine_Result1_Env,"Correct Result");
                setTimer(Clear_Display, 2500);
                 break;
      
    default:putValue(Routine_Status1_Env,"Wronge value ");
                 putValue(Routine_Result1_Env,"Wronge value ");
                setTimer(Clear_Display, 2500);
                 break;
     
  }

}


void Routine_Result2()
{
  switch(a[5])
  {
    case 0x00:  putValue(Routine_Status2_Env,"Routine Inactive");
                 putValue(Routine_Result2_Env,"No Result");
                setTimer(Clear_Display, 2500);
                 break;
    case 0x01:  putValue(Routine_Status2_Env,"Routine Inactive");
                 putValue(Routine_Result2_Env,"Incorrect Result");
                setTimer(Clear_Display, 2500);
                 break;
      case 0x02:  putValue(Routine_Status2_Env,"Routine Inactive");
                 putValue(Routine_Result2_Env,"Correct Result");
                setTimer(Clear_Display, 2500);
                 break;
      
     case 0x10: putValue(Routine_Status2_Env,"Routine Active");
                 putValue(Routine_Result2_Env,"No Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x11: putValue(Routine_Status2_Env,"Routine Active");
                 putValue(Routine_Result2_Env,"Incorrect Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    
    case 0x12: putValue(Routine_Status2_Env,"Routine Active");
                 putValue(Routine_Result2_Env,"Correct Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    
    case 0x20: putValue(Routine_Status2_Env,"Routine Aborted");
                 putValue(Routine_Result2_Env,"No Result");
                setTimer(Clear_Display, 2500);
                 break;
    case 0x21: putValue(Routine_Status2_Env,"Routine Aborted");
                 putValue(Routine_Result2_Env,"Incorrect Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x22: putValue(Routine_Status2_Env,"Routine Aborted");
                 putValue(Routine_Result2_Env,"Correct Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x30: putValue(Routine_Status2_Env,"Routine Execution Stuck");
                 putValue(Routine_Result2_Env,"No Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x31: putValue(Routine_Status2_Env,"Routine Execution Stuck");
                 putValue(Routine_Result2_Env,"Incorrect Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x32: putValue(Routine_Status2_Env,"Routine Execution Stuck");
                 putValue(Routine_Result2_Env,"Correct Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    
    case 0x40: putValue(Routine_Status2_Env,"Routine Finished Correctly");
                 putValue(Routine_Result2_Env,"No Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x41: putValue(Routine_Status2_Env,"Routine Finished Correctly");
                 putValue(Routine_Result2_Env,"Incorrect Result");
                setTimer(Clear_Display, 2500);
                 break;
    
    case 0x42: putValue(Routine_Status2_Env,"Routine Finished Correctly");
                 putValue(Routine_Result2_Env,"Correct Result");
                setTimer(Clear_Display, 2500);
                 break;
      
    default:putValue(Routine_Status2_Env,"Wronge value ");
                 putValue(Routine_Result2_Env,"Wronge value ");
                setTimer(Clear_Display, 2500);
                 break;
     
  }

}

/////////////////////////////////////////On Button Press////////////////////////////////////////////////


on envVar Default_Session_Env
{

  if(@this==1)
  {
 Diag_Req.PduLength=0x08;
 Diag_Req.byte(0)=0x02;
 Diag_Req.byte(1)=0x10;
 Diag_Req.byte(2)=0x01;
 
 triggerPDU(Diag_Req);

  }
}

on envVar Extended_Session_Env
{
  if(@this==1)
  { 
  Diag_Req.PduLength=0x08;
 Diag_Req.byte(0)=0x02;
 Diag_Req.byte(1)=0x10;
 Diag_Req.byte(2)=0x03;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);

  }
}

on envVar Aptiv_Session_Env
{

   if(@this==1)
  {
 Diag_Req.PduLength=0x08;
 Diag_Req.byte(0)=0x02;
 Diag_Req.byte(1)=0x10;
 Diag_Req.byte(2)=0x60;
 triggerPDU(Diag_Req);
 setTimer(Tw,300);

  }
}

//on envVar Programming_Session_Env
//{
//
// Diag_Req.PduLength=0x08;
// Diag_Req.byte(0)=0x02;
// Diag_Req.byte(1)=0x10;
// Diag_Req.byte(2)=0x02;
// 
// triggerPDU(Diag_Req);
//testWaitForTimeout(100);
//setTimer(Tp,300);
//
//}

on envVar Security_Access_Req
{

   if(@this==1)
  {
  Diag_Req.PduLength=0x08;
 Diag_Req.byte(0)=0x02;
 Diag_Req.byte(1)=0x27;
 Diag_Req.byte(2)=0x61;
 
 triggerPDU(Diag_Req);

  }
}

on envVar Security_Access_Key
{
   if(@this==1)
  {
 Diag_Req.PduLength=0x08;
 Diag_Req.byte(0)=0x06;
 Diag_Req.byte(1)=0x27;
 Diag_Req.byte(2)=0x62;
 Diag_Req.byte(3)=0x00;
 Diag_Req.byte(4)=0x01;
 Diag_Req.byte(5)=0x02;
 Diag_Req.byte(6)=0x03;
 triggerPDU(Diag_Req);

  }
}


on envVar Chademo_Testing_Env
  
{
  
  if(@this==1)
  {
    
     Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x04;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x01;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x00;
     Diag_Req.byte(5)=0x00;
     Diag_Req.byte(6)=0x00;
     Diag_Req.byte(7)=0x00;
    triggerPDU(Diag_Req);
    @Chademo_LED_Env=1;
    
  }
  else{
     Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x04;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x02;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x00;
     Diag_Req.byte(5)=0x00;
    Diag_Req.byte(6)=0x00;
    Diag_Req.byte(7)=0x00;
     
    triggerPDU(Diag_Req);
    @Chademo_LED_Env=0;
  }
  
  
}


on envVar Lock_1_Active
{
  if(@this==1)
  {
    
    if(@Lock_1_Exe_Env==0x00 && @Lock_1_Dir_Env== 0x00)
    {
    b[0]=0x00;
    }
    else if(@Lock_1_Exe_Env==0x01 && @Lock_1_Dir_Env== 0x00)
    {
       b[0]=0x01;
    }
    else if(@Lock_1_Exe_Env==0x00 && @Lock_1_Dir_Env== 0x01)
    {
       b[0]=0x02;
    }
 else if(@Lock_1_Exe_Env==0x01 && @Lock_1_Dir_Env== 0x01)
    {
       b[0]=0x03;
    }
  FlagR=2;
    Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x05;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x01;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x01;
     Diag_Req.byte(5)=b[0];
     Diag_Req.byte(6)=0x00;
     Diag_Req.byte(7)=0x00;
    triggerPDU(Diag_Req);
    @Lock_Motor1_LED_Env=1;
  
  }
  
  else{
    Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x04;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x02;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x01;
     Diag_Req.byte(5)=0x00;
     Diag_Req.byte(6)=0x00;
     Diag_Req.byte(7)=0x00;
    triggerPDU(Diag_Req);
   @Lock_Motor1_LED_Env=0;
  }
  
}
  
on envVar Lock_2_Active
{
  
   if(@this==1)
  {
      if(@Lock_2_Exe_Env==0x00 && @Lock_2_Dir_Env==0x00)
    {
      b[1]=0x00;
    }
    else if(@Lock_2_Exe_Env==0x01 && @Lock_2_Dir_Env==0x00)
    {
      b[1]=0x01;
    }
    
    else if(@Lock_2_Exe_Env==0x00 && @Lock_2_Dir_Env==0x01)
    {
      b[1]=0x02;
    }
    
    else if(@Lock_2_Exe_Env==0x01 && @Lock_2_Dir_Env==0x01)
    {
      b[1]=0x03;
    }
    FlagR=2;
     Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x05;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x01;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x03;
     Diag_Req.byte(5)=b[1];
    Diag_Req.byte(6)=0x00;
    Diag_Req.byte(7)=0x00;
    
    triggerPDU(Diag_Req);
     @Lock_Motor2_LED_Env=1;
  
  }
   else{
    Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x04;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x02;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x03;
     Diag_Req.byte(5)=0x00;
     Diag_Req.byte(6)=0x00;
     Diag_Req.byte(7)=0x00;
    triggerPDU(Diag_Req);
     @Lock_Motor2_LED_Env=0;
  }
 
}


on envVar Flap_1_Active
{
  
  if(@this==1)
  {
  
    if(@Flap_1_Exe_Env==0x00 && @Flap_1_Dir_Env==0x00)
    {
      b[2]=0x00;
    }
    else if(@Flap_1_Exe_Env==0x01 && @Flap_1_Dir_Env==0x00)
    {
      b[2]=0x01;
    }
   else if(@Flap_1_Exe_Env==0x00 && @Flap_1_Dir_Env==0x01)
    {
      b[2]=0x02;
    }
    else if(@Flap_1_Exe_Env==0x01 && @Flap_1_Dir_Env==0x01)
    {
      b[2]=0x03;
    }
    
      FlagR=2;
     Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x05;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x01;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x02;
     Diag_Req.byte(5)=b[2];
    Diag_Req.byte(6)=0x00;
    Diag_Req.byte(7)=0x00;
    
    triggerPDU(Diag_Req);
    @Flap_Motor1_LED_Env=1;
  
  }
   else{
    Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x04;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x02;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x02;
     Diag_Req.byte(5)=0x00;
     Diag_Req.byte(6)=0x00;
     Diag_Req.byte(7)=0x00;
    triggerPDU(Diag_Req);
    @Flap_Motor1_LED_Env=0;
  }
  
}


On envVar Flap_2_Active
{
    if(@this==1)
  {
    if(@Flap_2_Exe_Env==0x00 && @Flap_2_Dir_Env==0x00 )
    {
      b[3]=0x00;
    }
    
    else  if(@Flap_2_Exe_Env==0x01 && @Flap_2_Dir_Env==0x00 )
    {
      b[3]=0x01;
    }
    else if(@Flap_2_Exe_Env==0x00 && @Flap_2_Dir_Env==0x01 )
    {
      b[3]=0x02;
    }
    else  if(@Flap_2_Exe_Env==0x01 && @Flap_2_Dir_Env==0x01 )
    {
      b[3]=0x03;
    }
      FlagR=2;
    
     Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x05;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x01;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x04;
     Diag_Req.byte(5)=b[3];
    Diag_Req.byte(6)=0x00;
    Diag_Req.byte(7)=0x00;
    
    triggerPDU(Diag_Req);
    @Flap_Motor2_LED_Env=1;
  
  }
   else{
    Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x04;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x02;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x04;
     Diag_Req.byte(5)=0x00;
     Diag_Req.byte(6)=0x00;
     Diag_Req.byte(7)=0x00;
    triggerPDU(Diag_Req);
    @Flap_Motor2_LED_Env=0;
  }
}

On envVar LED_OP_Start
{
  
    if(@this==1)
  {
    
   if(@LED_Exe_Env==0x01) 
   {
    b[2]=0x01;
  }
  
  else {
    
     b[2]=0x00;
  }
  
  if(@LED_OP_Active==0x01)
  {
    b[3]=0x64;
     @SearchlightAC_LED_Env=1;
  }
  else{
    b[3]=0x00;
     @SearchlightAC_LED_Env=0;
  }
  
  if(@SearchLight_DC_Env==0x01)
  {
    b[4]=0x64;
      @SearchlightDC_LED_Env=1;
  }
  else
  {
     b[4]=0x00;
      @SearchlightDC_LED_Env=0;
  }
  
  if(@MFL_1_DC_Env==0x01)
  {
    b[5]=0x64;
    @MF1DC_LED_Env=1;
  }
  else{
   
    b[5]=0x00;
    @MF1DC_LED_Env=0;
  }
  
  if(@MFL_2_DC_Env==0x01)
  {
    b[6]=0x64;
     @MF2DC_LED_Env=1;
    
  }
  else
  {
     b[6]=0x00;
     @MF2DC_LED_Env=0;
  }
  
  if(@MFL_1_AC_Env==0x01)
  {
   b[7]=0x64; 
     @MF1AC_LED_Env=1;
  }
  else{
    
    b[7]=0x00;
     @MF1AC_LED_Env=0;
  }
  
  if(@MFL_2_AC_Env==0x01)
  {
   b[8]=0x64; 
    @MF2AC_LED_Env=1;
  }
  else{
    
    b[8]=0x00;
    @MF2AC_LED_Env=0;
  }
  
  
   FlagR=1;
  
  
   // Diag_Req.Payload=0x11;
     Diag_Req.PduLength=0x10;
     Diag_Req.byte(0)=0x00;
     Diag_Req.byte(1)=0x0B;
     Diag_Req.byte(2)=0x31;
     Diag_Req.byte(3)=0x01;
     Diag_Req.byte(4)=0xF0;
     Diag_Req.byte(5)=0x05;
     Diag_Req.byte(6)=b[2];
     Diag_Req.byte(7)=b[3];
     Diag_Req.byte(8)=b[4];
     Diag_Req.byte(9)=b[5];
     Diag_Req.byte(10)=b[6];
     Diag_Req.byte(11)=b[7];
     Diag_Req.byte(12)=b[8];
     Diag_Req.byte(13)=0xCC;
     Diag_Req.byte(14)=0xCC;
     Diag_Req.byte(15)=0xCC;
    triggerPDU(Diag_Req);
  
  }
  
}

//On envVar LED_OP_Active
//{
//  
//    if(@this==1)
//  {
//    
//   if(@LED_Exe_Env==0x01) 
//   {
//    b[2]=0x01;
//  }
//  
//  else {
//    
//     b[2]=0x00;
//  }
// 
//  FlagR=1;
//  
//  
//   // Diag_Req.Payload=0x11;
//     Diag_Req.PduLength=0x10;
//     Diag_Req.byte(0)=0x00;
//     Diag_Req.byte(1)=0x0B;
//     Diag_Req.byte(2)=0x31;
//     Diag_Req.byte(3)=0x01;
//     Diag_Req.byte(4)=0xF0;
//     Diag_Req.byte(5)=0x05;
//     Diag_Req.byte(6)=b[2];
//     Diag_Req.byte(7)=0x64;
//     Diag_Req.byte(8)=0x00;
//     Diag_Req.byte(9)=0x00;
//     Diag_Req.byte(10)=0x00;
//     Diag_Req.byte(11)=0x00;
//     Diag_Req.byte(12)=0x00;
//     Diag_Req.byte(13)=0xCC;
//     Diag_Req.byte(14)=0xCC;
//     Diag_Req.byte(15)=0xCC;
//  
//    
//    triggerPDU(Diag_Req);
//   @SearchlightAC_LED_Env=1;
//  
//  }
//  
// else{
//     Diag_Req.PduLength=0x08;
//     Diag_Req.byte(0)=0x04;
//     Diag_Req.byte(1)=0x31;
//     Diag_Req.byte(2)=0x02;
//     Diag_Req.byte(3)=0xF0;
//     Diag_Req.byte(4)=0x05;
//     Diag_Req.byte(5)=0x00;
//    Diag_Req.byte(6)=0x00;
//    Diag_Req.byte(7)=0x00;
//     
//    triggerPDU(Diag_Req);
//  @SearchlightAC_LED_Env=0;
//  }
//  
//}
//
//on envVar SearchLight_DC_Env
//  
//{
//  
//  
//    if(@this==1)
//  {
//    
//   if(@LED_Exe_Env==0x01) 
//   {
//    b[2]=0x01;
//  }
//  
//  else {
//    
//     b[2]=0x00;
//  }
//  
// FlagR=1;
//   // Diag_Req.Payload=0x11;
//     Diag_Req.PduLength=0x10;
//     Diag_Req.byte(0)=0x00;
//     Diag_Req.byte(1)=0x0B;
//     Diag_Req.byte(2)=0x31;
//     Diag_Req.byte(3)=0x01;
//     Diag_Req.byte(4)=0xF0;
//     Diag_Req.byte(5)=0x05;
//     Diag_Req.byte(6)=b[2];
//     Diag_Req.byte(7)=0x00;
//     Diag_Req.byte(8)=0x32;
//     Diag_Req.byte(9)=0x00;
//     Diag_Req.byte(10)=0x00;
//     Diag_Req.byte(11)=0x00;
//     Diag_Req.byte(12)=0x00;
//     Diag_Req.byte(13)=0xCC;
//     Diag_Req.byte(14)=0xCC;
//     Diag_Req.byte(15)=0xCC;
//  
//    
//    triggerPDU(Diag_Req);
//  @SearchlightDC_LED_Env=1;
//  
//  }
//  
// else{
//     Diag_Req.PduLength=0x08;
//     Diag_Req.byte(0)=0x04;
//     Diag_Req.byte(1)=0x31;
//     Diag_Req.byte(2)=0x02;
//     Diag_Req.byte(3)=0xF0;
//     Diag_Req.byte(4)=0x05;
//     Diag_Req.byte(5)=0x00;
//    Diag_Req.byte(6)=0x00;
//    Diag_Req.byte(7)=0x00;
//     
//    triggerPDU(Diag_Req);
//  @SearchlightDC_LED_Env=0;
//  }
// 
//}
//
//on envVar MFL_1_DC_Env
//{
//  
//  
//    if(@this==1)
//  {
//    
//   if(@LED_Exe_Env==0x01) 
//   {
//    b[2]=0x01;
//  }
//  
//  else {
//    
//     b[2]=0x00;
//  }
//  
//  FlagR=1;
//  
//   // Diag_Req.Payload=0x11;
//     Diag_Req.PduLength=0x10;
//     Diag_Req.byte(0)=0x00;
//     Diag_Req.byte(1)=0x0B;
//     Diag_Req.byte(2)=0x31;
//     Diag_Req.byte(3)=0x01;
//     Diag_Req.byte(4)=0xF0;
//     Diag_Req.byte(5)=0x05;
//     Diag_Req.byte(6)=b[2];
//     Diag_Req.byte(7)=0x00;
//     Diag_Req.byte(8)=0x00;
//     Diag_Req.byte(9)=0x32;
//     Diag_Req.byte(10)=0x00;
//     Diag_Req.byte(11)=0x00;
//     Diag_Req.byte(12)=0x00;
//     Diag_Req.byte(13)=0xCC;
//     Diag_Req.byte(14)=0xCC;
//     Diag_Req.byte(15)=0xCC;
//  
//    
//    triggerPDU(Diag_Req);
//  @MF1DC_LED_Env=1;
//  
//  }
//  
// 
//  else{
//     Diag_Req.PduLength=0x08;
//     Diag_Req.byte(0)=0x04;
//     Diag_Req.byte(1)=0x31;
//     Diag_Req.byte(2)=0x02;
//     Diag_Req.byte(3)=0xF0;
//     Diag_Req.byte(4)=0x05;
//     Diag_Req.byte(5)=0x00;
//    Diag_Req.byte(6)=0x00;
//    Diag_Req.byte(7)=0x00;
//     
//    triggerPDU(Diag_Req);
//     @MF1DC_LED_Env=0;
//  }
// 
//}
//on envVar MFL_2_DC_Env
//{
// 
//  
//  
//    if(@this==1)
//  {
//    
//   if(@LED_Exe_Env==0x01) 
//   {
//    b[2]=0x01;
//  }
//  
//  else {
//    
//     b[2]=0x00;
//  }
//  
// FlagR=1;
//   // Diag_Req.Payload=0x11;
//     Diag_Req.PduLength=0x10;
//     Diag_Req.byte(0)=0x00;
//     Diag_Req.byte(1)=0x0B;
//     Diag_Req.byte(2)=0x31;
//     Diag_Req.byte(3)=0x01;
//     Diag_Req.byte(4)=0xF0;
//     Diag_Req.byte(5)=0x05;
//     Diag_Req.byte(6)=b[2];
//     Diag_Req.byte(7)=0x00;
//     Diag_Req.byte(8)=0x00;
//     Diag_Req.byte(9)=0x00;
//     Diag_Req.byte(10)=0x32;
//     Diag_Req.byte(11)=0x00;
//     Diag_Req.byte(12)=0x00;
//     Diag_Req.byte(13)=0xCC;
//     Diag_Req.byte(14)=0xCC;
//     Diag_Req.byte(15)=0xCC;
//  
//    
//    triggerPDU(Diag_Req);
//  @MF2DC_LED_Env=1;
//  
//  }
//  
// else{
//     Diag_Req.PduLength=0x08;
//     Diag_Req.byte(0)=0x04;
//     Diag_Req.byte(1)=0x31;
//     Diag_Req.byte(2)=0x02;
//     Diag_Req.byte(3)=0xF0;
//     Diag_Req.byte(4)=0x05;
//     Diag_Req.byte(5)=0x00;
//    Diag_Req.byte(6)=0x00;
//    Diag_Req.byte(7)=0x00;
//     
//    triggerPDU(Diag_Req);
//  @MF2DC_LED_Env=0;
//  
//  }
// 
//  
//}
//
//on envVar MFL_1_AC_Env
//{
// 
//  
//    if(@this==1)
//  {
//    
//   if(@LED_Exe_Env==0x01) 
//   {
//    b[2]=0x01;
//  }
//  
//  else {
//    
//     b[2]=0x00;
//  }
//  
//  FlagR=1;
//  
//   // Diag_Req.Payload=0x11;
//     Diag_Req.PduLength=0x10;
//     Diag_Req.byte(0)=0x00;
//     Diag_Req.byte(1)=0x0B;
//     Diag_Req.byte(2)=0x31;
//     Diag_Req.byte(3)=0x01;
//     Diag_Req.byte(4)=0xF0;
//     Diag_Req.byte(5)=0x05;
//     Diag_Req.byte(6)=b[2];
//     Diag_Req.byte(7)=0x00;
//     Diag_Req.byte(8)=0x00;
//     Diag_Req.byte(9)=0x00;
//     Diag_Req.byte(10)=0x00;
//     Diag_Req.byte(11)=0x32;
//     Diag_Req.byte(12)=0x00;
//     Diag_Req.byte(13)=0xCC;
//     Diag_Req.byte(14)=0xCC;
//     Diag_Req.byte(15)=0xCC;
//  
//    
//    triggerPDU(Diag_Req);
//  @MF1AC_LED_Env=1;
//  
//  } 
//  
// else{
//     Diag_Req.PduLength=0x08;
//     Diag_Req.byte(0)=0x04;
//     Diag_Req.byte(1)=0x31;
//     Diag_Req.byte(2)=0x02;
//     Diag_Req.byte(3)=0xF0;
//     Diag_Req.byte(4)=0x05;
//     Diag_Req.byte(5)=0x00;
//    Diag_Req.byte(6)=0x00;
//    Diag_Req.byte(7)=0x00;
//     
//    triggerPDU(Diag_Req);
//  @MF1AC_LED_Env=0;
//  }
// 
//  
//  
//}
//
//on envVar MFL_2_AC_Env
//{
//    if(@this==1)
//  {
//    
//   if(@LED_Exe_Env==0x01) 
//   {
//    b[2]=0x01;
//  }
//  
//  else {
//    
//     b[2]=0x00;
//  }
//  
// FlagR=1;
//   // Diag_Req.Payload=0x11;
//     Diag_Req.PduLength=0x10;
//     Diag_Req.byte(0)=0x00;
//     Diag_Req.byte(1)=0x0B;
//     Diag_Req.byte(2)=0x31;
//     Diag_Req.byte(3)=0x01;
//     Diag_Req.byte(4)=0xF0;
//     Diag_Req.byte(5)=0x05;
//     Diag_Req.byte(6)=b[2];
//     Diag_Req.byte(7)=0x00;
//     Diag_Req.byte(8)=0x00;
//     Diag_Req.byte(9)=0x00;
//     Diag_Req.byte(10)=0x00;
//     Diag_Req.byte(11)=0x00;
//     Diag_Req.byte(12)=0x32;
//     Diag_Req.byte(13)=0xCC;
//     Diag_Req.byte(14)=0xCC;
//     Diag_Req.byte(15)=0xCC;
//  
//    
//    triggerPDU(Diag_Req);
//  @MF2AC_LED_Env=1;
//  
//  }
//  
// 
// else{
//     Diag_Req.PduLength=0x08;
//     Diag_Req.byte(0)=0x04;
//     Diag_Req.byte(1)=0x31;
//     Diag_Req.byte(2)=0x02;
//     Diag_Req.byte(3)=0xF0;
//     Diag_Req.byte(4)=0x05;
//     Diag_Req.byte(5)=0x00;
//    Diag_Req.byte(6)=0x00;
//    Diag_Req.byte(7)=0x00;
//     
//    triggerPDU(Diag_Req);
//  @MF2AC_LED_Env=0;
//  }
// 
//  
//}
//

 on envVar Chademo_Test_Result
{
  
    if(@this==1)
  {
  putvalue(Routine_Result1_Env," ");
  putValue(Routine_Status1_Env," ");
     Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x04;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x03;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x00;
     Diag_Req.byte(5)=0x00;
    Diag_Req.byte(6)=0x00;
    Diag_Req.byte(7)=0x00;
     
    triggerPDU(Diag_Req);
      
  }
  
  
}
on envVar Lock_1_Active_Result
{
  
    if(@this==1)
  {
    putvalue(Routine_Result2_Env," ");
   putValue(Routine_Status2_Env," ");
     Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x04;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x03;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x01;
     
    triggerPDU(Diag_Req);
  
  }

  
}
 on envVar Flap_1_Active_Result
{
  
   if(@this==1)
  {
    putvalue(Routine_Result2_Env," ");
   putValue(Routine_Status2_Env," ");
     Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x04;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x03;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x02;
     
    triggerPDU(Diag_Req);
  
  }
  
}

 on envVar Lock_2_Active_Result
{
  
   if(@this==1)
  {
     putvalue(Routine_Result2_Env," ");
   putValue(Routine_Status2_Env," ");
   
     Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x04;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x03;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x03;
     
    triggerPDU(Diag_Req);
  
  }
  
}

 on envVar Flap_2_Active_Result
{
  
   if(@this==1)
  { putvalue(Routine_Result2_Env," ");
   putValue(Routine_Status2_Env," ");
   
     Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x04;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x03;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x04;
     
    triggerPDU(Diag_Req);
  
  }
  
}

on envVar LED_OP_Active_Result
{
  if(@this==1)
  {
    putvalue(Routine_Result1_Env," ");
   putValue(Routine_Status1_Env," ");
    
     Diag_Req.PduLength=0x08;
     Diag_Req.byte(0)=0x04;
     Diag_Req.byte(1)=0x31;
     Diag_Req.byte(2)=0x03;
     Diag_Req.byte(3)=0xF0;
     Diag_Req.byte(4)=0x05;
     
    triggerPDU(Diag_Req);
  
  }
  
}

on envVar Tester_Present_Env
{
  if(@this==1)
  {
    setTimerCyclic(TesterPresent,3000);
  }
  
else 
  {
    cancelTimer(TesterPresent);
  }
  
}

on envVar CAN_FD_Env
{
  if(@this==1)
  {
    @CAN_FD_LED_Env=1;
    setTimerCyclic(NM_Timer,10);
  }
  else{
   @CAN_FD_LED_Env=0;
    cancelTimer(NM_Timer);
  }
}

//on envVar LIN_Env
//{
//   if(@this==1)
//  {
   
//    setTimerCyclic(LIN1_Timer,10);
//  }
//  else{
  
//    cancelTimer(LIN1_Timer);
//  }
  
//}
  
  on envVar FD05_Send_Env
  {
    if(@this==1)
    {
       Diag_Req.PduLength=0x08;
       Diag_Req.byte(0)=0x07;
       Diag_Req.byte(1)=0x2E;
       Diag_Req.byte(2)=0xFD;
       Diag_Req.byte(3)=0x05;
       Diag_Req.byte(4)=getvalue(Light_AC_Write_Env);  
       Diag_Req.byte(5)=getvalue(Light_DC_Write_Env);  
       Diag_Req.byte(6)=getvalue(MF_DC1_Write_Env);  
       Diag_Req.byte(7)=getvalue(MF_DC2_Write_Env);
       
      triggerPDU(Diag_Req);
    }
    
  }

on envVar SW_Vn_Read_Env
{
     if(@this==1)
  {
    flag=0;
    
 Diag_Req.PduLength=0x08;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xF1;
 Diag_Req.byte(3)=0x89;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar HW_Vn_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x08;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xF1;
 Diag_Req.byte(3)=0xF0;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar Flap_Inlet1_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x08;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xF1;
 Diag_Req.byte(3)=0xF2;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar Analog_Input_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x00;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar PWM_Duty_Cycle_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x02;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar PWM_Frequency_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x02;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar MAC_Address_PLC_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x04;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar CPU_Load_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xF1;
 Diag_Req.byte(3)=0xF1;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar Digital_Input_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x01;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar PWM_Output_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x05;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar FD03_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x03;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

  on envVar FD03_Write_Env
  {
    if(@this==1)
    {
      x[0]=0;
      x[0]=x[0]|getValue(Light_Driver1_Select0_Write_Env);
      x[0]=x[0]<<1;
      x[0]=x[0]|getValue(Light_Driver1_Select1_Write_Env);
      x[0]=x[0]<<1;
      x[0]=x[0]|getValue(Light_Driver1_Enabler_Write_Env);
      x[0]=x[0]<<1;
      x[0]=x[0]|getValue(Chademo_pin_k_Write_Env);
      x[0]=x[0]<<1;
      x[0]=x[0]|getValue(Motor_Mode_Write_Env);
      x[0]=x[0]<<1;
      x[0]=x[0]|getValue(Motor1_Switch_Write_Env);
      x[0]=x[0]<<1;
      x[0]=x[0]|getValue(Motor2_Switch_Write_Env);
      x[0]=x[0]<<1;
      x[0]=x[0]|getValue(Motor1_2_Switch_Write_Env);
      
      x[1]=0;
      x[1]=x[1]|getValue(Motor3_4_Switch_Write_Env);
      x[1]=x[1]<<1;
      x[1]=x[1]|getValue(Motor3_Switch_Write_Env);
      x[1]=x[1]<<1;
      x[1]=x[1]|getValue(Motor4_Switch_Write_Env);
      x[1]=x[1]<<1;
      x[1]=x[1]|getValue(Pilot_Diag_Write_Env);
      x[1]=x[1]<<1;
      x[1]=x[1]|getValue(Control_Pilot_Switch_Write_Env);
      x[1]=x[1]<<1;
      x[1]=x[1]|getValue(Diag_Mode_Write_Env);
      x[1]=x[1]<<1;
      x[1]=x[1]|getValue(Ref_5V_Voltage_Write_Env);
      x[1]=x[1]<<1;
      x[1]=x[1]|getValue(Ref_12V_Voltage_Write_Env);
      
      x[2]=0;
      x[2]=x[2]|getValue(Motor_Driver_Sleep_Write_Env);
      x[2]=x[2]<<1;
      x[2]=x[2]|getValue(CAN_Trans_Standby_Write_Env);
      x[2]=x[2]<<6;
      
      Diag_Req.PduLength=0x08;
       Diag_Req.byte(0)=0x06;
       Diag_Req.byte(1)=0x2E;
       Diag_Req.byte(2)=0xFD;
       Diag_Req.byte(3)=0x03;
       Diag_Req.byte(4)=x[0];
       Diag_Req.byte(5)=x[1];
       Diag_Req.byte(6)=x[2];          
      triggerPDU(Diag_Req);
    }
    
  }
  
  on envVar SBC_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x06;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}


on envVar SBC_Register_List_Env
{
   
  if(@this==0x01)
  { 
 sbc_temp=0;
    z[1]=0x01;
putvalue(SBC_Bit7_Name_Env,"Mode_1");
putvalue(SBC_Bit6_Name_Env,"Mode_0");
putvalue(SBC_Bit5_Name_Env,"VCC3_ON");
putvalue(SBC_Bit4_Name_Env,"VCC2_ON_1");
putvalue(SBC_Bit3_Name_Env,"VCC2_ON_0");
putvalue(SBC_Bit2_Name_Env,"VCC1_OV_RST");
putvalue(SBC_Bit1_Name_Env,"VCC1_RT_0");
putvalue(SBC_Bit0_Name_Env,"VCC1_RT_1");
  }
  
  if(@this==0x02)
  {

 sbc_temp=1;
    z[1]=0x02;
putvalue(SBC_Bit7_Name_Env,"VCC3_V_CFG");
putvalue(SBC_Bit6_Name_Env,"SFT_RESET_RO");
putvalue(SBC_Bit5_Name_Env,"FO_ON");
putvalue(SBC_Bit4_Name_Env,"VCC3_VS_UV_OFF");
putvalue(SBC_Bit3_Name_Env,"VCC3_LSD");
putvalue(SBC_Bit2_Name_Env,"RESERVED");
putvalue(SBC_Bit1_Name_Env,"VCC3_LS_STP_ON");
putvalue(SBC_Bit0_Name_Env,"CFG");
  
  }
 
 if(@this==0x03)
  {
 //sbc_temp=2; 
    z[1]=0x03;
putvalue(SBC_Bit7_Name_Env,"CHECKSUM");
putvalue(SBC_Bit6_Name_Env,"WD_STM_EN_0");
putvalue(SBC_Bit5_Name_Env,"WD_WIN");
putvalue(SBC_Bit4_Name_Env,"WD_EN_WK_BUS");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"WD_TIMER_2");
putvalue(SBC_Bit1_Name_Env,"WD_TIMER_1");
putvalue(SBC_Bit0_Name_Env,"WD_TIMER_0");
  
  } 
  
  
 if(@this==0x04)
  {
 //sbc_temp=2; 
    z[1]=0x04;
putvalue(SBC_Bit7_Name_Env,"LIN_FLASH");
putvalue(SBC_Bit6_Name_Env,"LIN_LSM");
putvalue(SBC_Bit5_Name_Env,"LIN_TXD_TO");
putvalue(SBC_Bit4_Name_Env,"LIN1_1");
putvalue(SBC_Bit3_Name_Env,"LIN1_0");
putvalue(SBC_Bit2_Name_Env,"CAN_2");
putvalue(SBC_Bit1_Name_Env,"CAN_1");
putvalue(SBC_Bit0_Name_Env,"CAN_0");
  
  }  
  
 if(@this==0x05)
  {
 //sbc_temp=2; 
    z[1]=0x05;
putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"RESERVED");
putvalue(SBC_Bit5_Name_Env,"I_PEAK_TH");
putvalue(SBC_Bit4_Name_Env,"RESERVED");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"RESERVED");
putvalue(SBC_Bit1_Name_Env,"RESERVED");
putvalue(SBC_Bit0_Name_Env,"RESERVED");
  
  }  
    
  
  if(@this==0x06)
  {
 sbc_temp=2; 
    z[1]=0x06;
putvalue(SBC_Bit7_Name_Env,"TIMER2_EN");
putvalue(SBC_Bit6_Name_Env,"TIMER1_EN");
putvalue(SBC_Bit5_Name_Env,"RESERVED");
putvalue(SBC_Bit4_Name_Env,"RESERVED");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"VCC3_LS_STP_ON");
putvalue(SBC_Bit1_Name_Env,"RESERVED");
putvalue(SBC_Bit0_Name_Env,"RESERVED");
  
  }
  if(@this==0x07)
  {

 sbc_temp=3; 
    z[1]=0x07;
putvalue(SBC_Bit7_Name_Env,"INT_Global");
putvalue(SBC_Bit6_Name_Env,"RESERVED");
putvalue(SBC_Bit5_Name_Env,"WK_MEAS");
putvalue(SBC_Bit4_Name_Env,"RESERVED");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"WK3_EN");
putvalue(SBC_Bit1_Name_Env,"WK2_EN");
putvalue(SBC_Bit0_Name_Env,"WK1_EN");
  
  }
  if(@this==0x08)
  {

 sbc_temp=4; 
    z[1]=0x08;
putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"RESERVED");
putvalue(SBC_Bit5_Name_Env,"WK3_PUPD1");
putvalue(SBC_Bit4_Name_Env,"WK3_PUPD0");
putvalue(SBC_Bit3_Name_Env,"WK2_PUPD1");
putvalue(SBC_Bit2_Name_Env,"WK2_PUPD0");
putvalue(SBC_Bit1_Name_Env,"WK1_PUPD1");
putvalue(SBC_Bit0_Name_Env,"WK1_PUPD0");
  
  }
  if(@this==0x09)
  {

sbc_temp=5;
    z[1]=0x09;
putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"RESERVED");
putvalue(SBC_Bit5_Name_Env,"WK3_FLT1");
putvalue(SBC_Bit4_Name_Env,"WK3_FLT0");
putvalue(SBC_Bit3_Name_Env,"WK2_FLT1");
putvalue(SBC_Bit2_Name_Env,"WK2_FLT0");
putvalue(SBC_Bit1_Name_Env,"WK1_FLT1");
putvalue(SBC_Bit0_Name_Env,"WK1_FLT0");
  
  }
  
    if(@this==0x0A)
  {

//sbc_temp=5;
    z[1]=0x0D;
putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"TIMER1_ON_2");
putvalue(SBC_Bit5_Name_Env,"TIMER1_ON_1");
putvalue(SBC_Bit4_Name_Env,"TIMER1_ON_0");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"TIMER1_PER_2");
putvalue(SBC_Bit1_Name_Env,"TIMER1_PER_1");
putvalue(SBC_Bit0_Name_Env,"TIMER1_PER_0");
  
  }
  
      if(@this==0x0B)
  {

//sbc_temp=5;
    z[1]=0x0E;
putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"TIMER2_ON_2");
putvalue(SBC_Bit5_Name_Env,"TIMER2_ON_1");
putvalue(SBC_Bit4_Name_Env,"TIMER2_ON_0");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"TIMER2_PER_2");
putvalue(SBC_Bit1_Name_Env,"TIMER2_PER_1");
putvalue(SBC_Bit0_Name_Env,"TIMER2_PER_0");
  
  }
  
  
  if(@this==0x0C)
  {
sbc_temp=6;
    z[1]=0x10;
putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"HS_OV_EN");
putvalue(SBC_Bit5_Name_Env,"HS_UV_EN");
putvalue(SBC_Bit4_Name_Env,"HS_OV_UV_EN");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"RESERVED");
putvalue(SBC_Bit1_Name_Env,"RESERVED");
putvalue(SBC_Bit0_Name_Env,"RESERVED");
  
  }
  if(@this==0x0D)
  {

sbc_temp=7;
    z[1]=0x14;
putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"HS2_2");
putvalue(SBC_Bit5_Name_Env,"HS2_1");
putvalue(SBC_Bit4_Name_Env,"HS2_0");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"HS1_2");
putvalue(SBC_Bit1_Name_Env,"HS1_1");
putvalue(SBC_Bit0_Name_Env,"HS1_0");
  
  }
  if(@this==0x0E)
  {
 
sbc_temp=8;
    z[1]=0x15;
putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"HS4_2");
putvalue(SBC_Bit5_Name_Env,"HS4_1");
putvalue(SBC_Bit4_Name_Env,"HS4_0");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"HS3_2");
putvalue(SBC_Bit1_Name_Env,"HS3_1");
putvalue(SBC_Bit0_Name_Env,"HS3_0");
  }
  
    if(@this==0x0F)
  {
 
//sbc_temp=8;
    z[1]=0x17;
putvalue(SBC_Bit7_Name_Env,"FO_DC_1");
putvalue(SBC_Bit6_Name_Env,"FO_DC_0");
putvalue(SBC_Bit5_Name_Env,"GPIO2_2");
putvalue(SBC_Bit4_Name_Env,"GPIO2_1");
putvalue(SBC_Bit3_Name_Env,"GPIO2_0");
putvalue(SBC_Bit2_Name_Env,"GPIO1_2");
putvalue(SBC_Bit1_Name_Env,"GPIO1_1");
putvalue(SBC_Bit0_Name_Env,"GPIO1_0");
  }
  
if(@this==0x10)
  {
sbc_temp=9;
    z[1]=0x18;
putvalue(SBC_Bit7_Name_Env,"PWM1_DC7");
putvalue(SBC_Bit6_Name_Env,"PWM1_DC6");
putvalue(SBC_Bit5_Name_Env,"PWM1_DC5");
putvalue(SBC_Bit4_Name_Env,"PWM1_DC4");
putvalue(SBC_Bit3_Name_Env,"PWM1_DC3");
putvalue(SBC_Bit2_Name_Env,"PWM1_DC2");
putvalue(SBC_Bit1_Name_Env,"PWM1_DC1");
putvalue(SBC_Bit0_Name_Env,"PWM1_DC0");
 
  }
  
  
  if(@this==0x11)
  {
sbc_temp=10;
    z[1]=0x19;
putvalue(SBC_Bit7_Name_Env,"PWM2_DC7");
putvalue(SBC_Bit6_Name_Env,"PWM2_DC6");
putvalue(SBC_Bit5_Name_Env,"PWM2_DC5");
putvalue(SBC_Bit4_Name_Env,"PWM2_DC4");
putvalue(SBC_Bit3_Name_Env,"PWM2_DC3");
putvalue(SBC_Bit2_Name_Env,"PWM2_DC2");
putvalue(SBC_Bit1_Name_Env,"PWM2_DC1");
putvalue(SBC_Bit0_Name_Env,"PWM2_DC0");
  }
   if(@this==0x12)
  {
 sbc_temp=11;
    z[1]=0x1C;
putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"RESERVED");
putvalue(SBC_Bit5_Name_Env,"RESERVED");
putvalue(SBC_Bit4_Name_Env,"RESERVED");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"PWM2_FREQ_0");
putvalue(SBC_Bit1_Name_Env,"RESERVED");
putvalue(SBC_Bit0_Name_Env,"PWM1_FREQ_0");
 
  }
  
    if(@this==0x13)
  {
 //sbc_temp=11;
    z[1]=0x1E;
putvalue(SBC_Bit7_Name_Env,"SYS_STAT_7");
putvalue(SBC_Bit6_Name_Env,"SYS_STAT_6");
putvalue(SBC_Bit5_Name_Env,"SYS_STAT_5");
putvalue(SBC_Bit4_Name_Env,"SYS_STAT_4");
putvalue(SBC_Bit3_Name_Env,"SYS_STAT_3");
putvalue(SBC_Bit2_Name_Env,"SYS_STAT_2");
putvalue(SBC_Bit1_Name_Env,"SYS_STAT_1");
putvalue(SBC_Bit0_Name_Env,"SYS_STAT_0");
 
  }

if(@this==0x14)
  {
 sbc_temp=12;
    z[1]=0x40;
 putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"VS_UV");
putvalue(SBC_Bit5_Name_Env,"RESERVED");
putvalue(SBC_Bit4_Name_Env,"VCC3_OC");
putvalue(SBC_Bit3_Name_Env,"VCC3_UV");
putvalue(SBC_Bit2_Name_Env,"VCC3_OT");
putvalue(SBC_Bit1_Name_Env,"VCC1_OV");
putvalue(SBC_Bit0_Name_Env,"VCC1_WARN");
  }
  
  
if(@this==0x15)
  {
 sbc_temp=13;
    z[1]=0x41;
 putvalue(SBC_Bit7_Name_Env,"POR");
putvalue(SBC_Bit6_Name_Env,"VSHS_UV");
putvalue(SBC_Bit5_Name_Env,"VSHS_OV");
putvalue(SBC_Bit4_Name_Env,"VCC2_OT");
putvalue(SBC_Bit3_Name_Env,"VCC2_UV");
putvalue(SBC_Bit2_Name_Env,"VCC1_SC");
putvalue(SBC_Bit1_Name_Env,"VCC1_UV_FS");
putvalue(SBC_Bit0_Name_Env,"VCC1_UV");
 
  }
  
  if(@this==0x16)
  {
 sbc_temp=14;
    z[1]=0x42;
 putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"RESERVED");
putvalue(SBC_Bit5_Name_Env,"RESERVED");
putvalue(SBC_Bit4_Name_Env,"RESERVED");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"TSD2");
putvalue(SBC_Bit1_Name_Env,"TSD1");
putvalue(SBC_Bit0_Name_Env,"TPW");
 
  }
  
   if(@this==0x17)
  {
 sbc_temp=15;
    z[1]=0x43;
putvalue(SBC_Bit7_Name_Env,"DEV_STAT_1");
putvalue(SBC_Bit6_Name_Env,"DEV_STAT_2");
putvalue(SBC_Bit5_Name_Env,"RESERVED");
putvalue(SBC_Bit4_Name_Env,"RESERVED");
putvalue(SBC_Bit3_Name_Env,"WD_FAIL_1");
putvalue(SBC_Bit2_Name_Env,"WD_FAIL_0");
putvalue(SBC_Bit1_Name_Env,"SPI_FAIL");
putvalue(SBC_Bit0_Name_Env,"FAILURE");
 
  }
  
  if(@this==0x18)
  {
 sbc_temp=16;
    z[1]=0x44;
putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"LIN_1_FAIL_1");
putvalue(SBC_Bit5_Name_Env,"LIN_1_FAIL_0");
putvalue(SBC_Bit4_Name_Env,"CANTO");
putvalue(SBC_Bit3_Name_Env,"SYSERR");
putvalue(SBC_Bit2_Name_Env,"CAN_FAIL_1");
putvalue(SBC_Bit1_Name_Env,"CAN_FAIL_0");
putvalue(SBC_Bit0_Name_Env,"VCAN_UV");
 
  }
  
  if(@this==0x19)
  {
 sbc_temp=17;
    z[1]=0x45;
    putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"RESERVED");
putvalue(SBC_Bit5_Name_Env,"RESERVED");
putvalue(SBC_Bit4_Name_Env,"RESERVED");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"RESERVED");
putvalue(SBC_Bit1_Name_Env,"RESERVED");
putvalue(SBC_Bit0_Name_Env,"RESERVED");
 
  }
  
   if(@this==0x1A)
  {
 sbc_temp=18;
    z[1]=0x46;
     putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"LIN1_WU");
putvalue(SBC_Bit5_Name_Env,"CAN_WU");
putvalue(SBC_Bit4_Name_Env,"TIMER_WU");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"WK3_WU");
putvalue(SBC_Bit1_Name_Env,"WK2_WU");
putvalue(SBC_Bit0_Name_Env,"WK1_WU");
 
  }
  
  if(@this==0x1B)
  {
 sbc_temp=19;
    z[1]=0x47;
     putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"RESERVED");
putvalue(SBC_Bit5_Name_Env,"GPIO2_WU");
putvalue(SBC_Bit4_Name_Env,"GPIO1_WU");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"RESERVED");
putvalue(SBC_Bit1_Name_Env,"RESERVED");
putvalue(SBC_Bit0_Name_Env,"RESERVED");
 
  }
  
  if(@this==0x1C)
  {
 sbc_temp=20;
    z[1]=0x48;
     putvalue(SBC_Bit7_Name_Env,"SBC_DEV_LVL");
putvalue(SBC_Bit6_Name_Env,"CFGP");
putvalue(SBC_Bit5_Name_Env,"GPIO2_LVL");
putvalue(SBC_Bit4_Name_Env,"GPIO1_LVL");
putvalue(SBC_Bit3_Name_Env,"RESERVED");
putvalue(SBC_Bit2_Name_Env,"WK3_LVL");
putvalue(SBC_Bit1_Name_Env,"WK2_LVL");
putvalue(SBC_Bit0_Name_Env,"WK1_LVL");
 
  }
  
  if(@this==0x1D)
  {
 sbc_temp=21;
    z[1]=0x54;
     putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"RESERVED");
putvalue(SBC_Bit5_Name_Env,"RESERVED");
putvalue(SBC_Bit4_Name_Env,"RESERVED");
putvalue(SBC_Bit3_Name_Env,"HS4_OC_OT");
putvalue(SBC_Bit2_Name_Env,"HS3_OC_OT");
putvalue(SBC_Bit1_Name_Env,"HS2_OC_OT");
putvalue(SBC_Bit0_Name_Env,"HS1_OC_OT");
 
  }
  
  if(@this==0x1E)
 
  {
 sbc_temp=22;
    z[1]=0x55;
      putvalue(SBC_Bit7_Name_Env,"RESERVED");
putvalue(SBC_Bit6_Name_Env,"RESERVED");
putvalue(SBC_Bit5_Name_Env,"RESERVED");
putvalue(SBC_Bit4_Name_Env,"RESERVED");
putvalue(SBC_Bit3_Name_Env,"HS4_OL");
putvalue(SBC_Bit2_Name_Env,"HS3_OL");
putvalue(SBC_Bit1_Name_Env,"HS2_OL");
putvalue(SBC_Bit0_Name_Env,"HS1_OL");
 
  }
  
}




  on envVar SBC_Write_Env
{
     if(@this==1)
  {
    
   
    
z[0]=0;
z[0]=z[0]|getvalue(SBC_Bit7_Write_Env);
z[0]=z[0]<<1;
z[0]=z[0]|getvalue(SBC_Bit6_Write_Env);
z[0]=z[0]<<1;
z[0]=z[0]|getvalue(SBC_Bit5_Write_Env);
z[0]=z[0]<<1;
z[0]=z[0]|getvalue(SBC_Bit4_Write_Env);
z[0]=z[0]<<1;
z[0]=z[0]|getvalue(SBC_Bit3_Write_Env);
z[0]=z[0]<<1;
z[0]=z[0]|getvalue(SBC_Bit2_Write_Env);
z[0]=z[0]<<1;
z[0]=z[0]|getvalue(SBC_Bit1_Write_Env);
z[0]=z[0]<<1;
z[0]=z[0]|getvalue(SBC_Bit0_Write_Env);
    
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x05;
 Diag_Req.byte(1)=0x2E;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x07;
 Diag_Req.byte(4)=z[1];
 Diag_Req.byte(5)=z[0];
   
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar MTR_Chip_ID_Env
{
   
  if(@this==0x01)
  { 
    chip[0]=0x01;
    mtr_value=0;
  }
  
  if(@this==0x02)
  {
    chip[0]=0x02;
    mtr_value=6;
  
  }
  if(@this==0x03)
  { 
    chip[0]=0x03;
    mtr_value=12;
  
  }
}
  
  
  on envVar MTR_Register_Address_Env
{
   
  if(@this==0x01)
  { 
    Add[0]=0x00;
    mtr_temp=0;
putvalue(MTR_Bit7_Name_Env,"FAULT");
putvalue(MTR_Bit6_Name_Env,"WDFLT");
putvalue(MTR_Bit5_Name_Env,"GDF");
putvalue(MTR_Bit4_Name_Env,"OCP");
putvalue(MTR_Bit3_Name_Env,"PVDD_UVFL");
putvalue(MTR_Bit2_Name_Env,"VCP_UVFL");
putvalue(MTR_Bit1_Name_Env,"OTSD");
putvalue(MTR_Bit0_Name_Env,"OTW");
  }
  
  if(@this==0x02)
  {
    Add[0]=0x01;
    mtr_temp=1;
putvalue(MTR_Bit7_Name_Env,"H2_GDF");
putvalue(MTR_Bit6_Name_Env,"L2_GDF");
putvalue(MTR_Bit5_Name_Env,"H1_GDF");
putvalue(MTR_Bit4_Name_Env,"L1_GDF");
putvalue(MTR_Bit3_Name_Env,"H2_VDS");
putvalue(MTR_Bit2_Name_Env,"L2_VDS");
putvalue(MTR_Bit1_Name_Env,"H1_VDS");
putvalue(MTR_Bit0_Name_Env,"L1_VDS");
  
  }
  if(@this==0x03)
  {
    Add[0]=0x02;
    mtr_temp=2;
putvalue(MTR_Bit7_Name_Env,"RESERVED");
putvalue(MTR_Bit6_Name_Env,"RESERVED");
putvalue(MTR_Bit5_Name_Env,"LOCK");
putvalue(MTR_Bit4_Name_Env,"LOCK");
putvalue(MTR_Bit3_Name_Env,"LOCK");
putvalue(MTR_Bit2_Name_Env,"IN1/PH");
putvalue(MTR_Bit1_Name_Env,"IN2/EN");
putvalue(MTR_Bit0_Name_Env,"CLR_FLT");
  
  }
  
    if(@this==0x04)
  { 
    Add[0]=0x03;
    mtr_temp=3;
putvalue(MTR_Bit7_Name_Env,"TDEAD");
putvalue(MTR_Bit6_Name_Env,"TDEAD");
putvalue(MTR_Bit5_Name_Env,"WD_EN");
putvalue(MTR_Bit4_Name_Env,"WD_DLY");
putvalue(MTR_Bit3_Name_Env,"WD_DLY");
putvalue(MTR_Bit2_Name_Env,"IDRIVE");
putvalue(MTR_Bit1_Name_Env,"IDRIVE");
putvalue(MTR_Bit0_Name_Env,"IDRIVE");
  }
  
  if(@this==0x05)
  {

    Add[0]=0x04;
    mtr_temp=4;
putvalue(MTR_Bit7_Name_Env,"SO_LIM");
putvalue(MTR_Bit6_Name_Env,"VDS");
putvalue(MTR_Bit5_Name_Env,"VDS");
putvalue(MTR_Bit4_Name_Env,"VDS");
putvalue(MTR_Bit3_Name_Env,"DIS_H2_VDS");
putvalue(MTR_Bit2_Name_Env,"DIS_L2_VDS");
putvalue(MTR_Bit1_Name_Env,"DIS_H1_VDS");
putvalue(MTR_Bit0_Name_Env,"DIS_L1_VDS");
  
  }
  if(@this==0x06)
  {
 Add[0]=0x05;
    mtr_temp=5;
putvalue(MTR_Bit7_Name_Env,"TOFF");
putvalue(MTR_Bit6_Name_Env,"TOFF");
putvalue(MTR_Bit5_Name_Env,"CHOP_DIS");
putvalue(MTR_Bit4_Name_Env,"VREF_SCL");
putvalue(MTR_Bit3_Name_Env,"VREF_SCL");
putvalue(MTR_Bit2_Name_Env,"SH_EN");
putvalue(MTR_Bit1_Name_Env,"GAIN_CS");
putvalue(MTR_Bit0_Name_Env,"GAIN_CS");
  
  }
  
}

on envVar MTR_Write_Env
{
     if(@this==1)
  {
    
mtr[0]=0;
mtr[0]=mtr[0]|getvalue(MTR_Bit7_Write_Env);
mtr[0]=mtr[0]<<1;
mtr[0]=mtr[0]|getvalue(MTR_Bit6_Write_Env);
mtr[0]=mtr[0]<<1;
mtr[0]=mtr[0]|getvalue(MTR_Bit5_Write_Env);
mtr[0]=mtr[0]<<1;
mtr[0]=mtr[0]|getvalue(MTR_Bit4_Write_Env);
mtr[0]=mtr[0]<<1;
mtr[0]=mtr[0]|getvalue(MTR_Bit3_Write_Env);
mtr[0]=mtr[0]<<1;
mtr[0]=mtr[0]|getvalue(MTR_Bit2_Write_Env);
mtr[0]=mtr[0]<<1;
mtr[0]=mtr[0]|getvalue(MTR_Bit1_Write_Env);
mtr[0]=mtr[0]<<1;
mtr[0]=mtr[0]|getvalue(MTR_Bit0_Write_Env);
    
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x06;
 Diag_Req.byte(1)=0x2E;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x09;
 Diag_Req.byte(4)=chip[0];
 Diag_Req.byte(5)=Add[0];
 Diag_Req.byte(6)=mtr[0];
   
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar MTR_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x08;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar QCA_Register_Address_Env
{
   
  if(@this==0x01)
  { 
 qca_temp=0;
    qca[0]=0x01;
    qca[1]=0x00;
putvalue(QCA_Bit15_Name_Env,"RESERVED");
putvalue(QCA_Bit14_Name_Env,"RESERVED");
putvalue(QCA_Bit13_Name_Env,"RESERVED");
putvalue(QCA_Bit12_Name_Env,"RESERVED");
putvalue(QCA_Bit11_Name_Env,"BFR_SIZE");
putvalue(QCA_Bit10_Name_Env,"BFR_SIZE");
putvalue(QCA_Bit9_Name_Env,"BFR_SIZE");
putvalue(QCA_Bit8_Name_Env,"BFR_SIZE");
putvalue(QCA_Bit7_Name_Env,"BFR_SIZE");
putvalue(QCA_Bit6_Name_Env,"BFR_SIZE");
putvalue(QCA_Bit5_Name_Env,"BFR_SIZE");
putvalue(QCA_Bit4_Name_Env,"BFR_SIZE");
putvalue(QCA_Bit3_Name_Env,"BFR_SIZE");
putvalue(QCA_Bit2_Name_Env,"BFR_SIZE");
putvalue(QCA_Bit1_Name_Env,"BFR_SIZE");
putvalue(QCA_Bit0_Name_Env,"BFR_SIZE");
  }
  
  if(@this==0x02)
  {

 qca_temp=2;
    qca[0]=0x02;
    qca[1]=0x00;
putvalue(QCA_Bit15_Name_Env,"RESERVED");
putvalue(QCA_Bit14_Name_Env,"RESERVED");
putvalue(QCA_Bit13_Name_Env,"RESERVED");
putvalue(QCA_Bit12_Name_Env,"RESERVED");
putvalue(QCA_Bit11_Name_Env,"SPACE_AVA");
putvalue(QCA_Bit10_Name_Env,"SPACE_AVA");
putvalue(QCA_Bit9_Name_Env,"SPACE_AVA");
putvalue(QCA_Bit8_Name_Env,"SPACE_AVA");
putvalue(QCA_Bit7_Name_Env,"SPACE_AVA");
putvalue(QCA_Bit6_Name_Env,"SPACE_AVA");
putvalue(QCA_Bit5_Name_Env,"SPACE_AVA");
putvalue(QCA_Bit4_Name_Env,"SPACE_AVA");
putvalue(QCA_Bit3_Name_Env,"SPACE_AVA");
putvalue(QCA_Bit2_Name_Env,"SPACE_AVA");
putvalue(QCA_Bit1_Name_Env,"SPACE_AVA");
putvalue(QCA_Bit0_Name_Env,"SPACE_AVA");
  
  }
  if(@this==0x03)
  {
 qca_temp=4; 
    qca[0]=0x03;
    qca[1]=0x00;
putvalue(QCA_Bit15_Name_Env,"RESERVED");
putvalue(QCA_Bit14_Name_Env,"RESERVED");
putvalue(QCA_Bit13_Name_Env,"RESERVED");
putvalue(QCA_Bit12_Name_Env,"RESERVED");
putvalue(QCA_Bit11_Name_Env,"BYTE_AVA");
putvalue(QCA_Bit10_Name_Env,"BYTE_AVA");
putvalue(QCA_Bit9_Name_Env,"BYTE_AVA");
putvalue(QCA_Bit8_Name_Env,"BYTE_AVA");
putvalue(QCA_Bit7_Name_Env,"BYTE_AVA");
putvalue(QCA_Bit6_Name_Env,"BYTE_AVA");
putvalue(QCA_Bit5_Name_Env,"BYTE_AVA");
putvalue(QCA_Bit4_Name_Env,"BYTE_AVA");
putvalue(QCA_Bit3_Name_Env,"BYTE_AVA");
putvalue(QCA_Bit2_Name_Env,"BYTE_AVA");
putvalue(QCA_Bit1_Name_Env,"BYTE_AVA");
putvalue(QCA_Bit0_Name_Env,"BYTE_AVA");
  
  }
  if(@this==0x04)
  {

 qca_temp=6; 
    qca[0]=0x04;
    qca[1]=0x00;
putvalue(QCA_Bit15_Name_Env,"RESERVED");
putvalue(QCA_Bit14_Name_Env,"RESERVED");
putvalue(QCA_Bit13_Name_Env,"RESERVED");
putvalue(QCA_Bit12_Name_Env,"RESERVED");
putvalue(QCA_Bit11_Name_Env,"RESERVED");
putvalue(QCA_Bit10_Name_Env,"RESERVED");
putvalue(QCA_Bit9_Name_Env,"RESERVED");
putvalue(QCA_Bit8_Name_Env,"RESERVED");
putvalue(QCA_Bit7_Name_Env,"SPI_IO_ENABLE");
putvalue(QCA_Bit6_Name_Env,"SOC_CORE_RST");
putvalue(QCA_Bit5_Name_Env,"RESERVED");
putvalue(QCA_Bit4_Name_Env,"RESERVED");
putvalue(QCA_Bit3_Name_Env,"RESERVED");
putvalue(QCA_Bit2_Name_Env,"SWAP");
putvalue(QCA_Bit1_Name_Env,"16BIT_MODE");
putvalue(QCA_Bit0_Name_Env,"RESERVED");
  
  }
  if(@this==0x05)
  {

 qca_temp=8; 
    qca[0]=0x05;
    qca[1]=0x00;
putvalue(QCA_Bit15_Name_Env,"RESERVED");
putvalue(QCA_Bit14_Name_Env,"RESERVED");
putvalue(QCA_Bit13_Name_Env,"RESERVED");
putvalue(QCA_Bit12_Name_Env,"RESERVED");
putvalue(QCA_Bit11_Name_Env,"RESERVED");
putvalue(QCA_Bit10_Name_Env,"RESERVED");
putvalue(QCA_Bit9_Name_Env,"RESERVED");
putvalue(QCA_Bit8_Name_Env,"RESERVED");
putvalue(QCA_Bit7_Name_Env,"RESERVED");
putvalue(QCA_Bit6_Name_Env,"RESERVED");
putvalue(QCA_Bit5_Name_Env,"RESERVED");
putvalue(QCA_Bit4_Name_Env,"WRBUF_ERROR");
putvalue(QCA_Bit3_Name_Env,"RDBUF_ERROR");
putvalue(QCA_Bit2_Name_Env,"RESERVED");
putvalue(QCA_Bit1_Name_Env,"RESERVED");
putvalue(QCA_Bit0_Name_Env,"RESERVED");
  
  }
  if(@this==0x06)
  {

qca_temp=10;
    qca[0]=0x0C;
    qca[1]=0x00;
putvalue(QCA_Bit15_Name_Env,"RESERVED");
putvalue(QCA_Bit14_Name_Env,"RESERVED");
putvalue(QCA_Bit13_Name_Env,"RESERVED");
putvalue(QCA_Bit12_Name_Env,"RESERVED");
putvalue(QCA_Bit11_Name_Env,"RESERVED");
putvalue(QCA_Bit10_Name_Env,"RESERVED");
putvalue(QCA_Bit9_Name_Env,"RESERVED");
putvalue(QCA_Bit8_Name_Env,"RESERVED");
putvalue(QCA_Bit7_Name_Env,"RESERVED");
putvalue(QCA_Bit6_Name_Env,"CPU_ON");
putvalue(QCA_Bit5_Name_Env,"RESERVED");
putvalue(QCA_Bit4_Name_Env,"RESERVED");
putvalue(QCA_Bit3_Name_Env,"RESERVED");
putvalue(QCA_Bit2_Name_Env,"WRBUF_ERROR");
putvalue(QCA_Bit1_Name_Env,"RDBUF_ERROR");
putvalue(QCA_Bit0_Name_Env,"PACKET_AVAILABLE");
  
  }
  if(@this==0x07)
  {
qca_temp=12;
    qca[0]=0x0D;
    qca[1]=0x00;
putvalue(QCA_Bit15_Name_Env,"RESERVED");
putvalue(QCA_Bit14_Name_Env,"RESERVED");
putvalue(QCA_Bit13_Name_Env,"RESERVED");
putvalue(QCA_Bit12_Name_Env,"RESERVED");
putvalue(QCA_Bit11_Name_Env,"RESERVED");
putvalue(QCA_Bit10_Name_Env,"WRBUF_BELOW_WATERMARK");
putvalue(QCA_Bit9_Name_Env,"RESERVED");
putvalue(QCA_Bit8_Name_Env,"RESERVED");
putvalue(QCA_Bit7_Name_Env,"RESERVED");
putvalue(QCA_Bit6_Name_Env,"CPU_ON");
putvalue(QCA_Bit5_Name_Env,"RESERVED");
putvalue(QCA_Bit4_Name_Env,"RESERVED");
putvalue(QCA_Bit3_Name_Env,"RESERVED");
putvalue(QCA_Bit2_Name_Env,"WRBUF_ERROR");
putvalue(QCA_Bit1_Name_Env,"RDBUF_ERROR");
putvalue(QCA_Bit0_Name_Env,"PACKET_AVAILABLE");
  
  }
  if(@this==0x08)
  {

qca_temp=14;
    qca[0]=0x12;
    qca[1]=0x00;
putvalue(QCA_Bit15_Name_Env,"RESREVED");
putvalue(QCA_Bit14_Name_Env,"RESERVED");
putvalue(QCA_Bit13_Name_Env,"RESERVED");
putvalue(QCA_Bit12_Name_Env,"RESERVED");
putvalue(QCA_Bit11_Name_Env,"WATERMARK");
putvalue(QCA_Bit10_Name_Env,"WATERMARK");
putvalue(QCA_Bit9_Name_Env,"WATERMARK");
putvalue(QCA_Bit8_Name_Env,"WATERMARK");
putvalue(QCA_Bit7_Name_Env,"WATERMARK");
putvalue(QCA_Bit6_Name_Env,"WATERMARK");
putvalue(QCA_Bit5_Name_Env,"WATERMARK");
putvalue(QCA_Bit4_Name_Env,"WATERMARK");
putvalue(QCA_Bit3_Name_Env,"WATERMARK");
putvalue(QCA_Bit2_Name_Env,"WATERMARK");
putvalue(QCA_Bit1_Name_Env,"WATERMARK");
putvalue(QCA_Bit0_Name_Env,"WATERMARK");
  
  }
  if(@this==0x09)
  {
 
qca_temp=16;
    qca[0]=0x13;
    qca[1]=0x00;
putvalue(QCA_Bit15_Name_Env,"RESERVED");
putvalue(QCA_Bit14_Name_Env,"RESERVED");
putvalue(QCA_Bit13_Name_Env,"RESERVED");
putvalue(QCA_Bit12_Name_Env,"RESERVED");
putvalue(QCA_Bit11_Name_Env,"RESERVED");
putvalue(QCA_Bit10_Name_Env,"WATERMARK");
putvalue(QCA_Bit9_Name_Env,"WATERMARK");
putvalue(QCA_Bit8_Name_Env,"WATERMARK");
putvalue(QCA_Bit7_Name_Env,"WATERMARK");
putvalue(QCA_Bit6_Name_Env,"WATERMARK");
putvalue(QCA_Bit5_Name_Env,"WATERMARK");
putvalue(QCA_Bit4_Name_Env,"WATERMARK");
putvalue(QCA_Bit3_Name_Env,"WATERMARK");
putvalue(QCA_Bit2_Name_Env,"WATERMARK");
putvalue(QCA_Bit1_Name_Env,"WATERMARK");
putvalue(QCA_Bit0_Name_Env,"WATERMARK");
  }
  
if(@this==0x0A)
  {
qca_temp=18;
    qca[0]=0x1A;
    qca[1]=0x00;
putvalue(QCA_Bit15_Name_Env,"SIGNATURE");
putvalue(QCA_Bit14_Name_Env,"SIGNATURE");
putvalue(QCA_Bit13_Name_Env,"SIGNATURE");
putvalue(QCA_Bit12_Name_Env,"SIGNATURE");
putvalue(QCA_Bit11_Name_Env,"SIGNATURE");
putvalue(QCA_Bit10_Name_Env,"SIGNATURE");
putvalue(QCA_Bit9_Name_Env,"SIGNATURE");
putvalue(QCA_Bit8_Name_Env,"SIGNATURE");
putvalue(QCA_Bit7_Name_Env,"SIGNATURE");
putvalue(QCA_Bit6_Name_Env,"SIGNATURE");
putvalue(QCA_Bit5_Name_Env,"SIGNATURE");
putvalue(QCA_Bit4_Name_Env,"SIGNATURE");
putvalue(QCA_Bit3_Name_Env,"SIGNATURE");
putvalue(QCA_Bit2_Name_Env,"SIGNATURE");
putvalue(QCA_Bit1_Name_Env,"SIGNATURE");
putvalue(QCA_Bit0_Name_Env,"SIGNATURE");
 
  }
  
  
  if(@this==0x0B)
  {
qca_temp=20;
    qca[0]=0x1B;
    qca[1]=0x00;
putvalue(QCA_Bit15_Name_Env,"RESERVED");
putvalue(QCA_Bit14_Name_Env,"RESERVED");
putvalue(QCA_Bit13_Name_Env,"RESERVED");
putvalue(QCA_Bit12_Name_Env,"RESERVED");
putvalue(QCA_Bit11_Name_Env,"RESERVED");
putvalue(QCA_Bit10_Name_Env,"RESERVED");
putvalue(QCA_Bit9_Name_Env,"RESERVED");
putvalue(QCA_Bit8_Name_Env,"RESERVED");
putvalue(QCA_Bit7_Name_Env,"RESERVED");
putvalue(QCA_Bit6_Name_Env,"RESERVED");
putvalue(QCA_Bit5_Name_Env,"RESERVED");
putvalue(QCA_Bit4_Name_Env,"RESERVED");
putvalue(QCA_Bit3_Name_Env,"RESERVED");
putvalue(QCA_Bit2_Name_Env,"RESERVED");
putvalue(QCA_Bit1_Name_Env,"MULTI_CS_ENABLE");
putvalue(QCA_Bit0_Name_Env,"PKT_AVA_INTR_MODE");
  }
  
}

on envVar QCA_Write_Env
{
     if(@this==1)
  {
    
qca[3]=0;
qca[3]=qca[3]|getvalue(QCA_Bit15_Write_Env);
qca[3]=qca[3]<<1;
qca[3]=qca[3]|getvalue(QCA_Bit14_Write_Env);
qca[3]=qca[3]<<1;
qca[3]=qca[3]|getvalue(QCA_Bit13_Write_Env);
qca[3]=qca[3]<<1;
qca[3]=qca[3]|getvalue(QCA_Bit12_Write_Env);
qca[3]=qca[3]<<1;
qca[3]=qca[3]|getvalue(QCA_Bit11_Write_Env);
qca[3]=qca[3]<<1;
qca[3]=qca[3]|getvalue(QCA_Bit10_Write_Env);
qca[3]=qca[3]<<1;
qca[3]=qca[3]|getvalue(QCA_Bit9_Write_Env);
qca[3]=qca[3]<<1;
qca[3]=qca[3]|getvalue(QCA_Bit8_Write_Env);
    
qca[2]=0;
qca[2]=qca[2]|getvalue(QCA_Bit7_Write_Env);
qca[2]=qca[2]<<1;
qca[2]=qca[2]|getvalue(QCA_Bit6_Write_Env);
qca[2]=qca[2]<<1;
qca[2]=qca[2]|getvalue(QCA_Bit5_Write_Env);
qca[2]=qca[2]<<1;
qca[2]=qca[2]|getvalue(QCA_Bit4_Write_Env);
qca[2]=qca[2]<<1;
qca[2]=qca[2]|getvalue(QCA_Bit3_Write_Env);
qca[2]=qca[2]<<1;
qca[2]=qca[2]|getvalue(QCA_Bit2_Write_Env);
qca[2]=qca[2]<<1;
qca[2]=qca[2]|getvalue(QCA_Bit1_Write_Env);
qca[2]=qca[2]<<1;
qca[2]=qca[2]|getvalue(QCA_Bit0_Write_Env);
    

    
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x07;
 Diag_Req.byte(1)=0x2E;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x0B;
 Diag_Req.byte(4)=qca[0];
 Diag_Req.byte(5)=qca[1];
 Diag_Req.byte(6)=qca[3];
 Diag_Req.byte(7)=qca[2];
   
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar QCA_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x22;
 Diag_Req.byte(2)=0xFD;
 Diag_Req.byte(3)=0x0A;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}

on envVar DTC_Read_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x06;
 Diag_Req.byte(1)=0x19;
 Diag_Req.byte(2)=0x06;
 Diag_Req.byte(3)=DTC[0];
 Diag_Req.byte(4)=DTC[1];
 Diag_Req.byte(5)=DTC[2];
 Diag_Req.byte(6)=0xFF;
 triggerPDU(Diag_Req);
    @Clear_DTC_LED_Env=0;
  setTimer(Tw,300);
  }
}

on envVar Confirmed_DTC_Read_Env
{
     if(@this==1)
  {
    confirmed_DTC_Flag=1;
    //write("Confirmed DTC Flag = %d",confirmed_DTC_Flag);
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x19;
 Diag_Req.byte(2)=0x02;
 Diag_Req.byte(3)=0x2F;
 triggerPDU(Diag_Req);
    @Clear_DTC_LED_Env=0;
    
  setTimer(Tw,300);
  }
}

on envVar All_DTC_Read_Env
{
     if(@this==1)
  {
    confirmed_DTC_Flag=0;
    //write("Confirmed DTC Flag = %d",confirmed_DTC_Flag);
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x03;
 Diag_Req.byte(1)=0x19;
 Diag_Req.byte(2)=0x02;
 Diag_Req.byte(3)=0xFF;
 triggerPDU(Diag_Req);
    @Clear_DTC_LED_Env=0;
    
  setTimer(Tw,300);
  }
}


on envVar Clear_DTC_Env
{
     if(@this==1)
  {
 Diag_Req.PduLength=0x8;
 Diag_Req.byte(0)=0x01;
 Diag_Req.byte(1)=0x04;
 Diag_Req.byte(2)=0x00;
 Diag_Req.byte(3)=0x00;
 Diag_Req.byte(4)=0x00;
 triggerPDU(Diag_Req);
  setTimer(Tw,300);
  }
}


on envVar DTC_Read_List_Env
{
  if(@this==0x01)
  { 
DTC[0]=0xD0;
DTC[1]=0x12;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xD01200");
  }
    
  if(@this==0x02)
  { 
DTC[0]=0xD0;
DTC[1]=0x11;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xD01100");
  }

  if(@this==0x03)
  { 
DTC[0]=0xD4;
DTC[1]=0x02;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xD40200");
  }

  if(@this==0x04)
  { 
DTC[0]=0xD4;
DTC[1]=0x01;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xD40100");
  }

  if(@this==0x05)
  { 
DTC[0]=0xD0;
DTC[1]=0x00;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xD00000");
  }
    
  if(@this==0x06)
  { 
DTC[0]=0xD0;
DTC[1]=0x00;
DTC[2]=0x01;
putvalue(DTC_Number_Env,"0xD00001");
  }

  if(@this==0x07)
  { 
DTC[0]=0xD0;
DTC[1]=0x00;
DTC[2]=0x04;
putvalue(DTC_Number_Env,"0xD00004");
  }

  if(@this==0x08)
  { 
DTC[0]=0xD0;
DTC[1]=0x00;
DTC[2]=0x03;
putvalue(DTC_Number_Env,"0xD00003");
  }

  if(@this==0x09)
  { 
DTC[0]=0x10;
DTC[1]=0x1B;
DTC[2]=0x01;
putvalue(DTC_Number_Env,"0x101B01");
  }
    
  if(@this==0x0A)
  { 
DTC[0]=0x10;
DTC[1]=0x1B;
DTC[2]=0x02;
putvalue(DTC_Number_Env,"0x101B02");
  }

  if(@this==0x0B)
  { 
DTC[0]=0x20;
DTC[1]=0x03;
DTC[2]=0x01;
putvalue(DTC_Number_Env,"0x200301");
  }

  if(@this==0x0C)
  { 
DTC[0]=0x20;
DTC[1]=0x03;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0x200300");
  }

  if(@this==0x0D)
  { 
DTC[0]=0x10;
DTC[1]=0x14;
DTC[2]=0x02;
putvalue(DTC_Number_Env,"0x101402");
  }
    
  if(@this==0x0E)
  { 
DTC[0]=0x10;
DTC[1]=0x14;
DTC[2]=0x03;
putvalue(DTC_Number_Env,"0x101403");
  }

  if(@this==0x0F)
  { 
DTC[0]=0x10;
DTC[1]=0x14;
DTC[2]=0x04;
putvalue(DTC_Number_Env,"0x101404");
  }

  if(@this==0x10)
  { 
DTC[0]=0x10;
DTC[1]=0x14;
DTC[2]=0x05;
putvalue(DTC_Number_Env,"0x101405");
  }

  if(@this==0x11)
  { 
DTC[0]=0x10;
DTC[1]=0x14;
DTC[2]=0x06;
putvalue(DTC_Number_Env,"0x101406");
  }
    
  if(@this==0x12)
  { 
DTC[0]=0xE1;
DTC[1]=0x15;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xE11500");
  }

  if(@this==0x13)
  { 
DTC[0]=0xE1;
DTC[1]=0x15;
DTC[2]=0x01;
putvalue(DTC_Number_Env,"0xE11501");
  }

  if(@this==0x14)
  { 
DTC[0]=0xE1;
DTC[1]=0x15;
DTC[2]=0x03;
putvalue(DTC_Number_Env,"0xE11503");
  }

  if(@this==0x15)
  { 
DTC[0]=0xE1;
DTC[1]=0x15;
DTC[2]=0x04;
putvalue(DTC_Number_Env,"0xE11504");
  }
    
  if(@this==0x16)
  { 
DTC[0]=0x20;
DTC[1]=0x03;
DTC[2]=0x02;
putvalue(DTC_Number_Env,"0x200302");
  }

  if(@this==0x17)
  { 
DTC[0]=0x20;
DTC[1]=0x03;
DTC[2]=0x03;
putvalue(DTC_Number_Env,"0x200303");
  }

  if(@this==0x18)
  { 
DTC[0]=0x10;
DTC[1]=0x18;
DTC[2]=0x02;
putvalue(DTC_Number_Env,"0x101802");
  }

  if(@this==0x19)
  { 
DTC[0]=0x10;
DTC[1]=0x18;
DTC[2]=0x01;
putvalue(DTC_Number_Env,"0x101801");
  }
    
  if(@this==0x1A)
  { 
DTC[0]=0x10;
DTC[1]=0x1C;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0x101C00");
  }

  if(@this==0x1B)
  { 
DTC[0]=0x10;
DTC[1]=0x1C;
DTC[2]=0x03;
putvalue(DTC_Number_Env,"0x101C03");
  }

  if(@this==0x1C)
  { 
DTC[0]=0x10;
DTC[1]=0x1C;
DTC[2]=0x10;
putvalue(DTC_Number_Env,"0x101C10");
  }

  if(@this==0x1D)
  { 
DTC[0]=0x10;
DTC[1]=0x1C;
DTC[2]=0x13;
putvalue(DTC_Number_Env,"0x101C13");
  }
    
  if(@this==0x1E)
  { 
DTC[0]=0x10;
DTC[1]=0x1C;
DTC[2]=0x20;
putvalue(DTC_Number_Env,"0x101C20");
  }

  if(@this==0x1F)
  { 
DTC[0]=0x10;
DTC[1]=0x1C;
DTC[2]=0x23;
putvalue(DTC_Number_Env,"0x101C23");
  }

  if(@this==0x20)
  { 
DTC[0]=0x10;
DTC[1]=0x1C;
DTC[2]=0x0C;
putvalue(DTC_Number_Env,"0x101C0C");
  }

  if(@this==0x21)
  { 
DTC[0]=0x10;
DTC[1]=0x1C;
DTC[2]=0x14;
putvalue(DTC_Number_Env,"0x101C14");
  }
    
  if(@this==0x22)
  { 
DTC[0]=0xE1;
DTC[1]=0x14;
DTC[2]=0x27;
putvalue(DTC_Number_Env,"0xE11427");
  }

  if(@this==0x23)
  { 
DTC[0]=0xE1;
DTC[1]=0x14;
DTC[2]=0x28;
putvalue(DTC_Number_Env,"0xE11428");
  }

  if(@this==0x24)
  { 
DTC[0]=0xE1;
DTC[1]=0x0F;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xE10F00");
  }

  if(@this==0x25)
  { 
DTC[0]=0xE1;
DTC[1]=0x0F;
DTC[2]=0x10;
putvalue(DTC_Number_Env,"0xE10F10");
  }
    
  if(@this==0x26)
  { 
DTC[0]=0xE1;
DTC[1]=0x0F;
DTC[2]=0x01;
putvalue(DTC_Number_Env,"0xE10F01");
  }

  if(@this==0x27)
  { 
DTC[0]=0xE1;
DTC[1]=0x0F;
DTC[2]=0x11;
putvalue(DTC_Number_Env,"0xE10F11");
  }

  if(@this==0x28)
  { 
DTC[0]=0x10;
DTC[1]=0x2E;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0x102E00");
  }

  if(@this==0x29)
  { 
DTC[0]=0x10;
DTC[1]=0x2E;
DTC[2]=0x04;
putvalue(DTC_Number_Env,"0x102E04");
  }
    
  if(@this==0x2A)
  { 
DTC[0]=0x10;
DTC[1]=0x2E;
DTC[2]=0x01;
putvalue(DTC_Number_Env,"0x102E01");
  }

  if(@this==0x2B)
  { 
DTC[0]=0x10;
DTC[1]=0x2E;
DTC[2]=0x05;
putvalue(DTC_Number_Env,"0x102E05");
  }

  if(@this==0x2C)
  { 
DTC[0]=0x10;
DTC[1]=0x2E;
DTC[2]=0x03;
putvalue(DTC_Number_Env,"0x102E02");
  }

  if(@this==0x2D)
  { 
DTC[0]=0x10;
DTC[1]=0x2E;
DTC[2]=0x06;
putvalue(DTC_Number_Env,"0x102E06");
  }
    
  if(@this==0x2E)
  { 
DTC[0]=0x10;
DTC[1]=0x2E;
DTC[2]=0x03;
putvalue(DTC_Number_Env,"0x102E03");
  }

  if(@this==0x2F)
  { 
DTC[0]=0x10;
DTC[1]=0x2E;
DTC[2]=0x07;
putvalue(DTC_Number_Env,"0x102E07");
  }

  if(@this==0x30)
  { 
DTC[0]=0xE1;
DTC[1]=0x03;
DTC[2]=0x10;
putvalue(DTC_Number_Env,"0xE10310");
  }

  if(@this==0x31)
  { 
DTC[0]=0xE1;
DTC[1]=0x03;
DTC[2]=0x11;
putvalue(DTC_Number_Env,"0xE10311");
  }
    
  if(@this==0x32)
  { 
DTC[0]=0xE1;
DTC[1]=0x03;
DTC[2]=0x12;
putvalue(DTC_Number_Env,"0xE10312");
  }

  if(@this==0x33)
  { 
DTC[0]=0xE1;
DTC[1]=0x04;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xE10400");
  }

  if(@this==0x34)
  { 
DTC[0]=0xE1;
DTC[1]=0x04;
DTC[2]=0x01;
putvalue(DTC_Number_Env,"0xE10401");
  }

  if(@this==0x35)
  { 
DTC[0]=0xE1;
DTC[1]=0x04;
DTC[2]=0x02;
putvalue(DTC_Number_Env,"0xE10402");
  }
    
  if(@this==0x36)
  { 
DTC[0]=0xE1;
DTC[1]=0x05;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xE10500");
  }

  if(@this==0x37)
  { 
DTC[0]=0xE1;
DTC[1]=0x05;
DTC[2]=0x01;
putvalue(DTC_Number_Env,"0xE10501");
  }

  if(@this==0x38)
  { 
DTC[0]=0xE1;
DTC[1]=0x05;
DTC[2]=0x02;
putvalue(DTC_Number_Env,"0xE10502");
  }

  if(@this==0x39)
  { 
DTC[0]=0xE1;
DTC[1]=0x06;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xE10600");
  }

  if(@this==0x3A)
  { 
DTC[0]=0xE1;
DTC[1]=0x06;
DTC[2]=0x01;
putvalue(DTC_Number_Env,"0xE10601");
  }

  if(@this==0x3B)
  { 
DTC[0]=0xE1;
DTC[1]=0x06;
DTC[2]=0x02;
putvalue(DTC_Number_Env,"0xE10602");
  }
    
  if(@this==0x3C)
  { 
DTC[0]=0xD1;
DTC[1]=0x20;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xD12000");
  }

  if(@this==0x3D)
  { 
DTC[0]=0xD1;
DTC[1]=0x20;
DTC[2]=0x01;
putvalue(DTC_Number_Env,"0xD12001");
  }

  if(@this==0x3E)
  { 
DTC[0]=0xD1;
DTC[1]=0x30;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xD13000");
  }

  if(@this==0x3F)
  { 
DTC[0]=0xD1;
DTC[1]=0x30;
DTC[2]=0x01;
putvalue(DTC_Number_Env,"0xD13001");
  }
    
  if(@this==0x40)
  { 
DTC[0]=0xD1;
DTC[1]=0x30;
DTC[2]=0x02;
putvalue(DTC_Number_Env,"0xD13002");
  }

  if(@this==0x41)
  { 
DTC[0]=0xD1;
DTC[1]=0x31;
DTC[2]=0x00;
putvalue(DTC_Number_Env,"0xD13100");
  }
}

//////////////////////////////////////////////CHAdeMO//////////////////////////////////////////////////

on envVar CAN_Chademo_Env
{
  if(@this==1)
  {
    @CAN_Chademo_LED_Env=1;
    Chademo_CAN.byte(0)=0x01;
    setTimerCyclic(Chademo_Timer,10);

     
  }
  else{
   @CAN_Chademo_LED_Env=0;
    Chademo_CAN.byte(0)=0x00;
    cancelTimer(Chademo_Timer);
  }
}


//////////////////////////////////////////////////PLC////////////////////////////////////////////////////


on envvar PLC_Env
{
if(@this==1)
{

PLC_Msg.HVLM_PlcModemAktivieren_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0x01;

PLC_Msg.HVLM_PlcAnforderung_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0x01;

PLC_Msg.HVLM_MsgTriggerFzgPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0x00;
  
PLC_Msg.HVLM_LadeartAnfFzgPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0x06;
   
PLC_Msg.HVLM_TLS_PnC_Authenfizierung_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0;

PLC_Msg.HVLM_LadebereitFzgPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0x0;
  
PLC_Msg.HVLM_FehlerFzgPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0x0;
    
PLC_Msg.HVLM_LadezustandHvBatFzgPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0x0;
    
//PLC_Msg.HVLM_maxLadestromFzgPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0;
    
//PLC_Msg.HVLM_SollstromFzgPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0;
    
PLC_Msg.HVLM_ZielladespannungFzgPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0;
    
PLC_Msg.HVLM_maxLadespannungFzgPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0;
    
PLC_Msg.HVLM_RestladezeitFzgPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0;
   
PLC_Msg.HVLM_RestladezeitTeilladungPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0;

PLC_Msg.HVLM_ZahlungsmethodeFzgPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0X01;
   
PLC_Msg.HVLM_ReadyToChargeState_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0;
   
PLC_Msg.HVLM_LadenAbgeschlPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0x00;
    
PLC_Msg.HVLM_LadeSessionPlc_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0;
    
PLC_Msg.HVLM_TLS_PnC_Authenfizierung_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01=0;

triggerPDU(PLC_Msg);

  setTimer(Monitor,100);
//testWaitForTimeout(100);

}

}


on signal HVLM_PlcModemAktivieren_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01
{
verify1=getSignal(HVLM_PlcModemAktivieren_XIX_HVLM_PLC_01_XIX_HCP5_CANFD01);
  if (verify1==1)
{
Modem_Active=1;
}
}

on signal HVLX_PlcChipStatus_A_XIX_HVLS_Ladedose_SG1_XIX_HCP5_CANFD01
{
verify2=getSignal(HVLX_PlcChipStatus_A_XIX_HVLS_Ladedose_SG1_XIX_HCP5_CANFD01);
  if (verify2==1)
{
Chip_Status=1;
}
}

on signal HVLX_PlcLinkStatus_XIX_ISOND_01_XIX_HCP5_CANFD01
{
 verify4=getSignal(HVLX_PlcLinkStatus_XIX_ISOND_01_XIX_HCP5_CANFD01);
if(verify4==1)
  {
Link=1;
}
  if(verify4==4)
  {
Link=2;
}
}
on signal HVLX_PlcFehlerstatus_XIX_ISOND_01_XIX_HCP5_CANFD01
{
verify3=getSignal(HVLX_PlcFehlerstatus_XIX_ISOND_01_XIX_HCP5_CANFD01);
  if (verify3==0)
{
Fehler=0;
}
if (verify3!=0)
{
Fehler=1;
}
}

on Timer Monitor
{
setTimer(Monitor,100);
if((Modem_Active==1)&&(Chip_Status==1)&&(Fehler==0))
{
@PLC_LEDLEnv1=1; // set LED ON or Green
}
if((Modem_Active==1)&&(Chip_Status==1)&&(Link==2)&&(Fehler==0))
{
@PLC_LEDLEnv=1; // set LED ON or Green
}
if((Modem_Active==1)&&((Chip_Status!=1)&&(Link!=1)&&(Link!=2)&&(Fehler!=0)))
{
@PLC_LEDLEnv=0; // set LED OFF or Grey
  @PLC_LEDLEnv1=0;
}
}


////////////////////////////////////Analog Read/////////////////////////////////////

on envVar Analog_Read_List_Env
{
     if(@this==0x1)
  {
    analog=0;
    
  }

   if(@this==0x2)
  {
     analog=2;
    
  }

   if(@this==0x3)
  {
     analog=4;
    
  }
  
   if(@this==0x4)
  {
     analog=6;
    
  }
  
   if(@this==0x5)
  {
     analog=8;
    
  }
  
   if(@this==0x6)
  {
     analog=10;
    
  }
  
   if(@this==0x7)
  {
     analog=12;
    
  }
  
   if(@this==0x8)
  {
     analog=14;
    
  }
  
   if(@this==0x9)
  {
     analog=16;
    
  }

   if(@this==0xA)
  {
     analog=18;
    
  }
  
  if(@this==0xB)
  {
     analog=20;
    
  }
  
  if(@this==0xC)
  {
     analog=22;
    
  }
  
  if(@this==0xD)
  {
     analog=24;
    
  }
  
  if(@this==0xE)
  {
     analog=26;
    
  }
  
  if(@this==0xF)
  {
     analog=28;
    
  }
  
  if(@this==0x10)
  {
     analog=30;
    
  }
  
  if(@this==0x11)
  {
     analog=32;
    
  }
  
  if(@this==0x12)
  {
     analog=34;
    
  }
  
  if(@this==0x13)
  {
     analog=36;
    
  }
  
  if(@this==0x14)
  {
     analog=38;
    
  }
  
  if(@this==0x15)
  {
     analog=40;
    
  }
  
  if(@this==0x16)
  {
     analog=42;
    
  }
  
  if(@this==0x17)
  {
     analog=44;
    
  }
  
  if(@this==0x18)
  {
     analog=46;
    
  }
  
  if(@this==0x19)
  {
     analog=48;
    
  }
  
  if(@this==0x1A)
  {
     analog=50;
    
  }
  
  if(@this==0x1B)
  {
     analog=52;
    
  }
  
  if(@this==0x1C)
  {
     analog=54;
    
  }
  
}